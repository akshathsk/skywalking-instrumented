(window.webpackJsonp=window.webpackJsonp||[]).push([["dashboards"],{"1cd9":function(e,t,a){"use strict";a.r(t);var n=a("7a23"),r=a("cf2e"),c=(a("797a"),a("8a7a")),o=a("c349"),i=(a("c4aa"),a("1da1")),s=(a("96cf"),a("c740"),a("b0c0"),a("99af"),a("d81d"),a("d899")),l=a("afbc"),u=a("b789"),d=a("b210"),b=a("3ef4"),f=a("ac1a"),p=a("b970"),O={class:"new-dashboard"},m={class:"title"},j={class:"item"},h={class:"label"},y={class:"item"},v={class:"label"},g={class:"item"},w={class:"label"},x={class:"btn"},N=Object(n.defineComponent)({setup:function(e){var t=Object(f.a)(),a=Object(p.a)();t.setPageTitle("Dashboard New");var N=Object(s.useI18n)().t,V=Object(u.a)(),C=Object(n.reactive)({name:"",selectedLayer:"",entity:d.h[0].value,layers:[]});!function(){S.apply(this,arguments)}(),a.setDashboards();var k=function(){if(a.dashboards.findIndex((function(e){return e.name===C.name&&C.entity===e.entity&&C.selectedLayer===e.layer}))>-1)b.a.error(N("nameError"));else{a.setCurrentDashboard({name:C.name,entity:C.entity,layer:C.selectedLayer});var e=C.name,t="/dashboard/".concat(C.selectedLayer,"/").concat(C.entity,"/").concat(e);l.a.push(t)}};function S(){return(S=Object(i.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.fetchLayers();case 2:(t=e.sent).errors&&b.a.error(t.errors),C.selectedLayer=t.data.layers[0],C.layers=t.data.layers.map((function(e){return{label:e,value:e}}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){C.selectedLayer=e[0].value}function R(e){C.entity=e[0].value}return function(e,t){var a=o.a,i=c.a,s=r.a;return Object(n.openBlock)(),Object(n.createElementBlock)("div",O,[Object(n.createElementVNode)("div",m,Object(n.toDisplayString)(Object(n.unref)(N)("newDashboard")),1),Object(n.createElementVNode)("div",j,[Object(n.createElementVNode)("div",h,Object(n.toDisplayString)(Object(n.unref)(N)("name")),1),Object(n.createVNode)(a,{size:"default",modelValue:Object(n.unref)(C).name,"onUpdate:modelValue":t[0]||(t[0]=function(e){return Object(n.unref)(C).name=e}),placeholder:"Please input name"},null,8,["modelValue"])]),Object(n.createElementVNode)("div",y,[Object(n.createElementVNode)("div",v,Object(n.toDisplayString)(Object(n.unref)(N)("layer")),1),Object(n.createVNode)(i,{modelValue:Object(n.unref)(C).selectedLayer,"onUpdate:modelValue":t[1]||(t[1]=function(e){return Object(n.unref)(C).selectedLayer=e}),options:Object(n.unref)(C).layers,placeholder:"Select a layer",onChange:D,class:"selectors"},null,8,["modelValue","options"])]),Object(n.createElementVNode)("div",g,[Object(n.createElementVNode)("div",w,Object(n.toDisplayString)(Object(n.unref)(N)("entityType")),1),Object(n.createVNode)(i,{modelValue:Object(n.unref)(C).entity,"onUpdate:modelValue":t[2]||(t[2]=function(e){return Object(n.unref)(C).entity=e}),options:Object(n.unref)(d.h),placeholder:"Select a entity",onChange:R,class:"selectors"},null,8,["modelValue","options"])]),Object(n.createElementVNode)("div",x,[Object(n.createVNode)(s,{class:"create",size:"default",type:"primary",onClick:k},{default:Object(n.withCtx)((function(){return[Object(n.createTextVNode)(Object(n.toDisplayString)(Object(n.unref)(N)("create")),1)]})),_:1})])])}}}),V=(a("56ba"),a("6b0d"));const C=a.n(V)()(N,[["__scopeId","data-v-37c7b564"]]);t.default=C},3806:function(e,t,a){"use strict";a("d745")},"56ba":function(e,t,a){"use strict";a("d1be")},"647a":function(e,t,a){"use strict";a.r(t);var n=a("7a23"),r=a("90b1"),c=(a("f48c"),a("7faf")),o=(a("2d4f"),a("1e49")),i=(a("7dd1"),a("421b")),s=(a("448e"),a("6344"),a("c349")),l=(a("c4aa"),a("cf2e")),u=(a("797a"),a("cdae")),d=a("5530"),b=a("53ca"),f=a("b85c"),p=a("1da1"),O=(a("96cf"),a("4e82"),a("b0c0"),a("d81d"),a("a15b"),a("d3b7"),a("159b"),a("a434"),a("caad"),a("99af"),a("4de4"),a("2532"),a("c740"),a("3ca3"),a("ddb0"),a("ac1f"),a("1276"),a("e9c4"),a("00b4"),a("4d63"),a("c607"),a("2c3e"),a("25f0"),a("d899")),m=a("3ef4"),j=a("c9a1"),h=a("ac1a"),y=a("b970"),v=a("afbc"),g=(a("2b3d"),a("9861"),function(e){return new Promise((function(t){var a=e.target.files;if(!(a.length<1)){var n=a[0],r=new FileReader;r.readAsText(n),r.onload=function(){"string"==typeof this.result&&t(JSON.parse(this.result))}}}))}),w=a("b210"),x=a("cc5d"),N={class:"dashboard-list"},V={class:"flex-h header",style:{margin:"10px 0"}},C={class:"table"},k=["onClick"],S={class:"toggle-selection"},D={for:"dashboard-file",class:"input-label"},R=Object(n.defineComponent)({setup:function(e){var t=Object(O.useI18n)().t,a=Object(h.a)(),R=Object(y.a)(),T=Object(n.ref)([]),_=Object(n.ref)(""),E=Object(n.ref)(!1),I=Object(n.ref)(1),z=Object(n.ref)(0),J=Object(n.ref)(),L=Object(n.ref)([]),B=Object(n.ref)(null);a.setPageTitle("Dashboard List");var P=function(e){L.value=e};function U(){return(U=Object(p.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.setDashboards();case 2:Q(1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return M.apply(this,arguments)}function M(){return(M=Object(p.a)(regeneratorRuntime.mark((function e(a){var n,r,c,o,i,s,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(a);case 2:n=e.sent,r=Object(f.a)(n),e.prev=4,o=function(){var e=c.value,a=e.configuration,n=a.layer,r=a.name,o=a.entity;if(R.dashboards.findIndex((function(t){return t.name===r&&t.entity===o&&t.layer===n&&!e.id}))>-1)return{v:m.a.error(t("nameError"))}},r.s();case 7:if((c=r.n()).done){e.next=13;break}if(i=o(),"object"!==Object(b.a)(i)){e.next=11;break}return e.abrupt("return",i.v);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:E.value=!0,s=Object(f.a)(n),e.prev=23,u=regeneratorRuntime.mark((function e(){var t,a,n,r,c,o,i,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.value,a=t.configuration,n=a.layer,r=a.name,c=a.entity,o=a.isRoot,i=a.children,s=R.dashboards.findIndex((function(e){return e.id===t.id})),u={name:r.split(" ").join("-"),layer:n,entity:c,isRoot:!1},s>-1&&(u.id=t.id,u.isRoot=o),R.setCurrentDashboard(u),R.setLayout(i),e.next=9,R.saveDashboard();case 9:case"end":return e.stop()}}),e)})),s.s();case 26:if((l=s.n()).done){e.next=30;break}return e.delegateYield(u(),"t1",28);case 28:e.next=26;break;case 30:e.next=35;break;case 32:e.prev=32,e.t2=e.catch(23),s.e(e.t2);case 35:return e.prev=35,s.f(),e.finish(35);case 38:T.value=R.dashboards,E.value=!1,B.value=null;case 41:case"end":return e.stop()}}),e,null,[[4,15,18,21],[23,32,35,38]])})))).apply(this,arguments)}function A(){if(L.value.length){var e,t=L.value.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){var t=[e.layer,e.entity,e.name].join("_");return JSON.parse(sessionStorage.getItem(t)||"{}")})),a=Object(f.a)(t);try{for(a.s();!(e=a.n()).done;){K(e.value.configuration.children)}}catch(e){a.e(e)}finally{a.f()}!function(e,t){var a=JSON.stringify(e),n=document.createElement("a");n.download=t,n.style.display="none";var r=new Blob([a]);n.href=URL.createObjectURL(r),document.body.appendChild(n),n.click(),document.body.removeChild(n)}(t,"dashboards.json"),setTimeout((function(){J.value.clearSelection()}),2e3)}}function K(e){var t,a=Object(f.a)(e||[]);try{var n=function(){var e=t.value;if(delete e.moved,delete e.activedTabIndex,delete e.standard,delete e.id,delete e.label,delete e.value,Object(x.a)(e.graph)&&delete e.graph,e.widget&&(""===e.widget.title&&delete e.widget.title,""===e.widget.tips&&delete e.widget.tips),Object(x.a)(e.widget)&&delete e.widget,e.metrics&&e.metrics.length&&e.metrics[0]||delete e.metrics,e.metricTypes&&e.metricTypes.length&&e.metricTypes[0]||delete e.metricTypes,e.metricConfig&&e.metricConfig.length&&e.metricConfig.forEach((function(t,a){t.calculation||delete t.calculation,t.unit||delete t.unit,t.label||delete t.label,Object(x.a)(t)&&(e.metricConfig||[]).splice(a,1)})),e.metricConfig&&e.metricConfig.length||delete e.metricConfig,"Tab"===e.type){var a,n=Object(f.a)(e.children||[]);try{for(n.s();!(a=n.n()).done;){K(a.value.children)}}catch(e){n.e(e)}finally{n.f()}}["Trace","Topology","Tab","Profile","Ebpf","Log"].includes(e.type)&&delete e.widget};for(a.s();!(t=a.n()).done;)n()}catch(e){a.e(e)}finally{a.f()}}function Y(){return(Y=Object(p.a)(regeneratorRuntime.mark((function e(t){var a,n,r,c,o,i,s,l,u,b,p,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],E.value=!0,n=Object(f.a)(R.dashboards),e.prev=3,n.s();case 5:if((r=n.n()).done){e.next=33;break}if((c=r.value).id!==t.id){e.next=20;break}return c.isRoot=!t.isRoot,o=[c.layer,c.entity,c.name].join("_"),i=sessionStorage.getItem(o)||"{}",delete(s=Object(d.a)(Object(d.a)({},JSON.parse(i).configuration),c)).id,l={id:c.id,configuration:JSON.stringify(s)},e.next=16,R.updateDashboard(l);case 16:e.sent.data.changeTemplate.id&&sessionStorage.setItem(o,JSON.stringify({id:c.id,configuration:s})),e.next=30;break;case 20:if(c.layer!==t.layer||![w.h[0].value,w.h[1].value].includes(c.entity)||!1!==t.isRoot||!0!==c.isRoot){e.next=30;break}return c.isRoot=!1,u=[c.layer,c.entity,c.name].join("_"),b=sessionStorage.getItem(u)||"{}",p=Object(d.a)(Object(d.a)({},JSON.parse(b).configuration),c),O={id:c.id,configuration:JSON.stringify(p)},e.next=28,R.updateDashboard(O);case 28:e.sent.data.changeTemplate.id&&sessionStorage.setItem(u,JSON.stringify({id:c.id,configuration:p}));case 30:a.push(c);case 31:e.next=5;break;case 33:e.next=38;break;case 35:e.prev=35,e.t0=e.catch(3),n.e(e.t0);case 38:return e.prev=38,n.f(),e.finish(38);case 41:R.resetDashboards(a),Q(1),E.value=!1;case 44:case"end":return e.stop()}}),e,null,[[3,35,38,41]])})))).apply(this,arguments)}function q(e){j.a.prompt("Please input dashboard name","Edit",{confirmButtonText:"OK",cancelButtonText:"Cancel",inputValue:e.name}).then((function(t){var a=t.value;!function(e,t){G.apply(this,arguments)}(e,a)})).catch((function(){Object(m.a)({type:"info",message:"Input canceled"})}))}function G(){return(G=Object(p.a)(regeneratorRuntime.mark((function e(t,a){var n,r,c,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!new RegExp(/\s/).test(a)){e.next=3;break}return m.a.error("The name cannot contain spaces, carriage returns, etc"),e.abrupt("return");case 3:return n=[t.layer,t.entity,t.name].join("_"),r=sessionStorage.getItem(n)||"{}",delete(c=Object(d.a)(Object(d.a)(Object(d.a)({},JSON.parse(r).configuration),t),{},{name:a})).id,delete c.filters,o={id:t.id,configuration:JSON.stringify(c)},E.value=!0,e.next=12,R.updateDashboard(o);case 12:if(i=e.sent,E.value=!1,i.data.changeTemplate.id){e.next=16;break}return e.abrupt("return");case 16:R.setCurrentDashboard(Object(d.a)(Object(d.a)({},t),{},{name:a})),T.value=R.dashboards.map((function(e){return R.currentDashboard.id===e.id&&(e=R.currentDashboard),e})),R.resetDashboards(T.value),sessionStorage.setItem("dashboards",JSON.stringify(T.value)),sessionStorage.removeItem(n),s=[R.currentDashboard.layer,R.currentDashboard.entity,R.currentDashboard.name].join("_"),sessionStorage.setItem(s,JSON.stringify({id:t.id,configuration:c})),_.value="";case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(p.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R.setCurrentDashboard(t),E.value=!0,e.next=4,R.deleteDashboard();case 4:T.value=R.dashboards,E.value=!1,sessionStorage.setItem("dashboards",JSON.stringify(T.value)),sessionStorage.removeItem("".concat(t.layer,"_").concat(t.entity,"_").concat(t.name));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){var t=JSON.parse(sessionStorage.getItem("dashboards")||"[]").filter((function(e){return e.name.includes(_.value)}));z.value=t.length,T.value=t.filter((function(t,a){return a<18*e&&a>=18*(e-1)})),I.value=e}function W(){return X.apply(this,arguments)}function X(){return(X=Object(p.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E.value=!0,e.next=3,R.resetTemplates();case 3:E.value=!1;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){I.value=e,Q(e)}return function(){U.apply(this,arguments)}(),function(e,a){var d=u.a,b=l.a,f=s.a,p=Object(n.resolveComponent)("router-link"),O=o.b,m=i.a,j=o.a,h=c.a,y=r.a;return Object(n.openBlock)(),Object(n.createElementBlock)("div",N,[Object(n.createElementVNode)("div",V,[Object(n.createVNode)(f,{modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=function(e){return _.value=e}),placeholder:"Please input name",class:"input-with-search ml-10",size:"small",onChange:a[1]||(a[1]=function(e){return Q(1)})},{append:Object(n.withCtx)((function(){return[Object(n.createVNode)(b,{size:"small"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(d,{size:"sm",iconName:"search"})]})),_:1})]})),_:1},8,["modelValue"]),Object(n.createVNode)(b,{class:"ml-10 reload-btn",size:"small",onClick:W},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(d,{size:"sm",iconName:"retry",class:"reload"}),Object(n.createTextVNode)(" "+Object(n.toDisplayString)(Object(n.unref)(t)("reloadDashboards")),1)]})),_:1}),Object(n.createVNode)(p,{to:"/dashboard/new"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(b,{size:"small",type:"primary"},{default:Object(n.withCtx)((function(){return[Object(n.createTextVNode)(" + "+Object(n.toDisplayString)(Object(n.unref)(t)("newDashboard")),1)]})),_:1})]})),_:1})]),Object(n.createElementVNode)("div",C,[Object(n.withDirectives)((Object(n.openBlock)(),Object(n.createBlock)(j,{data:T.value,style:{fontSize:"13px",width:"100%"},ref_key:"multipleTableRef",ref:J,"default-sort":{prop:"name",order:"ascending"},onSelectionChange:P,height:"637px",size:"small"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(O,{type:"selection",width:"55"}),Object(n.createVNode)(O,{prop:"name",label:"Name"},{default:Object(n.withCtx)((function(e){return[Object(n.createElementVNode)("span",{class:"cp name",onClick:function(t){return a=e.row,R.setMode(!1),R.setEntity(a.entity),R.setLayer(a.layer),R.setCurrentDashboard(a),void v.a.push("/dashboard/".concat(a.layer,"/").concat(a.entity,"/").concat(a.name));var a}},Object(n.toDisplayString)(e.row.name),9,k)]})),_:1}),Object(n.createVNode)(O,{prop:"layer",label:"Layer",width:"120"}),Object(n.createVNode)(O,{prop:"entity",label:"Entity",width:"200"}),Object(n.createVNode)(O,{prop:"isRoot",label:"Root",width:"60"},{default:Object(n.withCtx)((function(e){return[Object(n.createElementVNode)("span",null,Object(n.toDisplayString)(e.row.isRoot?Object(n.unref)(t)("yes"):Object(n.unref)(t)("no")),1)]})),_:1}),Object(n.createVNode)(O,{label:"Operations",width:"350"},{default:Object(n.withCtx)((function(e){return[Object(n.createVNode)(b,{size:"small",onClick:function(t){return a=e.row,R.setMode(!0),R.setEntity(a.entity),R.setLayer(a.layer),R.setCurrentDashboard(a),void v.a.push("/dashboard/".concat(a.layer,"/").concat(a.entity,"/").concat(a.name));var a}},{default:Object(n.withCtx)((function(){return[Object(n.createTextVNode)(Object(n.toDisplayString)(Object(n.unref)(t)("edit")),1)]})),_:2},1032,["onClick"]),Object(n.createVNode)(b,{size:"small",onClick:function(t){return q(e.row)}},{default:Object(n.withCtx)((function(){return[Object(n.createTextVNode)(Object(n.toDisplayString)(Object(n.unref)(t)("rename")),1)]})),_:2},1032,["onClick"]),Object(n.createVNode)(m,{title:Object(n.unref)(t)("deleteTitle"),onConfirm:function(t){return function(e){return H.apply(this,arguments)}(e.row)}},{reference:Object(n.withCtx)((function(){return[Object(n.createVNode)(b,{size:"small",type:"danger"},{default:Object(n.withCtx)((function(){return[Object(n.createTextVNode)(Object(n.toDisplayString)(Object(n.unref)(t)("delete")),1)]})),_:1})]})),_:2},1032,["title","onConfirm"]),[Object(n.unref)(w.h)[0].value,Object(n.unref)(w.h)[1].value].includes(e.row.entity)?(Object(n.openBlock)(),Object(n.createBlock)(m,{key:0,title:Object(n.unref)(t)("rootTitle"),onConfirm:function(t){return function(e){return Y.apply(this,arguments)}(e.row)}},{reference:Object(n.withCtx)((function(){return[Object(n.createVNode)(b,{size:"small",style:{width:"110px"},type:"danger"},{default:Object(n.withCtx)((function(){return[Object(n.createTextVNode)(Object(n.toDisplayString)(e.row.isRoot?Object(n.unref)(t)("setNormal"):Object(n.unref)(t)("setRoot")),1)]})),_:2},1024)]})),_:2},1032,["title","onConfirm"])):Object(n.createCommentVNode)("",!0)]})),_:1})]})),_:1},8,["data"])),[[y,E.value]]),Object(n.createElementVNode)("div",S,[Object(n.createVNode)(b,{size:"default",class:"btn",onClick:A},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(d,{class:"mr-5",iconName:"save_alt"}),Object(n.createTextVNode)(" "+Object(n.toDisplayString)(Object(n.unref)(t)("export")),1)]})),_:1}),Object(n.createVNode)(b,{class:"ml-10 btn",size:"default"},{default:Object(n.withCtx)((function(){return[Object(n.createElementVNode)("input",{ref_key:"dashboardFile",ref:B,id:"dashboard-file",class:"import-template",type:"file",name:"file",title:"",accept:".json",onChange:F},null,544),Object(n.createElementVNode)("label",D,[Object(n.createVNode)(d,{class:"mr-5",iconName:"folder_open"}),Object(n.createTextVNode)(" "+Object(n.toDisplayString)(Object(n.unref)(t)("import")),1)])]})),_:1}),Object(n.createVNode)(h,{class:"pagination",background:"",small:"",layout:"prev, pager, next","page-size":18,total:z.value,modelValue:I.value,"onUpdate:modelValue":a[2]||(a[2]=function(e){return I.value=e}),onCurrentChange:Z,onPrevClick:Z,onNextClick:Z},null,8,["total","modelValue"])])])])}}}),T=(a("3806"),a("6b0d"));const _=a.n(T)()(R,[["__scopeId","data-v-48b48528"]]);t.default=_},d1be:function(e,t,a){},d745:function(e,t,a){}}]);