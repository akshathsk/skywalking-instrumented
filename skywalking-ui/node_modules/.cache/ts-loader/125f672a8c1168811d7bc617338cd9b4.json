{"remainingRequest":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/thread-loader/dist/cjs.js!/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/babel-loader/lib/index.js!/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/ts-loader/index.js??ref--15-3!/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/eslint-loader/index.js??ref--14-0!/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/src/store/modules/topology.ts","dependencies":[{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/src/store/modules/topology.ts","mtime":1661850019000},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/babel.config.js","mtime":1661850018000},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/unplugin/dist/webpack/loaders/transform.js","mtime":1663881224252},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/cache-loader/dist/cjs.js","mtime":1663881222784},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/thread-loader/dist/cjs.js","mtime":1663881222612},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/babel-loader/lib/index.js","mtime":1663881224500},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/ts-loader/index.js","mtime":1663881224684},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/eslint-loader/index.js","mtime":1663881222992}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvaG9tZS9zazExNy9maW5hbC1wcm9qZWN0L2FwYWNoZS1za3l3YWxraW5nLWFwbS05LjIuMC9za3l3YWxraW5nLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS9zazExNy9maW5hbC1wcm9qZWN0L2FwYWNoZS1za3l3YWxraW5nLWFwbS05LjIuMC9za3l3YWxraW5nLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL3NrMTE3L2ZpbmFsLXByb2plY3QvYXBhY2hlLXNreXdhbGtpbmctYXBtLTkuMi4wL3NreXdhbGtpbmctdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CgovKioKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZSBvciBtb3JlCiAqIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUgZGlzdHJpYnV0ZWQgd2l0aAogKiB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuCiAqIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlIHRvIFlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wCiAqICh0aGUgIkxpY2Vuc2UiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoCiAqIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwppbXBvcnQgeyBkZWZpbmVTdG9yZSB9IGZyb20gInBpbmlhIjsKaW1wb3J0IHsgc3RvcmUgfSBmcm9tICJAL3N0b3JlIjsKaW1wb3J0IGdyYXBocWwgZnJvbSAiQC9ncmFwaHFsIjsKaW1wb3J0IHsgdXNlU2VsZWN0b3JTdG9yZSB9IGZyb20gIkAvc3RvcmUvbW9kdWxlcy9zZWxlY3RvcnMiOwppbXBvcnQgeyB1c2VBcHBTdG9yZVdpdGhPdXQgfSBmcm9tICJAL3N0b3JlL21vZHVsZXMvYXBwIjsKaW1wb3J0IHF1ZXJ5IGZyb20gIkAvZ3JhcGhxbC9mZXRjaCI7CmltcG9ydCB7IHVzZVF1ZXJ5VG9wb2xvZ3lNZXRyaWNzIH0gZnJvbSAiQC9ob29rcy91c2VQcm9jZXNzb3IiOwppbXBvcnQgeyBFbE1lc3NhZ2UgfSBmcm9tICJlbGVtZW50LXBsdXMiOwpleHBvcnQgdmFyIHRvcG9sb2d5U3RvcmUgPSBkZWZpbmVTdG9yZSh7CiAgaWQ6ICJ0b3BvbG9neSIsCiAgc3RhdGU6IGZ1bmN0aW9uIHN0YXRlKCkgewogICAgcmV0dXJuIHsKICAgICAgY2FsbHM6IFtdLAogICAgICBub2RlczogW10sCiAgICAgIG5vZGU6IG51bGwsCiAgICAgIGNhbGw6IG51bGwsCiAgICAgIG5vZGVNZXRyaWNWYWx1ZToge30sCiAgICAgIGxpbmtTZXJ2ZXJNZXRyaWNzOiB7fSwKICAgICAgbGlua0NsaWVudE1ldHJpY3M6IHt9CiAgICB9OwogIH0sCiAgYWN0aW9uczogewogICAgc2V0Tm9kZTogZnVuY3Rpb24gc2V0Tm9kZShub2RlKSB7CiAgICAgIHRoaXMubm9kZSA9IG5vZGU7CiAgICB9LAogICAgc2V0TGluazogZnVuY3Rpb24gc2V0TGluayhsaW5rKSB7CiAgICAgIHRoaXMuY2FsbCA9IGxpbms7CiAgICB9LAogICAgc2V0SW5zdGFuY2VUb3BvbG9neTogZnVuY3Rpb24gc2V0SW5zdGFuY2VUb3BvbG9neShkYXRhKSB7CiAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihkYXRhLmNhbGxzKSwKICAgICAgICAgIF9zdGVwOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGNhbGwgPSBfc3RlcC52YWx1ZTsKCiAgICAgICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGRhdGEubm9kZXMpLAogICAgICAgICAgICAgIF9zdGVwMjsKCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgICAgIHZhciBub2RlID0gX3N0ZXAyLnZhbHVlOwoKICAgICAgICAgICAgICBpZiAoY2FsbC5zb3VyY2UgPT09IG5vZGUuaWQpIHsKICAgICAgICAgICAgICAgIGNhbGwuc291cmNlT2JqID0gbm9kZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChjYWxsLnRhcmdldCA9PT0gbm9kZS5pZCkgewogICAgICAgICAgICAgICAgY2FsbC50YXJnZXRPYmogPSBub2RlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgICAgICB9CgogICAgICAgICAgY2FsbC52YWx1ZSA9IGNhbGwudmFsdWUgfHwgMTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgfQoKICAgICAgdGhpcy5jYWxscyA9IGRhdGEuY2FsbHM7CiAgICAgIHRoaXMubm9kZXMgPSBkYXRhLm5vZGVzOwogICAgfSwKICAgIHNldFRvcG9sb2d5OiBmdW5jdGlvbiBzZXRUb3BvbG9neShkYXRhKSB7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAgdmFyIHNlcnZpY2VzID0gdXNlU2VsZWN0b3JTdG9yZSgpLnNlcnZpY2VzOwogICAgICB2YXIgbm9kZXMgPSAoZGF0YS5ub2RlcyB8fCBbXSkucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBuZXh0KSB7CiAgICAgICAgaWYgKCFvYmpbbmV4dC5pZF0pIHsKICAgICAgICAgIG9ialtuZXh0LmlkXSA9IHRydWU7CiAgICAgICAgICB2YXIgcyA9IHNlcnZpY2VzLmZpbHRlcihmdW5jdGlvbiAoZCkgewogICAgICAgICAgICByZXR1cm4gZC5pZCA9PT0gbmV4dC5pZDsKICAgICAgICAgIH0pWzBdIHx8IHt9OwogICAgICAgICAgbmV4dC5sYXllciA9IHMubGF5ZXJzID8gcy5sYXllcnNbMF0gOiBudWxsOwogICAgICAgICAgcHJldi5wdXNoKG5leHQpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHByZXY7CiAgICAgIH0sIFtdKTsKICAgICAgdmFyIGNhbGxzID0gKGRhdGEuY2FsbHMgfHwgW10pLnJlZHVjZShmdW5jdGlvbiAocHJldiwgbmV4dCkgewogICAgICAgIGlmICghb2JqW25leHQuaWRdKSB7CiAgICAgICAgICBvYmpbbmV4dC5pZF0gPSB0cnVlOwogICAgICAgICAgbmV4dC52YWx1ZSA9IG5leHQudmFsdWUgfHwgMTsKCiAgICAgICAgICB2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGRhdGEubm9kZXMpLAogICAgICAgICAgICAgIF9zdGVwMzsKCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjMucygpOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMubigpKS5kb25lOykgewogICAgICAgICAgICAgIHZhciBub2RlID0gX3N0ZXAzLnZhbHVlOwoKICAgICAgICAgICAgICBpZiAobmV4dC5zb3VyY2UgPT09IG5vZGUuaWQpIHsKICAgICAgICAgICAgICAgIG5leHQuc291cmNlT2JqID0gbm9kZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChuZXh0LnRhcmdldCA9PT0gbm9kZS5pZCkgewogICAgICAgICAgICAgICAgbmV4dC50YXJnZXRPYmogPSBub2RlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIF9pdGVyYXRvcjMuZShlcnIpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgX2l0ZXJhdG9yMy5mKCk7CiAgICAgICAgICB9CgogICAgICAgICAgbmV4dC52YWx1ZSA9IG5leHQudmFsdWUgfHwgMTsKICAgICAgICAgIHByZXYucHVzaChuZXh0KTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBwcmV2OwogICAgICB9LCBbXSk7CiAgICAgIHRoaXMuY2FsbHMgPSBjYWxsczsKICAgICAgdGhpcy5ub2RlcyA9IG5vZGVzOwogICAgfSwKICAgIHNldE5vZGVNZXRyaWNWYWx1ZTogZnVuY3Rpb24gc2V0Tm9kZU1ldHJpY1ZhbHVlKG0pIHsKICAgICAgdGhpcy5ub2RlTWV0cmljVmFsdWUgPSBtOwogICAgfSwKICAgIHNldExpbmtTZXJ2ZXJNZXRyaWNzOiBmdW5jdGlvbiBzZXRMaW5rU2VydmVyTWV0cmljcyhtKSB7CiAgICAgIHRoaXMubGlua1NlcnZlck1ldHJpY3MgPSBtOwogICAgfSwKICAgIHNldExpbmtDbGllbnRNZXRyaWNzOiBmdW5jdGlvbiBzZXRMaW5rQ2xpZW50TWV0cmljcyhtKSB7CiAgICAgIHRoaXMubGlua0NsaWVudE1ldHJpY3MgPSBtOwogICAgfSwKICAgIGdldERlcHRoU2VydmljZVRvcG9sb2d5OiBmdW5jdGlvbiBnZXREZXB0aFNlcnZpY2VUb3BvbG9neShzZXJ2aWNlSWRzLCBkZXB0aCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzLCBpZHMsIGpzb24sIHBvZHMsIG5vZGVzLCBjYWxscywgdG9wbywgc2VydmljZXMsIF9ub2RlcywgX2NhbGxzLCBkYXRhLCBub2RlSWRzLCBfbm9kZXMzLCBfY2FsbHMzLCB0b3Bvc09iaiwgX25vZGVzMiwgX2NhbGxzMiwgX25vZGVzNCwgX2NhbGxzNCwgX25vZGVzNSwgX2NhbGxzNTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZ2V0U2VydmljZXNUb3BvbG9neShzZXJ2aWNlSWRzKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIShkZXB0aCA+IDEpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWRzID0gKHJlcy5ub2RlcyB8fCBbXSkubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmlkOwogICAgICAgICAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiAhc2VydmljZUlkcy5pbmNsdWRlcyhkKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmIChpZHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpcy5zZXRUb3BvbG9neShyZXMpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZ2V0U2VydmljZXNUb3BvbG9neShpZHMpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAganNvbiA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCEoZGVwdGggPiAyKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHBvZHMgPSBqc29uLm5vZGVzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5pZDsKICAgICAgICAgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gIVtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoaWRzKSwgX3RvQ29uc3VtYWJsZUFycmF5KHNlcnZpY2VJZHMpKS5pbmNsdWRlcyhkKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmIChwb2RzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG5vZGVzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShyZXMubm9kZXMpLCBfdG9Db25zdW1hYmxlQXJyYXkoanNvbi5ub2RlcykpOwogICAgICAgICAgICAgICAgY2FsbHMgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHJlcy5jYWxscyksIF90b0NvbnN1bWFibGVBcnJheShqc29uLmNhbGxzKSk7CgogICAgICAgICAgICAgICAgX3RoaXMuc2V0VG9wb2xvZ3koewogICAgICAgICAgICAgICAgICBub2Rlczogbm9kZXMsCiAgICAgICAgICAgICAgICAgIGNhbGxzOiBjYWxscwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZ2V0U2VydmljZXNUb3BvbG9neShwb2RzKTsKCiAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICAgIHRvcG8gPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghKGRlcHRoID4gMykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDUxOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBzZXJ2aWNlcyA9IHRvcG8ubm9kZXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmlkOwogICAgICAgICAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiAhW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShpZHMpLCBfdG9Db25zdW1hYmxlQXJyYXkocG9kcyksIF90b0NvbnN1bWFibGVBcnJheShzZXJ2aWNlSWRzKSkuaW5jbHVkZXMoZCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoc2VydmljZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX25vZGVzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShyZXMubm9kZXMpLCBfdG9Db25zdW1hYmxlQXJyYXkoanNvbi5ub2RlcyksIF90b0NvbnN1bWFibGVBcnJheSh0b3BvLm5vZGVzKSk7CiAgICAgICAgICAgICAgICBfY2FsbHMgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHJlcy5jYWxscyksIF90b0NvbnN1bWFibGVBcnJheShqc29uLmNhbGxzKSwgX3RvQ29uc3VtYWJsZUFycmF5KHRvcG8uY2FsbHMpKTsKCiAgICAgICAgICAgICAgICBfdGhpcy5zZXRUb3BvbG9neSh7CiAgICAgICAgICAgICAgICAgIG5vZGVzOiBfbm9kZXMsCiAgICAgICAgICAgICAgICAgIGNhbGxzOiBfY2FsbHMKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDI4OgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDMwOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdldFNlcnZpY2VzVG9wb2xvZ3koc2VydmljZXMpOwoKICAgICAgICAgICAgICBjYXNlIDMwOgogICAgICAgICAgICAgICAgZGF0YSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCEoZGVwdGggPiA0KSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG5vZGVJZHMgPSBkYXRhLm5vZGVzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5pZDsKICAgICAgICAgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gIVtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoc2VydmljZXMpLCBfdG9Db25zdW1hYmxlQXJyYXkoaWRzKSwgX3RvQ29uc3VtYWJsZUFycmF5KHBvZHMpLCBfdG9Db25zdW1hYmxlQXJyYXkoc2VydmljZUlkcykpLmluY2x1ZGVzKGQpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKG5vZGVJZHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX25vZGVzMyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocmVzLm5vZGVzKSwgX3RvQ29uc3VtYWJsZUFycmF5KGpzb24ubm9kZXMpLCBfdG9Db25zdW1hYmxlQXJyYXkodG9wby5ub2RlcyksIF90b0NvbnN1bWFibGVBcnJheShkYXRhLm5vZGVzKSk7CiAgICAgICAgICAgICAgICBfY2FsbHMzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShyZXMuY2FsbHMpLCBfdG9Db25zdW1hYmxlQXJyYXkoanNvbi5jYWxscyksIF90b0NvbnN1bWFibGVBcnJheSh0b3BvLmNhbGxzKSwgX3RvQ29uc3VtYWJsZUFycmF5KGRhdGEuY2FsbHMpKTsKCiAgICAgICAgICAgICAgICBfdGhpcy5zZXRUb3BvbG9neSh7CiAgICAgICAgICAgICAgICAgIG5vZGVzOiBfbm9kZXMzLAogICAgICAgICAgICAgICAgICBjYWxsczogX2NhbGxzMwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzg6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDA7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZ2V0U2VydmljZXNUb3BvbG9neShub2RlSWRzKTsKCiAgICAgICAgICAgICAgY2FzZSA0MDoKICAgICAgICAgICAgICAgIHRvcG9zT2JqID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF9ub2RlczIgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHJlcy5ub2RlcyksIF90b0NvbnN1bWFibGVBcnJheShqc29uLm5vZGVzKSwgX3RvQ29uc3VtYWJsZUFycmF5KHRvcG8ubm9kZXMpLCBfdG9Db25zdW1hYmxlQXJyYXkoZGF0YS5ub2RlcyksIF90b0NvbnN1bWFibGVBcnJheSh0b3Bvc09iai5ub2RlcykpOwogICAgICAgICAgICAgICAgX2NhbGxzMiA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocmVzLmNhbGxzKSwgX3RvQ29uc3VtYWJsZUFycmF5KGpzb24uY2FsbHMpLCBfdG9Db25zdW1hYmxlQXJyYXkodG9wby5jYWxscyksIF90b0NvbnN1bWFibGVBcnJheShkYXRhLmNhbGxzKSwgX3RvQ29uc3VtYWJsZUFycmF5KHRvcG9zT2JqLmNhbGxzKSk7CgogICAgICAgICAgICAgICAgX3RoaXMuc2V0VG9wb2xvZ3koewogICAgICAgICAgICAgICAgICBub2RlczogX25vZGVzMiwKICAgICAgICAgICAgICAgICAgY2FsbHM6IF9jYWxsczIKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDQ2OgogICAgICAgICAgICAgICAgX25vZGVzNCA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocmVzLm5vZGVzKSwgX3RvQ29uc3VtYWJsZUFycmF5KGpzb24ubm9kZXMpLCBfdG9Db25zdW1hYmxlQXJyYXkodG9wby5ub2RlcyksIF90b0NvbnN1bWFibGVBcnJheShkYXRhLm5vZGVzKSk7CiAgICAgICAgICAgICAgICBfY2FsbHM0ID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShyZXMuY2FsbHMpLCBfdG9Db25zdW1hYmxlQXJyYXkoanNvbi5jYWxscyksIF90b0NvbnN1bWFibGVBcnJheSh0b3BvLmNhbGxzKSwgX3RvQ29uc3VtYWJsZUFycmF5KGRhdGEuY2FsbHMpKTsKCiAgICAgICAgICAgICAgICBfdGhpcy5zZXRUb3BvbG9neSh7CiAgICAgICAgICAgICAgICAgIG5vZGVzOiBfbm9kZXM0LAogICAgICAgICAgICAgICAgICBjYWxsczogX2NhbGxzNAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDk6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTQ7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA1MToKICAgICAgICAgICAgICAgIF9ub2RlczUgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHJlcy5ub2RlcyksIF90b0NvbnN1bWFibGVBcnJheShqc29uLm5vZGVzKSwgX3RvQ29uc3VtYWJsZUFycmF5KHRvcG8ubm9kZXMpKTsKICAgICAgICAgICAgICAgIF9jYWxsczUgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHJlcy5jYWxscyksIF90b0NvbnN1bWFibGVBcnJheShqc29uLmNhbGxzKSwgX3RvQ29uc3VtYWJsZUFycmF5KHRvcG8uY2FsbHMpKTsKCiAgICAgICAgICAgICAgICBfdGhpcy5zZXRUb3BvbG9neSh7CiAgICAgICAgICAgICAgICAgIG5vZGVzOiBfbm9kZXM1LAogICAgICAgICAgICAgICAgICBjYWxsczogX2NhbGxzNQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNTQ6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTc7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA1NjoKICAgICAgICAgICAgICAgIF90aGlzLnNldFRvcG9sb2d5KHsKICAgICAgICAgICAgICAgICAgbm9kZXM6IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocmVzLm5vZGVzKSwgX3RvQ29uc3VtYWJsZUFycmF5KGpzb24ubm9kZXMpKSwKICAgICAgICAgICAgICAgICAgY2FsbHM6IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocmVzLmNhbGxzKSwgX3RvQ29uc3VtYWJsZUFycmF5KGpzb24uY2FsbHMpKQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNTc6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjA7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA1OToKICAgICAgICAgICAgICAgIF90aGlzLnNldFRvcG9sb2d5KHJlcyk7CgogICAgICAgICAgICAgIGNhc2UgNjA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZ2V0U2VydmljZXNUb3BvbG9neTogZnVuY3Rpb24gZ2V0U2VydmljZXNUb3BvbG9neShzZXJ2aWNlSWRzKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBkdXJhdGlvbiwgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IHVzZUFwcFN0b3JlV2l0aE91dCgpLmR1cmF0aW9uVGltZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBncmFwaHFsLnF1ZXJ5KCJnZXRTZXJ2aWNlc1RvcG9sb2d5IikucGFyYW1zKHsKICAgICAgICAgICAgICAgICAgc2VydmljZUlkczogc2VydmljZUlkcywKICAgICAgICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCFyZXMuZGF0YS5lcnJvcnMpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgcmVzLmRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgcmVzLmRhdGEuZGF0YS50b3BvbG9neSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldEluc3RhbmNlVG9wb2xvZ3k6IGZ1bmN0aW9uIGdldEluc3RhbmNlVG9wb2xvZ3koKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIHNlcnZlclNlcnZpY2VJZCwgY2xpZW50U2VydmljZUlkLCBkdXJhdGlvbiwgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBzZXJ2ZXJTZXJ2aWNlSWQgPSB1c2VTZWxlY3RvclN0b3JlKCkuY3VycmVudFNlcnZpY2UuaWQ7CiAgICAgICAgICAgICAgICBjbGllbnRTZXJ2aWNlSWQgPSB1c2VTZWxlY3RvclN0b3JlKCkuY3VycmVudERlc3RTZXJ2aWNlLmlkOwogICAgICAgICAgICAgICAgZHVyYXRpb24gPSB1c2VBcHBTdG9yZVdpdGhPdXQoKS5kdXJhdGlvblRpbWU7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gZ3JhcGhxbC5xdWVyeSgiZ2V0SW5zdGFuY2VUb3BvbG9neSIpLnBhcmFtcyh7CiAgICAgICAgICAgICAgICAgIGNsaWVudFNlcnZpY2VJZDogY2xpZW50U2VydmljZUlkLAogICAgICAgICAgICAgICAgICBzZXJ2ZXJTZXJ2aWNlSWQ6IHNlcnZlclNlcnZpY2VJZCwKICAgICAgICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCFyZXMuZGF0YS5lcnJvcnMpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyLnNldEluc3RhbmNlVG9wb2xvZ3kocmVzLmRhdGEuZGF0YS50b3BvbG9neSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIHJlcy5kYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgdXBkYXRlRW5kcG9pbnRUb3BvbG9neTogZnVuY3Rpb24gdXBkYXRlRW5kcG9pbnRUb3BvbG9neShlbmRwb2ludElkcywgZGVwdGgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgcmVzLCBpZHMsIGpzb24sIHBvZHMsIG5vZGVzLCBjYWxscywgdG9wbywgZW5kcG9pbnRzLCBfbm9kZXM2LCBfY2FsbHM2LCBkYXRhLCBub2RlSWRzLCBfbm9kZXM4LCBfY2FsbHM4LCB0b3Bvc09iaiwgX25vZGVzNywgX2NhbGxzNywgX25vZGVzOSwgX2NhbGxzOSwgX25vZGVzMTAsIF9jYWxsczEwOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5nZXRFbmRwb2ludFRvcG9sb2d5KGVuZHBvaW50SWRzKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCEoZGVwdGggPiAxKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDU5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZHMgPSByZXMubm9kZXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmlkOwogICAgICAgICAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiAhZW5kcG9pbnRJZHMuaW5jbHVkZXMoZCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoaWRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzMy5zZXRUb3BvbG9neShyZXMpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuZ2V0RW5kcG9pbnRUb3BvbG9neShpZHMpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAganNvbiA9IF9jb250ZXh0NC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghKGRlcHRoID4gMikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA1NjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcG9kcyA9IGpzb24ubm9kZXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmlkOwogICAgICAgICAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiAhW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShpZHMpLCBfdG9Db25zdW1hYmxlQXJyYXkoZW5kcG9pbnRJZHMpKS5pbmNsdWRlcyhkKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmIChwb2RzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBub2RlcyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocmVzLm5vZGVzKSwgX3RvQ29uc3VtYWJsZUFycmF5KGpzb24ubm9kZXMpKTsKICAgICAgICAgICAgICAgIGNhbGxzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShyZXMuY2FsbHMpLCBfdG9Db25zdW1hYmxlQXJyYXkoanNvbi5jYWxscykpOwoKICAgICAgICAgICAgICAgIF90aGlzMy5zZXRUb3BvbG9neSh7CiAgICAgICAgICAgICAgICAgIG5vZGVzOiBub2RlcywKICAgICAgICAgICAgICAgICAgY2FsbHM6IGNhbGxzCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5nZXRFbmRwb2ludFRvcG9sb2d5KHBvZHMpOwoKICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgICAgdG9wbyA9IF9jb250ZXh0NC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghKGRlcHRoID4gMykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA1MTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZW5kcG9pbnRzID0gdG9wby5ub2Rlcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uaWQ7CiAgICAgICAgICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuICFbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGlkcyksIF90b0NvbnN1bWFibGVBcnJheShwb2RzKSwgX3RvQ29uc3VtYWJsZUFycmF5KGVuZHBvaW50SWRzKSkuaW5jbHVkZXMoZCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoZW5kcG9pbnRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfbm9kZXM2ID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShyZXMubm9kZXMpLCBfdG9Db25zdW1hYmxlQXJyYXkoanNvbi5ub2RlcyksIF90b0NvbnN1bWFibGVBcnJheSh0b3BvLm5vZGVzKSk7CiAgICAgICAgICAgICAgICBfY2FsbHM2ID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShyZXMuY2FsbHMpLCBfdG9Db25zdW1hYmxlQXJyYXkoanNvbi5jYWxscyksIF90b0NvbnN1bWFibGVBcnJheSh0b3BvLmNhbGxzKSk7CgogICAgICAgICAgICAgICAgX3RoaXMzLnNldFRvcG9sb2d5KHsKICAgICAgICAgICAgICAgICAgbm9kZXM6IF9ub2RlczYsCiAgICAgICAgICAgICAgICAgIGNhbGxzOiBfY2FsbHM2CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMjg6CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDMwOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5nZXRFbmRwb2ludFRvcG9sb2d5KGVuZHBvaW50cyk7CgogICAgICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQ0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCEoZGVwdGggPiA0KSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBub2RlSWRzID0gZGF0YS5ub2Rlcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uaWQ7CiAgICAgICAgICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuICFbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGVuZHBvaW50cyksIF90b0NvbnN1bWFibGVBcnJheShpZHMpLCBfdG9Db25zdW1hYmxlQXJyYXkocG9kcyksIF90b0NvbnN1bWFibGVBcnJheShlbmRwb2ludElkcykpLmluY2x1ZGVzKGQpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKG5vZGVJZHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9ub2RlczggPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHJlcy5ub2RlcyksIF90b0NvbnN1bWFibGVBcnJheShqc29uLm5vZGVzKSwgX3RvQ29uc3VtYWJsZUFycmF5KHRvcG8ubm9kZXMpLCBfdG9Db25zdW1hYmxlQXJyYXkoZGF0YS5ub2RlcykpOwogICAgICAgICAgICAgICAgX2NhbGxzOCA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocmVzLmNhbGxzKSwgX3RvQ29uc3VtYWJsZUFycmF5KGpzb24uY2FsbHMpLCBfdG9Db25zdW1hYmxlQXJyYXkodG9wby5jYWxscyksIF90b0NvbnN1bWFibGVBcnJheShkYXRhLmNhbGxzKSk7CgogICAgICAgICAgICAgICAgX3RoaXMzLnNldFRvcG9sb2d5KHsKICAgICAgICAgICAgICAgICAgbm9kZXM6IF9ub2RlczgsCiAgICAgICAgICAgICAgICAgIGNhbGxzOiBfY2FsbHM4CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzg6CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQwOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5nZXRFbmRwb2ludFRvcG9sb2d5KG5vZGVJZHMpOwoKICAgICAgICAgICAgICBjYXNlIDQwOgogICAgICAgICAgICAgICAgdG9wb3NPYmogPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgIF9ub2RlczcgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHJlcy5ub2RlcyksIF90b0NvbnN1bWFibGVBcnJheShqc29uLm5vZGVzKSwgX3RvQ29uc3VtYWJsZUFycmF5KHRvcG8ubm9kZXMpLCBfdG9Db25zdW1hYmxlQXJyYXkoZGF0YS5ub2RlcyksIF90b0NvbnN1bWFibGVBcnJheSh0b3Bvc09iai5ub2RlcykpOwogICAgICAgICAgICAgICAgX2NhbGxzNyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocmVzLmNhbGxzKSwgX3RvQ29uc3VtYWJsZUFycmF5KGpzb24uY2FsbHMpLCBfdG9Db25zdW1hYmxlQXJyYXkodG9wby5jYWxscyksIF90b0NvbnN1bWFibGVBcnJheShkYXRhLmNhbGxzKSwgX3RvQ29uc3VtYWJsZUFycmF5KHRvcG9zT2JqLmNhbGxzKSk7CgogICAgICAgICAgICAgICAgX3RoaXMzLnNldFRvcG9sb2d5KHsKICAgICAgICAgICAgICAgICAgbm9kZXM6IF9ub2RlczcsCiAgICAgICAgICAgICAgICAgIGNhbGxzOiBfY2FsbHM3CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ5OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNDY6CiAgICAgICAgICAgICAgICBfbm9kZXM5ID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShyZXMubm9kZXMpLCBfdG9Db25zdW1hYmxlQXJyYXkoanNvbi5ub2RlcyksIF90b0NvbnN1bWFibGVBcnJheSh0b3BvLm5vZGVzKSwgX3RvQ29uc3VtYWJsZUFycmF5KGRhdGEubm9kZXMpKTsKICAgICAgICAgICAgICAgIF9jYWxsczkgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHJlcy5jYWxscyksIF90b0NvbnN1bWFibGVBcnJheShqc29uLmNhbGxzKSwgX3RvQ29uc3VtYWJsZUFycmF5KHRvcG8uY2FsbHMpLCBfdG9Db25zdW1hYmxlQXJyYXkoZGF0YS5jYWxscykpOwoKICAgICAgICAgICAgICAgIF90aGlzMy5zZXRUb3BvbG9neSh7CiAgICAgICAgICAgICAgICAgIG5vZGVzOiBfbm9kZXM5LAogICAgICAgICAgICAgICAgICBjYWxsczogX2NhbGxzOQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDk6CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDU0OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNTE6CiAgICAgICAgICAgICAgICBfbm9kZXMxMCA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocmVzLm5vZGVzKSwgX3RvQ29uc3VtYWJsZUFycmF5KGpzb24ubm9kZXMpLCBfdG9Db25zdW1hYmxlQXJyYXkodG9wby5ub2RlcykpOwogICAgICAgICAgICAgICAgX2NhbGxzMTAgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHJlcy5jYWxscyksIF90b0NvbnN1bWFibGVBcnJheShqc29uLmNhbGxzKSwgX3RvQ29uc3VtYWJsZUFycmF5KHRvcG8uY2FsbHMpKTsKCiAgICAgICAgICAgICAgICBfdGhpczMuc2V0VG9wb2xvZ3koewogICAgICAgICAgICAgICAgICBub2RlczogX25vZGVzMTAsCiAgICAgICAgICAgICAgICAgIGNhbGxzOiBfY2FsbHMxMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNTQ6CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDU3OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNTY6CiAgICAgICAgICAgICAgICBfdGhpczMuc2V0VG9wb2xvZ3koewogICAgICAgICAgICAgICAgICBub2RlczogW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShyZXMubm9kZXMpLCBfdG9Db25zdW1hYmxlQXJyYXkoanNvbi5ub2RlcykpLAogICAgICAgICAgICAgICAgICBjYWxsczogW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShyZXMuY2FsbHMpLCBfdG9Db25zdW1hYmxlQXJyYXkoanNvbi5jYWxscykpCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1NzoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNjA7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA1OToKICAgICAgICAgICAgICAgIF90aGlzMy5zZXRUb3BvbG9neShyZXMpOwoKICAgICAgICAgICAgICBjYXNlIDYwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZ2V0RW5kcG9pbnRUb3BvbG9neTogZnVuY3Rpb24gZ2V0RW5kcG9pbnRUb3BvbG9neShlbmRwb2ludElkcykgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgZHVyYXRpb24sIHZhcmlhYmxlcywgZnJhZ21lbnQsIHF1ZXJ5U3RyLCBjb25kaXRpb25zLCByZXMsIHRvcG8sIGNhbGxzLCBub2RlcywgX2ksIF9PYmplY3Qka2V5cywga2V5OwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZHVyYXRpb24gPSB1c2VBcHBTdG9yZVdpdGhPdXQoKS5kdXJhdGlvblRpbWU7CiAgICAgICAgICAgICAgICB2YXJpYWJsZXMgPSBbIiRkdXJhdGlvbjogRHVyYXRpb24hIl07CiAgICAgICAgICAgICAgICBmcmFnbWVudCA9IGVuZHBvaW50SWRzLm1hcChmdW5jdGlvbiAoaWQsIGluZGV4KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiAiZW5kcG9pbnRUb3BvbG9neSIuY29uY2F0KGluZGV4LCAiOiBnZXRFbmRwb2ludERlcGVuZGVuY2llcyhlbmRwb2ludElkOiBcIiIpLmNvbmNhdChpZCwgIlwiLCBkdXJhdGlvbjogJGR1cmF0aW9uKSB7XG4gICAgICAgICAgbm9kZXMge1xuICAgICAgICAgICAgaWRcbiAgICAgICAgICAgIG5hbWVcbiAgICAgICAgICAgIHNlcnZpY2VJZFxuICAgICAgICAgICAgc2VydmljZU5hbWVcbiAgICAgICAgICAgIHR5cGVcbiAgICAgICAgICAgIGlzUmVhbFxuICAgICAgICAgIH1cbiAgICAgICAgICBjYWxscyB7XG4gICAgICAgICAgICBpZFxuICAgICAgICAgICAgc291cmNlXG4gICAgICAgICAgICB0YXJnZXRcbiAgICAgICAgICAgIGRldGVjdFBvaW50c1xuICAgICAgICAgIH1cbiAgICAgICAgfSIpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBxdWVyeVN0ciA9ICJxdWVyeSBxdWVyeURhdGEoIi5jb25jYXQodmFyaWFibGVzLCAiKSB7IikuY29uY2F0KGZyYWdtZW50LCAifSIpOwogICAgICAgICAgICAgICAgY29uZGl0aW9ucyA9IHsKICAgICAgICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5KHsKICAgICAgICAgICAgICAgICAgcXVlcnlTdHI6IHF1ZXJ5U3RyLAogICAgICAgICAgICAgICAgICBjb25kaXRpb25zOiBjb25kaXRpb25zCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ1LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCFyZXMuZGF0YS5lcnJvcnMpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIHJlcy5kYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIHRvcG8gPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgY2FsbHMgPSBbXTsKICAgICAgICAgICAgICAgIG5vZGVzID0gW107CgogICAgICAgICAgICAgICAgZm9yIChfaSA9IDAsIF9PYmplY3Qka2V5cyA9IE9iamVjdC5rZXlzKHRvcG8pOyBfaSA8IF9PYmplY3Qka2V5cy5sZW5ndGg7IF9pKyspIHsKICAgICAgICAgICAgICAgICAga2V5ID0gX09iamVjdCRrZXlzW19pXTsKICAgICAgICAgICAgICAgICAgY2FsbHMucHVzaC5hcHBseShjYWxscywgX3RvQ29uc3VtYWJsZUFycmF5KHRvcG9ba2V5XS5jYWxscykpOwogICAgICAgICAgICAgICAgICBub2Rlcy5wdXNoLmFwcGx5KG5vZGVzLCBfdG9Db25zdW1hYmxlQXJyYXkodG9wb1trZXldLm5vZGVzKSk7CiAgICAgICAgICAgICAgICB9IC8vIHRoaXMuc2V0VG9wb2xvZ3koeyBjYWxscywgbm9kZXMgfSk7CgoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgICAgIGNhbGxzOiBjYWxscywKICAgICAgICAgICAgICAgICAgbm9kZXM6IG5vZGVzCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldE5vZGVNZXRyaWNWYWx1ZTogZnVuY3Rpb24gZ2V0Tm9kZU1ldHJpY1ZhbHVlKHBhcmFtKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5KHBhcmFtKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ2LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCFyZXMuZGF0YS5lcnJvcnMpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIiwgcmVzLmRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBfdGhpczQuc2V0Tm9kZU1ldHJpY1ZhbHVlKHJlcy5kYXRhLmRhdGEpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCByZXMuZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldExpbmtDbGllbnRNZXRyaWNzOiBmdW5jdGlvbiBnZXRMaW5rQ2xpZW50TWV0cmljcyhsaW5rQ2xpZW50TWV0cmljcykgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KCkgewogICAgICAgIHZhciBpZHNDLCBwYXJhbSwgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAobGlua0NsaWVudE1ldHJpY3MubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXM1LnNldExpbmtDbGllbnRNZXRyaWNzKHt9KTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGlkc0MgPSBfdGhpczUuY2FsbHMuZmlsdGVyKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBpLmRldGVjdFBvaW50cy5pbmNsdWRlcygiQ0xJRU5UIik7CiAgICAgICAgICAgICAgICB9KS5tYXAoZnVuY3Rpb24gKGIpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGIuaWQ7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoaWRzQy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiB1c2VRdWVyeVRvcG9sb2d5TWV0cmljcyhsaW5rQ2xpZW50TWV0cmljcywgaWRzQyk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIHBhcmFtID0gX2NvbnRleHQ3LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDExOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNS5nZXRDYWxsQ2xpZW50TWV0cmljcyhwYXJhbSk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDcuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzLmVycm9ycykgewogICAgICAgICAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IocmVzLmVycm9ycyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTcpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRMaW5rU2VydmVyTWV0cmljczogZnVuY3Rpb24gZ2V0TGlua1NlcnZlck1ldHJpY3MobGlua1NlcnZlck1ldHJpY3MpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOCgpIHsKICAgICAgICB2YXIgaWRzUywgcGFyYW0sIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKGxpbmtTZXJ2ZXJNZXRyaWNzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzNi5zZXRMaW5rU2VydmVyTWV0cmljcyh7fSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBpZHNTID0gX3RoaXM2LmNhbGxzLmZpbHRlcihmdW5jdGlvbiAoaSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gaS5kZXRlY3RQb2ludHMuaW5jbHVkZXMoIlNFUlZFUiIpOwogICAgICAgICAgICAgICAgfSkubWFwKGZ1bmN0aW9uIChiKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBiLmlkOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKGlkc1MubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDg7CiAgICAgICAgICAgICAgICByZXR1cm4gdXNlUXVlcnlUb3BvbG9neU1ldHJpY3MobGlua1NlcnZlck1ldHJpY3MsIGlkc1MpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBwYXJhbSA9IF9jb250ZXh0OC5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczYuZ2V0Q2FsbFNlcnZlck1ldHJpY3MocGFyYW0pOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ4LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlcy5lcnJvcnMpIHsKICAgICAgICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKHJlcy5lcnJvcnMpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU4KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgcXVlcnlOb2RlTWV0cmljczogZnVuY3Rpb24gcXVlcnlOb2RlTWV0cmljcyhub2RlTWV0cmljcykgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU5KCkgewogICAgICAgIHZhciBpZHMsIHBhcmFtLCByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmIChub2RlTWV0cmljcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczcuc2V0Tm9kZU1ldHJpY1ZhbHVlKHt9KTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGlkcyA9IF90aGlzNy5ub2Rlcy5tYXAoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuaWQ7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoaWRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIHVzZVF1ZXJ5VG9wb2xvZ3lNZXRyaWNzKG5vZGVNZXRyaWNzLCBpZHMpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBwYXJhbSA9IF9jb250ZXh0OS5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczcuZ2V0Tm9kZU1ldHJpY1ZhbHVlKHBhcmFtKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0OS5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXMuZXJyb3JzKSB7CiAgICAgICAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcihyZXMuZXJyb3JzKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldExlZ2VuZE1ldHJpY3M6IGZ1bmN0aW9uIGdldExlZ2VuZE1ldHJpY3MocGFyYW0pIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAoKSB7CiAgICAgICAgdmFyIHJlcywgZGF0YSwgbWV0cmljczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEwJChfY29udGV4dDEwKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gcXVlcnkocGFyYW0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDEwLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCFyZXMuZGF0YS5lcnJvcnMpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJyZXR1cm4iLCByZXMuZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGRhdGEgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgbWV0cmljcyA9IE9iamVjdC5rZXlzKGRhdGEpOwogICAgICAgICAgICAgICAgX3RoaXM4Lm5vZGVzID0gX3RoaXM4Lm5vZGVzLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yNCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG1ldHJpY3MpLAogICAgICAgICAgICAgICAgICAgICAgX3N0ZXA0OwoKICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjQucygpOyAhKF9zdGVwNCA9IF9pdGVyYXRvcjQubigpKS5kb25lOykgewogICAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSBfc3RlcDQudmFsdWU7CgogICAgICAgICAgICAgICAgICAgICAgdmFyIF9pdGVyYXRvcjUgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihkYXRhW21dLnZhbHVlcyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgX3N0ZXA1OwoKICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yNS5zKCk7ICEoX3N0ZXA1ID0gX2l0ZXJhdG9yNS5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9IF9zdGVwNS52YWx1ZTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQuaWQgPT09IHZhbC5pZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZFttXSA9IHZhbC52YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3I1LmUoZXJyKTsKICAgICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjUuZigpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yNC5lKGVycik7CiAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yNC5mKCk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHJldHVybiBkOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5hYnJ1cHQoInJldHVybiIsIHJlcy5kYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTApOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRDYWxsU2VydmVyTWV0cmljczogZnVuY3Rpb24gZ2V0Q2FsbFNlcnZlck1ldHJpY3MocGFyYW0pIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTEoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTExJChfY29udGV4dDExKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gcXVlcnkocGFyYW0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDExLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCFyZXMuZGF0YS5lcnJvcnMpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuYWJydXB0KCJyZXR1cm4iLCByZXMuZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF90aGlzOS5zZXRMaW5rU2VydmVyTWV0cmljcyhyZXMuZGF0YS5kYXRhKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5hYnJ1cHQoInJldHVybiIsIHJlcy5kYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTEpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRDYWxsQ2xpZW50TWV0cmljczogZnVuY3Rpb24gZ2V0Q2FsbENsaWVudE1ldHJpY3MocGFyYW0pIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEyKCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMiQoX2NvbnRleHQxMikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5KHBhcmFtKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQxMi5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghcmVzLmRhdGEuZXJyb3JzKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLmFicnVwdCgicmV0dXJuIiwgcmVzLmRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBfdGhpczEwLnNldExpbmtDbGllbnRNZXRyaWNzKHJlcy5kYXRhLmRhdGEpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLmFicnVwdCgicmV0dXJuIiwgcmVzLmRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMik7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfSk7CmV4cG9ydCBmdW5jdGlvbiB1c2VUb3BvbG9neVN0b3JlKCkgewogIHJldHVybiB0b3BvbG9neVN0b3JlKHN0b3JlKTsKfQ=="},null]}