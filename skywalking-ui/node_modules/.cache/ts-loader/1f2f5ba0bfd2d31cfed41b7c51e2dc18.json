{"remainingRequest":"/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/thread-loader/dist/cjs.js!/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/babel-loader/lib/index.js!/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/ts-loader/index.js??ref--15-3!/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/eslint-loader/index.js??ref--14-0!/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/src/store/modules/dashboard.ts","dependencies":[{"path":"/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/src/store/modules/dashboard.ts","mtime":1666468223632},{"path":"/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/babel.config.js","mtime":1666468223484},{"path":"/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/unplugin/dist/webpack/loaders/transform.js","mtime":1666468252648},{"path":"/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/cache-loader/dist/cjs.js","mtime":1666468229208},{"path":"/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/thread-loader/dist/cjs.js","mtime":1666468239564},{"path":"/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/babel-loader/lib/index.js","mtime":1666468229004},{"path":"/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/ts-loader/index.js","mtime":1666468239640},{"path":"/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/eslint-loader/index.js","mtime":1666468235000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3NrMTE3L2ZpbmFsLXByb2plY3QvY29weS9hcGFjaGUtc2t5d2Fsa2luZy1hcG0tOS4yLjAvc2t5d2Fsa2luZy11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciBmcm9tICIvaG9tZS9zazExNy9maW5hbC1wcm9qZWN0L2NvcHkvYXBhY2hlLXNreXdhbGtpbmctYXBtLTkuMi4wL3NreXdhbGtpbmctdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIuanMiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvaG9tZS9zazExNy9maW5hbC1wcm9qZWN0L2NvcHkvYXBhY2hlLXNreXdhbGtpbmctYXBtLTkuMi4wL3NreXdhbGtpbmctdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIi9ob21lL3NrMTE3L2ZpbmFsLXByb2plY3QvY29weS9hcGFjaGUtc2t5d2Fsa2luZy1hcG0tOS4yLjAvc2t5d2Fsa2luZy11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKCi8qKgogKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lIG9yIG1vcmUKICogY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZSBkaXN0cmlidXRlZCB3aXRoCiAqIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4KICogVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8gWW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAKICogKHRoZSAiTGljZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGgKICogdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCmltcG9ydCB7IGRlZmluZVN0b3JlIH0gZnJvbSAicGluaWEiOwppbXBvcnQgeyBzdG9yZSB9IGZyb20gIkAvc3RvcmUiOwppbXBvcnQgZ3JhcGhxbCBmcm9tICJAL2dyYXBocWwiOwppbXBvcnQgcXVlcnkgZnJvbSAiQC9ncmFwaHFsL2ZldGNoIjsKaW1wb3J0IHsgdXNlU2VsZWN0b3JTdG9yZSB9IGZyb20gIkAvc3RvcmUvbW9kdWxlcy9zZWxlY3RvcnMiOwppbXBvcnQgeyBOZXdDb250cm9sLCBUZXh0Q29uZmlnLCBUaW1lUmFuZ2VDb25maWcgfSBmcm9tICIuLi9kYXRhIjsKaW1wb3J0IHsgRWxNZXNzYWdlIH0gZnJvbSAiZWxlbWVudC1wbHVzIjsKaW1wb3J0IHsgdXNlSTE4biB9IGZyb20gInZ1ZS1pMThuIjsKaW1wb3J0IHsgRW50aXR5VHlwZSB9IGZyb20gIkAvdmlld3MvZGFzaGJvYXJkL2RhdGEiOwpleHBvcnQgdmFyIGRhc2hib2FyZFN0b3JlID0gZGVmaW5lU3RvcmUoewogIGlkOiAiZGFzaGJvYXJkIiwKICBzdGF0ZTogZnVuY3Rpb24gc3RhdGUoKSB7CiAgICByZXR1cm4gewogICAgICBsYXlvdXQ6IFtdLAogICAgICBzaG93Q29uZmlnOiBmYWxzZSwKICAgICAgc2VsZWN0ZWRHcmlkOiBudWxsLAogICAgICBlbnRpdHk6ICIiLAogICAgICBsYXllcklkOiAiIiwKICAgICAgYWN0aXZlZEdyaWRJdGVtOiAiIiwKICAgICAgc2VsZWN0b3JTdG9yZTogdXNlU2VsZWN0b3JTdG9yZSgpLAogICAgICBzaG93VG9wb2xvZ3k6IGZhbHNlLAogICAgICBjdXJyZW50VGFiSXRlbXM6IFtdLAogICAgICBkYXNoYm9hcmRzOiBbXSwKICAgICAgY3VycmVudERhc2hib2FyZDogbnVsbCwKICAgICAgZWRpdE1vZGU6IGZhbHNlLAogICAgICBjdXJyZW50VGFiSW5kZXg6IDAKICAgIH07CiAgfSwKICBhY3Rpb25zOiB7CiAgICBzZXRMYXlvdXQ6IGZ1bmN0aW9uIHNldExheW91dChkYXRhKSB7CiAgICAgIHRoaXMubGF5b3V0ID0gZGF0YTsKICAgIH0sCiAgICBzZXRNb2RlOiBmdW5jdGlvbiBzZXRNb2RlKG1vZGUpIHsKICAgICAgdGhpcy5lZGl0TW9kZSA9IG1vZGU7CiAgICB9LAogICAgcmVzZXREYXNoYm9hcmRzOiBmdW5jdGlvbiByZXNldERhc2hib2FyZHMobGlzdCkgewogICAgICB0aGlzLmRhc2hib2FyZHMgPSBsaXN0OwogICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJkYXNoYm9hcmRzIiwgSlNPTi5zdHJpbmdpZnkobGlzdCkpOwogICAgfSwKICAgIHNldEN1cnJlbnREYXNoYm9hcmQ6IGZ1bmN0aW9uIHNldEN1cnJlbnREYXNoYm9hcmQoaXRlbSkgewogICAgICB0aGlzLmN1cnJlbnREYXNoYm9hcmQgPSBpdGVtOwogICAgfSwKICAgIGFkZENvbnRyb2w6IGZ1bmN0aW9uIGFkZENvbnRyb2wodHlwZSkgewogICAgICB2YXIgYXJyID0gdGhpcy5sYXlvdXQubWFwKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIE51bWJlcihkLmkpOwogICAgICB9KTsKICAgICAgdmFyIGluZGV4ID0gU3RyaW5nKE1hdGgubWF4LmFwcGx5KE1hdGgsIF90b0NvbnN1bWFibGVBcnJheShhcnIpKSArIDEpOwoKICAgICAgaWYgKCF0aGlzLmxheW91dC5sZW5ndGgpIHsKICAgICAgICBpbmRleCA9ICIwIjsKICAgICAgfQoKICAgICAgdmFyIG5ld0l0ZW0gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIE5ld0NvbnRyb2wpLCB7fSwgewogICAgICAgIGk6IGluZGV4LAogICAgICAgIGlkOiBpbmRleCwKICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgIG1ldHJpY1R5cGVzOiBbIiJdLAogICAgICAgIG1ldHJpY3M6IFsiIl0KICAgICAgfSk7CgogICAgICBpZiAodHlwZSA9PT0gIlRhYiIpIHsKICAgICAgICBuZXdJdGVtLmggPSAzNjsKICAgICAgICBuZXdJdGVtLmFjdGl2ZWRUYWJJbmRleCA9IDA7CiAgICAgICAgbmV3SXRlbS5jaGlsZHJlbiA9IFt7CiAgICAgICAgICBuYW1lOiAiVGFiMSIsCiAgICAgICAgICBjaGlsZHJlbjogW10KICAgICAgICB9LCB7CiAgICAgICAgICBuYW1lOiAiVGFiMiIsCiAgICAgICAgICBjaGlsZHJlbjogW10KICAgICAgICB9XTsKICAgICAgfQoKICAgICAgaWYgKHR5cGUgPT09ICJUb3BvbG9neSIpIHsKICAgICAgICBuZXdJdGVtLmggPSAzNjsKICAgICAgICBuZXdJdGVtLmdyYXBoID0gewogICAgICAgICAgc2hvd0RlcHRoOiB0cnVlLAogICAgICAgICAgZGVwdGg6IHRoaXMuZW50aXR5ID09PSBFbnRpdHlUeXBlWzFdLnZhbHVlID8gMSA6IHRoaXMuZW50aXR5ID09PSBFbnRpdHlUeXBlWzBdLnZhbHVlID8gMiA6IDMKICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAoWyJUcmFjZSIsICJQcm9maWxlIiwgIkxvZyIsICJEZW1hbmRMb2ciLCAiRWJwZiIsICJOZXR3b3JrUHJvZmlsaW5nIl0uaW5jbHVkZXModHlwZSkpIHsKICAgICAgICBuZXdJdGVtLmggPSAzNjsKICAgICAgfQoKICAgICAgaWYgKHR5cGUgPT09ICJUZXh0IikgewogICAgICAgIG5ld0l0ZW0uaCA9IDY7CiAgICAgICAgbmV3SXRlbS5ncmFwaCA9IFRleHRDb25maWc7CiAgICAgIH0KCiAgICAgIGlmICh0eXBlID09PSAiVGltZVJhbmdlIikgewogICAgICAgIG5ld0l0ZW0udyA9IDg7CiAgICAgICAgbmV3SXRlbS5oID0gNjsKICAgICAgICBuZXdJdGVtLmdyYXBoID0gVGltZVJhbmdlQ29uZmlnOwogICAgICB9CgogICAgICB0aGlzLmFjdGl2ZWRHcmlkSXRlbSA9IG5ld0l0ZW0uaTsKICAgICAgdGhpcy5zZWxlY3RlZEdyaWQgPSBuZXdJdGVtOwogICAgICB0aGlzLmxheW91dCA9IHRoaXMubGF5b3V0Lm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgIGQueSA9IGQueSArIG5ld0l0ZW0uaDsKICAgICAgICByZXR1cm4gZDsKICAgICAgfSk7CiAgICAgIHRoaXMubGF5b3V0LnB1c2gobmV3SXRlbSk7CiAgICB9LAogICAgYWRkVGFiSXRlbTogZnVuY3Rpb24gYWRkVGFiSXRlbShpdGVtKSB7CiAgICAgIHZhciBfdGhpcyRsYXlvdXQkaWR4JGNoaWwsIF90aGlzJGxheW91dCRpZHgkY2hpbDI7CgogICAgICB2YXIgaWR4ID0gdGhpcy5sYXlvdXQuZmluZEluZGV4KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGQuaSA9PT0gaXRlbS5pOwogICAgICB9KTsKCiAgICAgIGlmICghdGhpcy5sYXlvdXRbaWR4XS5jaGlsZHJlbikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGxlbiA9ICgoX3RoaXMkbGF5b3V0JGlkeCRjaGlsID0gdGhpcy5sYXlvdXRbaWR4XS5jaGlsZHJlbikgPT09IG51bGwgfHwgX3RoaXMkbGF5b3V0JGlkeCRjaGlsID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRsYXlvdXQkaWR4JGNoaWwubGVuZ3RoKSB8fCAwOwogICAgICB2YXIgaSA9IHsKICAgICAgICBuYW1lOiAiVGFiIiArIChsZW4gKyAxKSwKICAgICAgICBjaGlsZHJlbjogW10KICAgICAgfTsKICAgICAgKF90aGlzJGxheW91dCRpZHgkY2hpbDIgPSB0aGlzLmxheW91dFtpZHhdLmNoaWxkcmVuKSA9PT0gbnVsbCB8fCBfdGhpcyRsYXlvdXQkaWR4JGNoaWwyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRsYXlvdXQkaWR4JGNoaWwyLnB1c2goaSk7CiAgICB9LAogICAgYWRkVGFiQ29udHJvbHM6IGZ1bmN0aW9uIGFkZFRhYkNvbnRyb2xzKHR5cGUpIHsKICAgICAgdmFyIGFjdGl2ZWRHcmlkSXRlbSA9IHRoaXMuYWN0aXZlZEdyaWRJdGVtLnNwbGl0KCItIilbMF07CiAgICAgIHZhciBpZHggPSB0aGlzLmxheW91dC5maW5kSW5kZXgoZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gZC5pID09PSBhY3RpdmVkR3JpZEl0ZW07CiAgICAgIH0pOwoKICAgICAgaWYgKGlkeCA8IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciB0YWJJbmRleCA9IHRoaXMubGF5b3V0W2lkeF0uYWN0aXZlZFRhYkluZGV4IHx8IDA7CiAgICAgIHZhciBjaGlsZHJlbiA9IHRoaXMubGF5b3V0W2lkeF0uY2hpbGRyZW5bdGFiSW5kZXhdLmNoaWxkcmVuOwogICAgICB2YXIgYXJyID0gY2hpbGRyZW4ubWFwKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIE51bWJlcihkLmkpOwogICAgICB9KTsKICAgICAgdmFyIGluZGV4ID0gU3RyaW5nKE1hdGgubWF4LmFwcGx5KE1hdGgsIF90b0NvbnN1bWFibGVBcnJheShhcnIpKSArIDEpOwoKICAgICAgaWYgKCFjaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgICBpbmRleCA9ICIwIjsKICAgICAgfQoKICAgICAgdmFyIGlkID0gIiIuY29uY2F0KGFjdGl2ZWRHcmlkSXRlbSwgIi0iKS5jb25jYXQodGFiSW5kZXgsICItIikuY29uY2F0KGluZGV4KTsKCiAgICAgIHZhciBuZXdJdGVtID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBOZXdDb250cm9sKSwge30sIHsKICAgICAgICBpOiBpbmRleCwKICAgICAgICBpZDogaWQsCiAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICBtZXRyaWNUeXBlczogWyIiXSwKICAgICAgICBtZXRyaWNzOiBbIiJdCiAgICAgIH0pOwoKICAgICAgaWYgKHR5cGUgPT09ICJUb3BvbG9neSIpIHsKICAgICAgICBuZXdJdGVtLmggPSAzMjsKICAgICAgICBuZXdJdGVtLmdyYXBoID0gewogICAgICAgICAgc2hvd0RlcHRoOiB0cnVlCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgaWYgKFsiVHJhY2UiLCAiUHJvZmlsZSIsICJMb2ciLCAiRGVtYW5kTG9nIiwgIkVicGYiLCAiTmV0d29ya1Byb2ZpbGluZyJdLmluY2x1ZGVzKHR5cGUpKSB7CiAgICAgICAgbmV3SXRlbS5oID0gMzI7CiAgICAgIH0KCiAgICAgIGlmICh0eXBlID09PSAiVGV4dCIpIHsKICAgICAgICBuZXdJdGVtLmggPSA2OwogICAgICAgIG5ld0l0ZW0uZ3JhcGggPSBUZXh0Q29uZmlnOwogICAgICB9CgogICAgICBpZiAodHlwZSA9PT0gIlRpbWVSYW5nZSIpIHsKICAgICAgICBuZXdJdGVtLncgPSA4OwogICAgICAgIG5ld0l0ZW0uaCA9IDY7CiAgICAgICAgbmV3SXRlbS5ncmFwaCA9IFRleHRDb25maWc7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmxheW91dFtpZHhdLmNoaWxkcmVuKSB7CiAgICAgICAgdmFyIGl0ZW1zID0gY2hpbGRyZW4ubWFwKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICBkLnkgPSBkLnkgKyBuZXdJdGVtLmg7CiAgICAgICAgICByZXR1cm4gZDsKICAgICAgICB9KTsKICAgICAgICBpdGVtcy5wdXNoKG5ld0l0ZW0pOwogICAgICAgIHRoaXMubGF5b3V0W2lkeF0uY2hpbGRyZW5bdGFiSW5kZXhdLmNoaWxkcmVuID0gaXRlbXM7CiAgICAgICAgdGhpcy5jdXJyZW50VGFiSXRlbXMgPSBpdGVtczsKICAgICAgfQogICAgfSwKICAgIGFjdGl2ZUdyaWRJdGVtOiBmdW5jdGlvbiBhY3RpdmVHcmlkSXRlbShpbmRleCkgewogICAgICB0aGlzLmFjdGl2ZWRHcmlkSXRlbSA9IGluZGV4OwogICAgfSwKICAgIHNldEFjdGl2ZVRhYkluZGV4OiBmdW5jdGlvbiBzZXRBY3RpdmVUYWJJbmRleChpbmRleCwgdGFyZ2V0KSB7CiAgICAgIHRoaXMuY3VycmVudFRhYkluZGV4ID0gaW5kZXg7CiAgICAgIHZhciBtID0gdGFyZ2V0IHx8IHRoaXMuYWN0aXZlZEdyaWRJdGVtOwogICAgICB2YXIgaWR4ID0gdGhpcy5sYXlvdXQuZmluZEluZGV4KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGQuaSA9PT0gbTsKICAgICAgfSk7CgogICAgICBpZiAoaWR4IDwgMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5sYXlvdXRbaWR4XS5hY3RpdmVkVGFiSW5kZXggPSBpbmRleDsKICAgIH0sCiAgICBzZXRDdXJyZW50VGFiSXRlbXM6IGZ1bmN0aW9uIHNldEN1cnJlbnRUYWJJdGVtcyhpdGVtcykgewogICAgICB0aGlzLmN1cnJlbnRUYWJJdGVtcyA9IGl0ZW1zOwogICAgfSwKICAgIHJlbW92ZVRhYjogZnVuY3Rpb24gcmVtb3ZlVGFiKGl0ZW0pIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRHcmlkICYmIHRoaXMuc2VsZWN0ZWRHcmlkLmkgPT09IGl0ZW0uaSkgewogICAgICAgIHRoaXMuc2VsZWN0ZWRHcmlkID0gbnVsbDsKICAgICAgfQoKICAgICAgdGhpcy5sYXlvdXQgPSB0aGlzLmxheW91dC5maWx0ZXIoZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gZC5pICE9PSBpdGVtLmk7CiAgICAgIH0pOwogICAgfSwKICAgIHJlbW92ZUNvbnRyb2xzOiBmdW5jdGlvbiByZW1vdmVDb250cm9scyhpdGVtKSB7CiAgICAgIHZhciBhY3RpdmVkID0gdGhpcy5hY3RpdmVkR3JpZEl0ZW0uc3BsaXQoIi0iKTsKICAgICAgdmFyIGluZGV4ID0gdGhpcy5sYXlvdXQuZmluZEluZGV4KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGFjdGl2ZWRbMF0gPT09IGQuaTsKICAgICAgfSk7CgogICAgICBpZiAodGhpcy5zZWxlY3RlZEdyaWQgJiYgdGhpcy5zZWxlY3RlZEdyaWQuaSA9PT0gaXRlbS5pKSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZEdyaWQgPSBudWxsOwogICAgICB9CgogICAgICBpZiAoYWN0aXZlZC5sZW5ndGggPT09IDMpIHsKICAgICAgICB2YXIgdGFiSW5kZXggPSBOdW1iZXIoYWN0aXZlZFsxXSk7CiAgICAgICAgdGhpcy5jdXJyZW50VGFiSXRlbXMgPSB0aGlzLmN1cnJlbnRUYWJJdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgIHJldHVybiBhY3RpdmVkWzJdICE9PSBkLmk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5sYXlvdXRbaW5kZXhdLmNoaWxkcmVuW3RhYkluZGV4XS5jaGlsZHJlbiA9IHRoaXMuY3VycmVudFRhYkl0ZW1zOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5sYXlvdXQgPSB0aGlzLmxheW91dC5maWx0ZXIoZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gZC5pICE9PSBpdGVtLmk7CiAgICAgIH0pOwogICAgfSwKICAgIHJlbW92ZVRhYkl0ZW06IGZ1bmN0aW9uIHJlbW92ZVRhYkl0ZW0oaXRlbSwgaW5kZXgpIHsKICAgICAgdmFyIGlkeCA9IHRoaXMubGF5b3V0LmZpbmRJbmRleChmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBkLmkgPT09IGl0ZW0uaTsKICAgICAgfSk7CgogICAgICBpZiAodGhpcy5zZWxlY3RlZEdyaWQpIHsKICAgICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5sYXlvdXRbaWR4XS5jaGlsZHJlbltpbmRleF0uY2hpbGRyZW4pLAogICAgICAgICAgICBfc3RlcDsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBfaXRlbSA9IF9zdGVwLnZhbHVlOwoKICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRHcmlkLmkgPT09IF9pdGVtLmkpIHsKICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkR3JpZCA9IG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGhpcy5sYXlvdXRbaWR4XS5jaGlsZHJlbikgewogICAgICAgIHZhciBfdGhpcyRsYXlvdXQkaWR4JGNoaWwzOwoKICAgICAgICAoX3RoaXMkbGF5b3V0JGlkeCRjaGlsMyA9IHRoaXMubGF5b3V0W2lkeF0uY2hpbGRyZW4pID09PSBudWxsIHx8IF90aGlzJGxheW91dCRpZHgkY2hpbDMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGxheW91dCRpZHgkY2hpbDMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgfQogICAgfSwKICAgIHNldENvbmZpZ1BhbmVsOiBmdW5jdGlvbiBzZXRDb25maWdQYW5lbChzaG93KSB7CiAgICAgIHRoaXMuc2hvd0NvbmZpZyA9IHNob3c7CiAgICB9LAogICAgc2VsZWN0V2lkZ2V0OiBmdW5jdGlvbiBzZWxlY3RXaWRnZXQoaXRlbSkgewogICAgICB0aGlzLnNlbGVjdGVkR3JpZCA9IGl0ZW07CiAgICB9LAogICAgc2V0TGF5ZXI6IGZ1bmN0aW9uIHNldExheWVyKGlkKSB7CiAgICAgIHRoaXMubGF5ZXJJZCA9IGlkOwogICAgfSwKICAgIHNldEVudGl0eTogZnVuY3Rpb24gc2V0RW50aXR5KHR5cGUpIHsKICAgICAgdGhpcy5lbnRpdHkgPSB0eXBlOwogICAgfSwKICAgIHNldFRvcG9sb2d5OiBmdW5jdGlvbiBzZXRUb3BvbG9neShzaG93KSB7CiAgICAgIHRoaXMuc2hvd1RvcG9sb2d5ID0gc2hvdzsKICAgIH0sCiAgICBzZXRDb25maWdzOiBmdW5jdGlvbiBzZXRDb25maWdzKHBhcmFtKSB7CiAgICAgIHZhciBhY3RpdmVkID0gdGhpcy5hY3RpdmVkR3JpZEl0ZW0uc3BsaXQoIi0iKTsKICAgICAgdmFyIGluZGV4ID0gdGhpcy5sYXlvdXQuZmluZEluZGV4KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGFjdGl2ZWRbMF0gPT09IGQuaTsKICAgICAgfSk7CgogICAgICBpZiAoYWN0aXZlZC5sZW5ndGggPT09IDMpIHsKICAgICAgICB2YXIgdGFiSW5kZXggPSBOdW1iZXIoYWN0aXZlZFsxXSk7CiAgICAgICAgdmFyIGl0ZW1JbmRleCA9IHRoaXMubGF5b3V0W2luZGV4XS5jaGlsZHJlblt0YWJJbmRleF0uY2hpbGRyZW4uZmluZEluZGV4KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICByZXR1cm4gYWN0aXZlZFsyXSA9PT0gZC5pOwogICAgICAgIH0pOwogICAgICAgIHRoaXMubGF5b3V0W2luZGV4XS5jaGlsZHJlblt0YWJJbmRleF0uY2hpbGRyZW5baXRlbUluZGV4XSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGhpcy5sYXlvdXRbaW5kZXhdLmNoaWxkcmVuW3RhYkluZGV4XS5jaGlsZHJlbltpdGVtSW5kZXhdKSwgcGFyYW0pOwogICAgICAgIHRoaXMuc2VsZWN0ZWRHcmlkID0gdGhpcy5sYXlvdXRbaW5kZXhdLmNoaWxkcmVuW3RhYkluZGV4XS5jaGlsZHJlbltpdGVtSW5kZXhdOwogICAgICAgIHRoaXMuc2V0Q3VycmVudFRhYkl0ZW1zKHRoaXMubGF5b3V0W2luZGV4XS5jaGlsZHJlblt0YWJJbmRleF0uY2hpbGRyZW4pOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5sYXlvdXRbaW5kZXhdID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLmxheW91dFtpbmRleF0pLCBwYXJhbSk7CiAgICAgIHRoaXMuc2VsZWN0ZWRHcmlkID0gdGhpcy5sYXlvdXRbaW5kZXhdOwogICAgfSwKICAgIHNldFdpZGdldDogZnVuY3Rpb24gc2V0V2lkZ2V0KHBhcmFtKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sYXlvdXQubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAodGhpcy5sYXlvdXRbaV0udHlwZSA9PT0gIlRhYiIpIHsKICAgICAgICAgIGlmICh0aGlzLmxheW91dFtpXS5jaGlsZHJlbiAmJiB0aGlzLmxheW91dFtpXS5jaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLmxheW91dFtpXS5jaGlsZHJlbiksCiAgICAgICAgICAgICAgICBfc3RlcDI7CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBfc3RlcDIudmFsdWU7CgogICAgICAgICAgICAgICAgaWYgKGNoaWxkLmNoaWxkcmVuICYmIGNoaWxkLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gMDsgYyA8IGNoaWxkLmNoaWxkcmVuLmxlbmd0aDsgYysrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkLmNoaWxkcmVuW2NdLmlkID09PSBwYXJhbS5pZCkgewogICAgICAgICAgICAgICAgICAgICAgY2hpbGQuY2hpbGRyZW4uc3BsaWNlKGMsIDEsIHBhcmFtKTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmICh0aGlzLmxheW91dFtpXS5pZCA9PT0gcGFyYW0uaWQpIHsKICAgICAgICAgICAgdGhpcy5sYXlvdXQuc3BsaWNlKGksIDEsIHBhcmFtKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBmZXRjaE1ldHJpY1R5cGU6IGZ1bmN0aW9uIGZldGNoTWV0cmljVHlwZShpdGVtKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBncmFwaHFsLnF1ZXJ5KCJxdWVyeVR5cGVPZk1ldHJpY3MiKS5wYXJhbXMoewogICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlcy5kYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGZldGNoTWV0cmljTGlzdDogZnVuY3Rpb24gZmV0Y2hNZXRyaWNMaXN0KHJlZ2V4KSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBncmFwaHFsLnF1ZXJ5KCJxdWVyeU1ldHJpY3MiKS5wYXJhbXMoewogICAgICAgICAgICAgICAgICByZWdleDogcmVnZXgKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCByZXMuZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGZldGNoTWV0cmljVmFsdWU6IGZ1bmN0aW9uIGZldGNoTWV0cmljVmFsdWUocGFyYW0pIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5KHBhcmFtKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgcmVzLmRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBmZXRjaFRlbXBsYXRlczogZnVuY3Rpb24gZmV0Y2hUZW1wbGF0ZXMoKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHZhciByZXMsIGRhdGEsIGxpc3QsIF9pdGVyYXRvcjMsIF9zdGVwMywgdCwgYywga2V5OwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGdyYXBocWwucXVlcnkoImdldFRlbXBsYXRlcyIpLnBhcmFtcyh7fSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0NC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghcmVzLmRhdGEuZXJyb3JzKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIHJlcy5kYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgZGF0YSA9IHJlcy5kYXRhLmRhdGEuZ2V0QWxsVGVtcGxhdGVzOwogICAgICAgICAgICAgICAgbGlzdCA9IFtdOwogICAgICAgICAgICAgICAgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGRhdGEpOwoKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMy5zKCk7ICEoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICAgICAgdCA9IF9zdGVwMy52YWx1ZTsKICAgICAgICAgICAgICAgICAgICBjID0gSlNPTi5wYXJzZSh0LmNvbmZpZ3VyYXRpb24pOwogICAgICAgICAgICAgICAgICAgIGtleSA9IFtjLmxheWVyLCBjLmVudGl0eSwgYy5uYW1lXS5qb2luKCJfIik7CiAgICAgICAgICAgICAgICAgICAgbGlzdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgIGlkOiB0LmlkLAogICAgICAgICAgICAgICAgICAgICAgbGF5ZXI6IGMubGF5ZXIsCiAgICAgICAgICAgICAgICAgICAgICBlbnRpdHk6IGMuZW50aXR5LAogICAgICAgICAgICAgICAgICAgICAgbmFtZTogYy5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgaXNSb290OiBjLmlzUm9vdAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgICAgICBpZDogdC5pZCwKICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb246IGMKICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICBfaXRlcmF0b3IzLmUoZXJyKTsKICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjMuZigpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGxpc3QgPSBsaXN0LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgICAgICAgdmFyIG5hbWVBID0gYS5uYW1lLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgICAgICAgICAgIHZhciBuYW1lQiA9IGIubmFtZS50b1VwcGVyQ2FzZSgpOwoKICAgICAgICAgICAgICAgICAgaWYgKG5hbWVBIDwgbmFtZUIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGlmIChuYW1lQSA+IG5hbWVCKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJkYXNoYm9hcmRzIiwgSlNPTi5zdHJpbmdpZnkobGlzdCkpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIHJlcy5kYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNldERhc2hib2FyZHM6IGZ1bmN0aW9uIHNldERhc2hib2FyZHMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiZGFzaGJvYXJkcyIpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmZldGNoVGVtcGxhdGVzKCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0NS5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghcmVzLmVycm9ycykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzLmRhc2hib2FyZHMgPSBbXTsKICAgICAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcihyZXMuZXJyb3JzKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX3RoaXMuZGFzaGJvYXJkcyA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiZGFzaGJvYXJkcyIpIHx8ICJbXSIpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICByZXNldFRlbXBsYXRlczogZnVuY3Rpb24gcmVzZXRUZW1wbGF0ZXMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5mZXRjaFRlbXBsYXRlcygpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDYuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIXJlcy5lcnJvcnMpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczIuZGFzaGJvYXJkcyA9IFtdOwogICAgICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKHJlcy5lcnJvcnMpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfdGhpczIuZGFzaGJvYXJkcyA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiZGFzaGJvYXJkcyIpIHx8ICJbXSIpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICB1cGRhdGVEYXNoYm9hcmQ6IGZ1bmN0aW9uIHVwZGF0ZURhc2hib2FyZChzZXR0aW5nKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KCkgewogICAgICAgIHZhciByZXMsIGpzb247CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBncmFwaHFsLnF1ZXJ5KCJ1cGRhdGVUZW1wbGF0ZSIpLnBhcmFtcyh7CiAgICAgICAgICAgICAgICAgIHNldHRpbmc6IHNldHRpbmcKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDcuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIXJlcy5kYXRhLmVycm9ycykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcihyZXMuZGF0YS5lcnJvcnMpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoInJldHVybiIsIHJlcy5kYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAganNvbiA9IHJlcy5kYXRhLmRhdGEuY2hhbmdlVGVtcGxhdGU7CgogICAgICAgICAgICAgICAgaWYgKGpzb24uc3RhdHVzKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcihqc29uLm1lc3NhZ2UpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoInJldHVybiIsIHJlcy5kYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCJTYXZlZCBzdWNjZXNzZnVsbHkiKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KCJyZXR1cm4iLCByZXMuZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTcpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzYXZlRGFzaGJvYXJkOiBmdW5jdGlvbiBzYXZlRGFzaGJvYXJkKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KCkgewogICAgICAgIHZhciBjLCByZXMsIGpzb24sIGluZGV4LCBfdXNlSTE4biwgdCwga2V5LCBsOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKF90aGlzMy5jdXJyZW50RGFzaGJvYXJkLm5hbWUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoIlRoZSBkYXNoYm9hcmQgbmFtZSBpcyBuZWVkZWQuIik7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGMgPSBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IF90aGlzMy5sYXlvdXQKICAgICAgICAgICAgICAgIH0sIF90aGlzMy5jdXJyZW50RGFzaGJvYXJkKTsKCiAgICAgICAgICAgICAgICBpZiAoIV90aGlzMy5jdXJyZW50RGFzaGJvYXJkLmlkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMudXBkYXRlRGFzaGJvYXJkKHsKICAgICAgICAgICAgICAgICAgaWQ6IF90aGlzMy5jdXJyZW50RGFzaGJvYXJkLmlkLAogICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uOiBKU09OLnN0cmluZ2lmeShjKQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0OC5zZW50OwogICAgICAgICAgICAgICAganNvbiA9IHJlcy5kYXRhLmNoYW5nZVRlbXBsYXRlOwogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAyMTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgYy5pc1Jvb3QgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGluZGV4ID0gX3RoaXMzLmRhc2hib2FyZHMuZmluZEluZGV4KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBkLm5hbWUgPT09IF90aGlzMy5jdXJyZW50RGFzaGJvYXJkLm5hbWUgJiYgZC5lbnRpdHkgPT09IF90aGlzMy5jdXJyZW50RGFzaGJvYXJkLmVudGl0eSAmJiBkLmxheWVyID09PSBfdGhpczMuY3VycmVudERhc2hib2FyZC5sYXllcklkOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKCEoaW5kZXggPiAtMSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3VzZUkxOG4gPSB1c2VJMThuKCksIHQgPSBfdXNlSTE4bi50OwogICAgICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKHQoIm5hbWVFcnJvciIpKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICByZXR1cm4gZ3JhcGhxbC5xdWVyeSgiYWRkTmV3VGVtcGxhdGUiKS5wYXJhbXMoewogICAgICAgICAgICAgICAgICBzZXR0aW5nOiB7CiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbjogSlNPTi5zdHJpbmdpZnkoYykKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDguc2VudDsKICAgICAgICAgICAgICAgIGpzb24gPSByZXMuZGF0YS5kYXRhLmFkZFRlbXBsYXRlOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgaWYgKCEocmVzLmRhdGEuZXJyb3JzIHx8IHJlcy5lcnJvcnMpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMjQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcihyZXMuZGF0YS5lcnJvcnMpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIsIHJlcy5kYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICAgIGlmIChqc29uLnN0YXR1cykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDI3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoanNvbi5tZXNzYWdlKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguYWJydXB0KCJyZXR1cm4iLCBqc29uKTsKCiAgICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgICAgIGlmICghX3RoaXMzLmN1cnJlbnREYXNoYm9hcmQuaWQpIHsKICAgICAgICAgICAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoIlNhdmVkIHN1Y2Nlc3NmdWxseSIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGtleSA9IFtfdGhpczMuY3VycmVudERhc2hib2FyZC5sYXllciwgX3RoaXMzLmN1cnJlbnREYXNoYm9hcmQuZW50aXR5LCBfdGhpczMuY3VycmVudERhc2hib2FyZC5uYW1lXS5qb2luKCJfIik7CiAgICAgICAgICAgICAgICBfdGhpczMuY3VycmVudERhc2hib2FyZC5pZCA9IGpzb24uaWQ7CgogICAgICAgICAgICAgICAgaWYgKF90aGlzMy5jdXJyZW50RGFzaGJvYXJkLmlkKSB7CiAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTsKICAgICAgICAgICAgICAgICAgX3RoaXMzLmRhc2hib2FyZHMgPSBfdGhpczMuZGFzaGJvYXJkcy5maWx0ZXIoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5pZCAhPT0gX3RoaXMzLmN1cnJlbnREYXNoYm9hcmQuaWQ7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzMy5kYXNoYm9hcmRzLnB1c2goX3RoaXMzLmN1cnJlbnREYXNoYm9hcmQpOwoKICAgICAgICAgICAgICAgIGwgPSB7CiAgICAgICAgICAgICAgICAgIGlkOiBqc29uLmlkLAogICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uOiBjCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KGwpKTsKICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oImRhc2hib2FyZHMiLCBKU09OLnN0cmluZ2lmeShfdGhpczMuZGFzaGJvYXJkcykpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIsIGpzb24pOwoKICAgICAgICAgICAgICBjYXNlIDM2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU4KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZGVsZXRlRGFzaGJvYXJkOiBmdW5jdGlvbiBkZWxldGVEYXNoYm9hcmQoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkoKSB7CiAgICAgICAgdmFyIHJlcywganNvbiwga2V5OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOSQoX2NvbnRleHQ5KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gZ3JhcGhxbC5xdWVyeSgicmVtb3ZlVGVtcGxhdGUiKS5wYXJhbXMoewogICAgICAgICAgICAgICAgICBpZDogX3RoaXM0LmN1cnJlbnREYXNoYm9hcmQuaWQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDkuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIXJlcy5kYXRhLmVycm9ycykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcihyZXMuZGF0YS5lcnJvcnMpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5hYnJ1cHQoInJldHVybiIsIHJlcy5kYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAganNvbiA9IHJlcy5kYXRhLmRhdGEuZGlzYWJsZVRlbXBsYXRlOwoKICAgICAgICAgICAgICAgIGlmIChqc29uLnN0YXR1cykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoanNvbi5tZXNzYWdlKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KCJyZXR1cm4iLCByZXMuZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfdGhpczQuZGFzaGJvYXJkcyA9IF90aGlzNC5kYXNoYm9hcmRzLmZpbHRlcihmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZC5pZCAhPT0gX3RoaXM0LmN1cnJlbnREYXNoYm9hcmQuaWQ7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGtleSA9IFtfdGhpczQuY3VycmVudERhc2hib2FyZC5sYXllciwgX3RoaXM0LmN1cnJlbnREYXNoYm9hcmQuZW50aXR5LCBfdGhpczQuY3VycmVudERhc2hib2FyZC5uYW1lXS5qb2luKCJfIik7CiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTkpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn0pOwpleHBvcnQgZnVuY3Rpb24gdXNlRGFzaGJvYXJkU3RvcmUoKSB7CiAgcmV0dXJuIGRhc2hib2FyZFN0b3JlKHN0b3JlKTsKfQ=="},null]}