{"remainingRequest":"/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/thread-loader/dist/cjs.js!/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/babel-loader/lib/index.js!/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/ts-loader/index.js??ref--15-3!/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/src/views/dashboard/related/topology/components/Settings.vue?vue&type=script&lang=ts&setup=true","dependencies":[{"path":"/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/src/views/dashboard/related/topology/components/Settings.vue","mtime":1666468223588},{"path":"/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/babel.config.js","mtime":1666468223484},{"path":"/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/unplugin/dist/webpack/loaders/transform.js","mtime":1666468252648},{"path":"/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/unplugin/dist/webpack/loaders/transform.js","mtime":1666468252648},{"path":"/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/unplugin/dist/webpack/loaders/transform.js","mtime":1666468252648},{"path":"/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/unplugin/dist/webpack/loaders/transform.js","mtime":1666468252648},{"path":"/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/cache-loader/dist/cjs.js","mtime":1666468229208},{"path":"/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/thread-loader/dist/cjs.js","mtime":1666468239564},{"path":"/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/babel-loader/lib/index.js","mtime":1666468229004},{"path":"/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/ts-loader/index.js","mtime":1666468239640},{"path":"/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/cache-loader/dist/cjs.js","mtime":1666468229208},{"path":"/home/sk117/final-project/copy/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/vue-loader-v16/dist/index.js","mtime":1666468249808}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvc2sxMTcvZmluYWwtcHJvamVjdC9jb3B5L2FwYWNoZS1za3l3YWxraW5nLWFwbS05LjIuMC9za3l3YWxraW5nLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3NrMTE3L2ZpbmFsLXByb2plY3QvY29weS9hcGFjaGUtc2t5d2Fsa2luZy1hcG0tOS4yLjAvc2t5d2Fsa2luZy11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgeyBkZWZpbmVDb21wb25lbnQgYXMgX2RlZmluZUNvbXBvbmVudCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHVucmVmIGFzIF91bnJlZiwgdG9EaXNwbGF5U3RyaW5nIGFzIF90b0Rpc3BsYXlTdHJpbmcsIGNyZWF0ZUVsZW1lbnRWTm9kZSBhcyBfY3JlYXRlRWxlbWVudFZOb2RlLCByZXNvbHZlQ29tcG9uZW50IGFzIF9yZXNvbHZlQ29tcG9uZW50LCBjcmVhdGVWTm9kZSBhcyBfY3JlYXRlVk5vZGUsIHdpdGhDdHggYXMgX3dpdGhDdHgsIG9wZW5CbG9jayBhcyBfb3BlbkJsb2NrLCBjcmVhdGVCbG9jayBhcyBfY3JlYXRlQmxvY2ssIGNyZWF0ZUNvbW1lbnRWTm9kZSBhcyBfY3JlYXRlQ29tbWVudFZOb2RlLCB2U2hvdyBhcyBfdlNob3csIHdpdGhEaXJlY3RpdmVzIGFzIF93aXRoRGlyZWN0aXZlcywgcmVuZGVyTGlzdCBhcyBfcmVuZGVyTGlzdCwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCBjcmVhdGVFbGVtZW50QmxvY2sgYXMgX2NyZWF0ZUVsZW1lbnRCbG9jaywgY3JlYXRlVGV4dFZOb2RlIGFzIF9jcmVhdGVUZXh0Vk5vZGUsIHB1c2hTY29wZUlkIGFzIF9wdXNoU2NvcGVJZCwgcG9wU2NvcGVJZCBhcyBfcG9wU2NvcGVJZCB9IGZyb20gInZ1ZSI7Cgp2YXIgX3dpdGhTY29wZUlkID0gZnVuY3Rpb24gX3dpdGhTY29wZUlkKG4pIHsKICByZXR1cm4gX3B1c2hTY29wZUlkKCJkYXRhLXYtMjA2NGQ5MmMiKSwgbiA9IG4oKSwgX3BvcFNjb3BlSWQoKSwgbjsKfTsKCnZhciBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAibGluay1zZXR0aW5ncyIKfTsKdmFyIF9ob2lzdGVkXzIgPSB7CiAgY2xhc3M6ICJ0aXRsZSIKfTsKdmFyIF9ob2lzdGVkXzMgPSB7CiAgY2xhc3M6ICJsYWJlbCIKfTsKdmFyIF9ob2lzdGVkXzQgPSB7CiAgY2xhc3M6ICJsYWJlbCIKfTsKdmFyIF9ob2lzdGVkXzUgPSB7CiAgY2xhc3M6ICJsYWJlbCIKfTsKdmFyIF9ob2lzdGVkXzYgPSB7CiAgY2xhc3M6ICJub2RlLXNldHRpbmdzIgp9Owp2YXIgX2hvaXN0ZWRfNyA9IHsKICBjbGFzczogInRpdGxlIgp9Owp2YXIgX2hvaXN0ZWRfOCA9IHsKICBjbGFzczogImxhYmVsIgp9Owp2YXIgX2hvaXN0ZWRfOSA9IHsKICBjbGFzczogImxhYmVsIgp9Owp2YXIgX2hvaXN0ZWRfMTAgPSB7CiAgY2xhc3M6ICJsZWdlbmQtc2V0dGluZ3MiCn07CnZhciBfaG9pc3RlZF8xMSA9IHsKICBjbGFzczogInRpdGxlIgp9Owp2YXIgX2hvaXN0ZWRfMTIgPSB7CiAgY2xhc3M6ICJsYWJlbCIKfTsKCnZhciBfaG9pc3RlZF8xMyA9IC8qI19fUFVSRV9fKi9fd2l0aFNjb3BlSWQoZnVuY3Rpb24gKCkgewogIHJldHVybiAvKiNfX1BVUkVfXyovX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgewogICAgY2xhc3M6ICJsYWJlbCIKICB9LCAiSGVhbHRoeSBEZXNjcmlwdGlvbiIsIC0xKTsKfSk7Cgp2YXIgX2hvaXN0ZWRfMTQgPSAvKiNfX1BVUkVfXyovX3dpdGhTY29wZUlkKGZ1bmN0aW9uICgpIHsKICByZXR1cm4gLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIHsKICAgIGNsYXNzOiAibGFiZWwiCiAgfSwgIlVuaGVhbHRoeSBEZXNjcmlwdGlvbiIsIC0xKTsKfSk7CgppbXBvcnQgeyByZWFjdGl2ZSwgcmVmIH0gZnJvbSAidnVlIjsKaW1wb3J0IHsgdXNlSTE4biB9IGZyb20gInZ1ZS1pMThuIjsKaW1wb3J0IHsgdXNlRGFzaGJvYXJkU3RvcmUgfSBmcm9tICJAL3N0b3JlL21vZHVsZXMvZGFzaGJvYXJkIjsKaW1wb3J0IHsgdXNlVG9wb2xvZ3lTdG9yZSB9IGZyb20gIkAvc3RvcmUvbW9kdWxlcy90b3BvbG9neSI7CmltcG9ydCB7IEVsTWVzc2FnZSB9IGZyb20gImVsZW1lbnQtcGx1cyI7CmltcG9ydCB7IE1ldHJpY0NhdGFsb2csIFNjb3BlVHlwZSwgTWV0cmljQ29uZGl0aW9ucyB9IGZyb20gIi4uLy4uLy4uL2RhdGEiOwppbXBvcnQgeyB1c2VRdWVyeVRvcG9sb2d5TWV0cmljcyB9IGZyb20gIkAvaG9va3MvdXNlUHJvY2Vzc29yIjsKaW1wb3J0IHsgRW50aXR5VHlwZSwgTGVnZW5kT3B0LCBNZXRyaWNzVHlwZSB9IGZyb20gIi4uLy4uLy4uL2RhdGEiOwppbXBvcnQgTWV0cmljcyBmcm9tICIuL01ldHJpY3MudnVlIjsKLypnbG9iYWwgZGVmaW5lRW1pdHMgKi8KCmV4cG9ydCBkZWZhdWx0IC8qI19fUFVSRV9fKi9fZGVmaW5lQ29tcG9uZW50KHsKICBlbWl0czogWyJ1cGRhdGUiLCAidXBkYXRlTm9kZXMiXSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoX19wcm9wcywgX3JlZikgewogICAgdmFyIGVtaXQgPSBfcmVmLmVtaXQ7CgogICAgdmFyIF91c2VJMThuID0gdXNlSTE4bigpLAogICAgICAgIHQgPSBfdXNlSTE4bi50OwoKICAgIHZhciBkYXNoYm9hcmRTdG9yZSA9IHVzZURhc2hib2FyZFN0b3JlKCk7CiAgICB2YXIgdG9wb2xvZ3lTdG9yZSA9IHVzZVRvcG9sb2d5U3RvcmUoKTsKICAgIHZhciBzZWxlY3RlZEdyaWQgPSBkYXNoYm9hcmRTdG9yZS5zZWxlY3RlZEdyaWQ7CiAgICB2YXIgbm9kZURhc2hib2FyZCA9IHNlbGVjdGVkR3JpZC5ub2RlRGFzaGJvYXJkICYmIHNlbGVjdGVkR3JpZC5ub2RlRGFzaGJvYXJkLmxlbmd0aCA/IHNlbGVjdGVkR3JpZC5ub2RlRGFzaGJvYXJkIDogIiI7CiAgICB2YXIgaXNTZXJ2aWNlID0gW0VudGl0eVR5cGVbMF0udmFsdWUsIEVudGl0eVR5cGVbMV0udmFsdWVdLmluY2x1ZGVzKGRhc2hib2FyZFN0b3JlLmVudGl0eSk7CiAgICB2YXIgaXRlbXMgPSByZWFjdGl2ZShpc1NlcnZpY2UgJiYgbm9kZURhc2hib2FyZCA/IG5vZGVEYXNoYm9hcmQgOiBbewogICAgICBzY29wZTogIiIsCiAgICAgIGRhc2hib2FyZDogIiIKICAgIH1dKTsKICAgIHZhciBzdGF0ZXMgPSByZWFjdGl2ZSh7CiAgICAgIGxpbmtEYXNoYm9hcmQ6IHNlbGVjdGVkR3JpZC5saW5rRGFzaGJvYXJkIHx8ICIiLAogICAgICBub2RlRGFzaGJvYXJkOiBzZWxlY3RlZEdyaWQubm9kZURhc2hib2FyZCB8fCBbXSwKICAgICAgbGlua1NlcnZlck1ldHJpY3M6IHNlbGVjdGVkR3JpZC5saW5rU2VydmVyTWV0cmljcyB8fCBbXSwKICAgICAgbGlua0NsaWVudE1ldHJpY3M6IHNlbGVjdGVkR3JpZC5saW5rQ2xpZW50TWV0cmljcyB8fCBbXSwKICAgICAgbm9kZU1ldHJpY3M6IHNlbGVjdGVkR3JpZC5ub2RlTWV0cmljcyB8fCBbXSwKICAgICAgbm9kZU1ldHJpY0xpc3Q6IFtdLAogICAgICBsaW5rTWV0cmljTGlzdDogW10sCiAgICAgIGxpbmtEYXNoYm9hcmRzOiBbXSwKICAgICAgbm9kZURhc2hib2FyZHM6IFtdCiAgICB9KTsKICAgIHZhciBsID0gc2VsZWN0ZWRHcmlkLmxlZ2VuZCAmJiBzZWxlY3RlZEdyaWQubGVnZW5kLmxlbmd0aDsKICAgIHZhciBsZWdlbmQgPSByZWFjdGl2ZSh7CiAgICAgIG1ldHJpYzogbCA/IHNlbGVjdGVkR3JpZC5sZWdlbmQgOiBbewogICAgICAgIG5hbWU6ICIiLAogICAgICAgIGNvbmRpdGlvbjogIiIsCiAgICAgICAgdmFsdWU6ICIiCiAgICAgIH1dCiAgICB9KTsKICAgIHZhciBjb25maWdUeXBlID0gcmVmKCIiKTsKICAgIHZhciBkZXNjcmlwdGlvbiA9IHJlYWN0aXZlKHNlbGVjdGVkR3JpZC5kZXNjcmlwdGlvbiB8fCB7fSk7CiAgICBnZXRNZXRyaWNMaXN0KCk7CgogICAgZnVuY3Rpb24gZ2V0TWV0cmljTGlzdCgpIHsKICAgICAgcmV0dXJuIF9nZXRNZXRyaWNMaXN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgZnVuY3Rpb24gX2dldE1ldHJpY0xpc3QoKSB7CiAgICAgIF9nZXRNZXRyaWNMaXN0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBsaXN0LCBqc29uLCBlbnRpdHk7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgbGlzdCA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiZGFzaGJvYXJkcyIpIHx8ICJbXSIpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gZGFzaGJvYXJkU3RvcmUuZmV0Y2hNZXRyaWNMaXN0KCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGpzb24gPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghanNvbi5lcnJvcnMpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcihqc29uLmVycm9ycyk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgZW50aXR5ID0gZGFzaGJvYXJkU3RvcmUuZW50aXR5ID09PSBFbnRpdHlUeXBlWzFdLnZhbHVlID8gRW50aXR5VHlwZVswXS52YWx1ZSA6IGRhc2hib2FyZFN0b3JlLmVudGl0eSA9PT0gRW50aXR5VHlwZVs0XS52YWx1ZSA/IEVudGl0eVR5cGVbM10udmFsdWUgOiBkYXNoYm9hcmRTdG9yZS5lbnRpdHk7CiAgICAgICAgICAgICAgICBzdGF0ZXMubGlua0Rhc2hib2FyZHMgPSBsaXN0LnJlZHVjZShmdW5jdGlvbiAocHJldiwgZCkgewogICAgICAgICAgICAgICAgICBpZiAoZC5sYXllciA9PT0gZGFzaGJvYXJkU3RvcmUubGF5ZXJJZCAmJiBkLmVudGl0eSA9PT0gZW50aXR5ICsgIlJlbGF0aW9uIikgewogICAgICAgICAgICAgICAgICAgIHByZXYucHVzaChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGQpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGQubmFtZSwKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBkLm5hbWUKICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2OwogICAgICAgICAgICAgICAgfSwgW10pOwogICAgICAgICAgICAgICAgc3RhdGVzLm5vZGVNZXRyaWNMaXN0ID0gKGpzb24uZGF0YS5tZXRyaWNzIHx8IFtdKS5maWx0ZXIoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGQudHlwZSA9PT0gTWV0cmljc1R5cGUuUkVHVUxBUl9WQUxVRTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgc3RhdGVzLmxpbmtNZXRyaWNMaXN0ID0gKGpzb24uZGF0YS5tZXRyaWNzIHx8IFtdKS5maWx0ZXIoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGVudGl0eSArICJSZWxhdGlvbiIgPT09IE1ldHJpY0NhdGFsb2dbZC5jYXRhbG9nXSAmJiBkLnR5cGUgPT09IE1ldHJpY3NUeXBlLlJFR1VMQVJfVkFMVUU7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoIWlzU2VydmljZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgc3RhdGVzLm5vZGVEYXNoYm9hcmRzID0gbGlzdC5yZWR1Y2UoZnVuY3Rpb24gKHByZXYsIGQpIHsKICAgICAgICAgICAgICAgICAgaWYgKGQubGF5ZXIgPT09IGRhc2hib2FyZFN0b3JlLmxheWVySWQgJiYgZC5lbnRpdHkgPT09IGVudGl0eSkgewogICAgICAgICAgICAgICAgICAgIHByZXYucHVzaChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGQpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGQubmFtZSwKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBkLm5hbWUKICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2OwogICAgICAgICAgICAgICAgfSwgW10pOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKICAgICAgcmV0dXJuIF9nZXRNZXRyaWNMaXN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0TGVnZW5kKCkgewogICAgICByZXR1cm4gX3NldExlZ2VuZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIGZ1bmN0aW9uIF9zZXRMZWdlbmQoKSB7CiAgICAgIF9zZXRMZWdlbmQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBpZHMsIG5hbWVzLCBwYXJhbSwgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB1cGRhdGVTZXR0aW5ncygpOwogICAgICAgICAgICAgICAgaWRzID0gdG9wb2xvZ3lTdG9yZS5ub2Rlcy5tYXAoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuaWQ7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG5hbWVzID0gZGFzaGJvYXJkU3RvcmUuc2VsZWN0ZWRHcmlkLmxlZ2VuZC5tYXAoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGQubmFtZTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmIChuYW1lcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBlbWl0KCJ1cGRhdGVOb2RlcyIpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDg7CiAgICAgICAgICAgICAgICByZXR1cm4gdXNlUXVlcnlUb3BvbG9neU1ldHJpY3MobmFtZXMsIGlkcyk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIHBhcmFtID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDExOwogICAgICAgICAgICAgICAgcmV0dXJuIHRvcG9sb2d5U3RvcmUuZ2V0TGVnZW5kTWV0cmljcyhwYXJhbSk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzLmVycm9ycykgewogICAgICAgICAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IocmVzLmVycm9ycyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZW1pdCgidXBkYXRlTm9kZXMiKTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKTsKICAgICAgcmV0dXJuIF9zZXRMZWdlbmQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VOb2RlRGFzaGJvYXJkKG9wdCkgewogICAgICBzdGF0ZXMubm9kZURhc2hib2FyZCA9IG9wdFswXS52YWx1ZTsKICAgICAgdXBkYXRlU2V0dGluZ3MoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VMaW5rRGFzaGJvYXJkKG9wdCkgewogICAgICBzdGF0ZXMubGlua0Rhc2hib2FyZCA9IG9wdFswXS52YWx1ZTsKICAgICAgdXBkYXRlU2V0dGluZ3MoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VMZWdlbmQodHlwZSwgb3B0LCBpbmRleCkgewogICAgICBsZWdlbmQubWV0cmljW2luZGV4XVt0eXBlXSA9IG9wdFswXS52YWx1ZSB8fCBvcHQ7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlU2NvcGUoaW5kZXgsIG9wdCkgewogICAgICBpdGVtc1tpbmRleF0uc2NvcGUgPSBvcHRbMF0udmFsdWU7CiAgICAgIHZhciBsaXN0ID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJkYXNoYm9hcmRzIikgfHwgIltdIik7CiAgICAgIHN0YXRlcy5ub2RlRGFzaGJvYXJkcyA9IGxpc3QucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBkKSB7CiAgICAgICAgaWYgKGQubGF5ZXIgPT09IGRhc2hib2FyZFN0b3JlLmxheWVySWQgJiYgZC5lbnRpdHkgPT09IG9wdFswXS52YWx1ZSkgewogICAgICAgICAgcHJldi5wdXNoKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZCksIHt9LCB7CiAgICAgICAgICAgIGxhYmVsOiBkLm5hbWUsCiAgICAgICAgICAgIHZhbHVlOiBkLm5hbWUKICAgICAgICAgIH0pKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBwcmV2OwogICAgICB9LCBbXSk7CiAgICAgIGl0ZW1zW2luZGV4XS5kYXNoYm9hcmQgPSBzdGF0ZXMubm9kZURhc2hib2FyZHNbMF0udmFsdWU7CiAgICAgIHVwZGF0ZVNldHRpbmdzKCk7CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlTm9kZURhc2hib2FyZHMoaW5kZXgsIGNvbnRlbnQpIHsKICAgICAgaXRlbXNbaW5kZXhdLmRhc2hib2FyZCA9IGNvbnRlbnRbMF0udmFsdWU7CiAgICAgIHVwZGF0ZVNldHRpbmdzKCk7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkSXRlbSgpIHsKICAgICAgaXRlbXMucHVzaCh7CiAgICAgICAgc2NvcGU6ICIiLAogICAgICAgIGRhc2hib2FyZDogIiIKICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gZGVsZXRlSXRlbShpbmRleCkgewogICAgICBpZiAoaXRlbXMubGVuZ3RoID09PSAxKSB7CiAgICAgICAgaXRlbXMucHVzaCh7CiAgICAgICAgICBzY29wZTogIiIsCiAgICAgICAgICBkYXNoYm9hcmQ6ICIiCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGl0ZW1zLnNwbGljZShpbmRleCwgMSk7CiAgICAgIHVwZGF0ZVNldHRpbmdzKCk7CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlU2V0dGluZ3MobWV0cmljQ29uZmlnKSB7CiAgICAgIHZhciBtZXRyaWNzID0gbGVnZW5kLm1ldHJpYy5maWx0ZXIoZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gZC5uYW1lICYmIGQudmFsdWUgJiYgZC5jb25kaXRpb247CiAgICAgIH0pOwoKICAgICAgdmFyIHBhcmFtID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRhc2hib2FyZFN0b3JlLnNlbGVjdGVkR3JpZCksIHt9LCB7CiAgICAgICAgbGlua0Rhc2hib2FyZDogc3RhdGVzLmxpbmtEYXNoYm9hcmQsCiAgICAgICAgbm9kZURhc2hib2FyZDogaXNTZXJ2aWNlID8gaXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICByZXR1cm4gZC5kYXNoYm9hcmQ7CiAgICAgICAgfSkgOiBzdGF0ZXMubm9kZURhc2hib2FyZCwKICAgICAgICBsaW5rU2VydmVyTWV0cmljczogc3RhdGVzLmxpbmtTZXJ2ZXJNZXRyaWNzLAogICAgICAgIGxpbmtDbGllbnRNZXRyaWNzOiBzdGF0ZXMubGlua0NsaWVudE1ldHJpY3MsCiAgICAgICAgbm9kZU1ldHJpY3M6IHN0YXRlcy5ub2RlTWV0cmljcywKICAgICAgICBsZWdlbmQ6IG1ldHJpY3MKICAgICAgfSwgbWV0cmljQ29uZmlnKSwge30sIHsKICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24KICAgICAgfSk7CgogICAgICBkYXNoYm9hcmRTdG9yZS5zZWxlY3RXaWRnZXQocGFyYW0pOwogICAgICBkYXNoYm9hcmRTdG9yZS5zZXRDb25maWdzKHBhcmFtKTsKICAgICAgZW1pdCgidXBkYXRlIiwgcGFyYW0pOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZUxpbmtTZXJ2ZXJNZXRyaWNzKG9wdGlvbnMpIHsKICAgICAgdmFyIG9wdCA9IG9wdGlvbnMubWFwKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGQudmFsdWU7CiAgICAgIH0pOwogICAgICB2YXIgaW5kZXggPSBzdGF0ZXMubGlua1NlcnZlck1ldHJpY3MuZmluZEluZGV4KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuICFvcHQuaW5jbHVkZXMoZCk7CiAgICAgIH0pOwogICAgICBzdGF0ZXMubGlua1NlcnZlck1ldHJpY3MgPSBvcHQ7CgogICAgICBpZiAoaW5kZXggPCAwKSB7CiAgICAgICAgY2hhbmdlTGlua1NlcnZlck1ldHJpY3MoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBvcmlnaW4gPSBkYXNoYm9hcmRTdG9yZS5zZWxlY3RlZEdyaWQubGlua1NlcnZlck1ldHJpY0NvbmZpZyB8fCBbXTsKICAgICAgdmFyIGNvbmZpZyA9IG9yaWdpbi5sZW5ndGggPT09IDEgPyBbXSA6IG9yaWdpbi5zcGxpY2UoaW5kZXgsIDEpOwogICAgICBjaGFuZ2VMaW5rU2VydmVyTWV0cmljcyh7CiAgICAgICAgbGlua1NlcnZlck1ldHJpY0NvbmZpZzogY29uZmlnCiAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZUxpbmtTZXJ2ZXJNZXRyaWNzKF94KSB7CiAgICAgIHJldHVybiBfY2hhbmdlTGlua1NlcnZlck1ldHJpY3MuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBfY2hhbmdlTGlua1NlcnZlck1ldHJpY3MoKSB7CiAgICAgIF9jaGFuZ2VMaW5rU2VydmVyTWV0cmljcyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoY29uZmlnKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHVwZGF0ZVNldHRpbmdzKGNvbmZpZyk7CgogICAgICAgICAgICAgICAgaWYgKHN0YXRlcy5saW5rU2VydmVyTWV0cmljcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0b3BvbG9neVN0b3JlLnNldExpbmtTZXJ2ZXJNZXRyaWNzKHt9KTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgdG9wb2xvZ3lTdG9yZS5nZXRMaW5rU2VydmVyTWV0cmljcyhzdGF0ZXMubGlua1NlcnZlck1ldHJpY3MpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSk7CiAgICAgIHJldHVybiBfY2hhbmdlTGlua1NlcnZlck1ldHJpY3MuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVMaW5rQ2xpZW50TWV0cmljcyhvcHRpb25zKSB7CiAgICAgIHZhciBvcHQgPSBvcHRpb25zLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBkLnZhbHVlOwogICAgICB9KTsKICAgICAgdmFyIGluZGV4ID0gc3RhdGVzLmxpbmtDbGllbnRNZXRyaWNzLmZpbmRJbmRleChmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiAhb3B0LmluY2x1ZGVzKGQpOwogICAgICB9KTsKICAgICAgc3RhdGVzLmxpbmtDbGllbnRNZXRyaWNzID0gb3B0OwoKICAgICAgaWYgKGluZGV4IDwgMCkgewogICAgICAgIGNoYW5nZUxpbmtDbGllbnRNZXRyaWNzKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgb3JpZ2luID0gZGFzaGJvYXJkU3RvcmUuc2VsZWN0ZWRHcmlkLmxpbmtDbGllbnRNZXRyaWNDb25maWcgfHwgW107CiAgICAgIHZhciBjb25maWcgPSBvcmlnaW4ubGVuZ3RoID09PSAxID8gW10gOiBvcmlnaW4uc3BsaWNlKGluZGV4LCAxKTsKICAgICAgY2hhbmdlTGlua0NsaWVudE1ldHJpY3MoewogICAgICAgIGxpbmtDbGllbnRNZXRyaWNDb25maWc6IGNvbmZpZwogICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VMaW5rQ2xpZW50TWV0cmljcyhfeDIpIHsKICAgICAgcmV0dXJuIF9jaGFuZ2VMaW5rQ2xpZW50TWV0cmljcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIGZ1bmN0aW9uIF9jaGFuZ2VMaW5rQ2xpZW50TWV0cmljcygpIHsKICAgICAgX2NoYW5nZUxpbmtDbGllbnRNZXRyaWNzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNChjb25maWcpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdXBkYXRlU2V0dGluZ3MoY29uZmlnKTsKCiAgICAgICAgICAgICAgICBpZiAoc3RhdGVzLmxpbmtDbGllbnRNZXRyaWNzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRvcG9sb2d5U3RvcmUuc2V0TGlua0NsaWVudE1ldHJpY3Moe30pOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICB0b3BvbG9neVN0b3JlLmdldExpbmtDbGllbnRNZXRyaWNzKHN0YXRlcy5saW5rQ2xpZW50TWV0cmljcyk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKTsKICAgICAgcmV0dXJuIF9jaGFuZ2VMaW5rQ2xpZW50TWV0cmljcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZU5vZGVNZXRyaWNzKG9wdGlvbnMpIHsKICAgICAgdmFyIG9wdCA9IG9wdGlvbnMubWFwKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGQudmFsdWU7CiAgICAgIH0pOwogICAgICB2YXIgaW5kZXggPSBzdGF0ZXMubm9kZU1ldHJpY3MuZmluZEluZGV4KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuICFvcHQuaW5jbHVkZXMoZCk7CiAgICAgIH0pOwogICAgICBzdGF0ZXMubm9kZU1ldHJpY3MgPSBvcHQ7CgogICAgICBpZiAoaW5kZXggPCAwKSB7CiAgICAgICAgY2hhbmdlTm9kZU1ldHJpY3MoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBvcmlnaW4gPSBkYXNoYm9hcmRTdG9yZS5zZWxlY3RlZEdyaWQubm9kZU1ldHJpY0NvbmZpZyB8fCBbXTsKICAgICAgdmFyIGNvbmZpZyA9IG9yaWdpbi5sZW5ndGggPT09IDEgPyBbXSA6IG9yaWdpbi5zcGxpY2UoaW5kZXgsIDEpOwogICAgICBjaGFuZ2VOb2RlTWV0cmljcyh7CiAgICAgICAgbm9kZU1ldHJpY0NvbmZpZzogY29uZmlnCiAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZU5vZGVNZXRyaWNzKF94MykgewogICAgICByZXR1cm4gX2NoYW5nZU5vZGVNZXRyaWNzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgZnVuY3Rpb24gX2NoYW5nZU5vZGVNZXRyaWNzKCkgewogICAgICBfY2hhbmdlTm9kZU1ldHJpY3MgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KGNvbmZpZykgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB1cGRhdGVTZXR0aW5ncyhjb25maWcpOwoKICAgICAgICAgICAgICAgIGlmIChzdGF0ZXMubm9kZU1ldHJpY3MubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdG9wb2xvZ3lTdG9yZS5zZXROb2RlTWV0cmljVmFsdWUoe30pOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICB0b3BvbG9neVN0b3JlLnF1ZXJ5Tm9kZU1ldHJpY3Moc3RhdGVzLm5vZGVNZXRyaWNzKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgfSkpOwogICAgICByZXR1cm4gX2NoYW5nZU5vZGVNZXRyaWNzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgZnVuY3Rpb24gZGVsZXRlTWV0cmljKGluZGV4KSB7CiAgICAgIGlmIChsZWdlbmQubWV0cmljLmxlbmd0aCA9PT0gMSkgewogICAgICAgIGxlZ2VuZC5tZXRyaWMgPSBbewogICAgICAgICAgbmFtZTogIiIsCiAgICAgICAgICBjb25kaXRpb246ICIiLAogICAgICAgICAgdmFsdWU6ICIiCiAgICAgICAgfV07CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBsZWdlbmQubWV0cmljLnNwbGljZShpbmRleCwgMSk7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkTWV0cmljKCkgewogICAgICBsZWdlbmQubWV0cmljLnB1c2goewogICAgICAgIG5hbWU6ICIiLAogICAgICAgIGNvbmRpdGlvbjogIiIsCiAgICAgICAgdmFsdWU6ICIiCiAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldENvbmZpZ1R5cGUodHlwZSkgewogICAgICBjb25maWdUeXBlLnZhbHVlID0gdHlwZTsKICAgIH0KCiAgICByZXR1cm4gZnVuY3Rpb24gKF9jdHgsIF9jYWNoZSkgewogICAgICB2YXIgX2NvbXBvbmVudF9TZWxlY3RvciA9IF9yZXNvbHZlQ29tcG9uZW50KCJTZWxlY3RvciIpOwoKICAgICAgdmFyIF9jb21wb25lbnRfSWNvbiA9IF9yZXNvbHZlQ29tcG9uZW50KCJJY29uIik7CgogICAgICB2YXIgX2NvbXBvbmVudF9lbF9wb3BvdmVyID0gX3Jlc29sdmVDb21wb25lbnQoImVsLXBvcG92ZXIiKTsKCiAgICAgIHZhciBfY29tcG9uZW50X2VsX2lucHV0ID0gX3Jlc29sdmVDb21wb25lbnQoImVsLWlucHV0Iik7CgogICAgICB2YXIgX2NvbXBvbmVudF9lbF9idXR0b24gPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtYnV0dG9uIik7CgogICAgICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKF9GcmFnbWVudCwgbnVsbCwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzEsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJoNSIsIF9ob2lzdGVkXzIsIF90b0Rpc3BsYXlTdHJpbmcoX3VucmVmKHQpKCJjYWxsU2V0dGluZ3MiKSksIDEpLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF8zLCBfdG9EaXNwbGF5U3RyaW5nKF91bnJlZih0KSgibGlua0Rhc2hib2FyZCIpKSwgMSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X1NlbGVjdG9yLCB7CiAgICAgICAgdmFsdWU6IF91bnJlZihzdGF0ZXMpLmxpbmtEYXNoYm9hcmQsCiAgICAgICAgb3B0aW9uczogX3VucmVmKHN0YXRlcykubGlua0Rhc2hib2FyZHMsCiAgICAgICAgc2l6ZTogInNtYWxsIiwKICAgICAgICBwbGFjZWhvbGRlcjogIlBsZWFzZSBpbnB1dCBhIGRhc2hib2FyZCBuYW1lIGZvciBjYWxscyIsCiAgICAgICAgb25DaGFuZ2U6IGNoYW5nZUxpbmtEYXNoYm9hcmQsCiAgICAgICAgY2xhc3M6ICJpbnB1dHMiLAogICAgICAgIGNsZWFyYWJsZTogdHJ1ZQogICAgICB9LCBudWxsLCA4LCBbInZhbHVlIiwgIm9wdGlvbnMiXSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzQsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJzcGFuIiwgbnVsbCwgX3RvRGlzcGxheVN0cmluZyhfdW5yZWYodCkoImxpbmtTZXJ2ZXJNZXRyaWNzIikpLCAxKSwgX3VucmVmKHN0YXRlcykubGlua1NlcnZlck1ldHJpY3MubGVuZ3RoID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfZWxfcG9wb3ZlciwgewogICAgICAgIGtleTogMCwKICAgICAgICBwbGFjZW1lbnQ6ICJsZWZ0IiwKICAgICAgICB3aWR0aDogNDAwLAogICAgICAgIHRyaWdnZXI6ICJjbGljayIsCiAgICAgICAgZWZmZWN0OiAiZGFyayIKICAgICAgfSwgewogICAgICAgIHJlZmVyZW5jZTogX3dpdGhDdHgoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJzcGFuIiwgewogICAgICAgICAgICBvbkNsaWNrOiBfY2FjaGVbMF0gfHwgKF9jYWNoZVswXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gc2V0Q29uZmlnVHlwZSgnbGlua1NlcnZlck1ldHJpY0NvbmZpZycpOwogICAgICAgICAgICB9KQogICAgICAgICAgfSwgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X0ljb24sIHsKICAgICAgICAgICAgY2xhc3M6ICJjcCBtbC01IiwKICAgICAgICAgICAgaWNvbk5hbWU6ICJtb2RlX2VkaXQiLAogICAgICAgICAgICBzaXplOiAibWlkZGxlIgogICAgICAgICAgfSldKV07CiAgICAgICAgfSksCiAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFtfY3JlYXRlVk5vZGUoTWV0cmljcywgewogICAgICAgICAgICB0eXBlOiBjb25maWdUeXBlLnZhbHVlLAogICAgICAgICAgICBtZXRyaWNzOiBfdW5yZWYoc3RhdGVzKS5saW5rU2VydmVyTWV0cmljcywKICAgICAgICAgICAgb25VcGRhdGU6IGNoYW5nZUxpbmtTZXJ2ZXJNZXRyaWNzCiAgICAgICAgICB9LCBudWxsLCA4LCBbInR5cGUiLCAibWV0cmljcyJdKV07CiAgICAgICAgfSksCiAgICAgICAgXzogMQogICAgICB9KSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCIiLCB0cnVlKV0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9TZWxlY3RvciwgewogICAgICAgIGNsYXNzOiAiaW5wdXRzIiwKICAgICAgICBtdWx0aXBsZTogdHJ1ZSwKICAgICAgICB2YWx1ZTogX3VucmVmKHN0YXRlcykubGlua1NlcnZlck1ldHJpY3MsCiAgICAgICAgb3B0aW9uczogX3VucmVmKHN0YXRlcykubGlua01ldHJpY0xpc3QsCiAgICAgICAgc2l6ZTogInNtYWxsIiwKICAgICAgICBwbGFjZWhvbGRlcjogIlNlbGVjdCBtZXRyaWNzIiwKICAgICAgICBvbkNoYW5nZTogdXBkYXRlTGlua1NlcnZlck1ldHJpY3MKICAgICAgfSwgbnVsbCwgOCwgWyJ2YWx1ZSIsICJvcHRpb25zIl0pLCBfd2l0aERpcmVjdGl2ZXMoX2NyZWF0ZUVsZW1lbnRWTm9kZSgic3BhbiIsIG51bGwsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF81LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgic3BhbiIsIG51bGwsIF90b0Rpc3BsYXlTdHJpbmcoX3VucmVmKHQpKCJsaW5rQ2xpZW50TWV0cmljcyIpKSwgMSksIF91bnJlZihzdGF0ZXMpLmxpbmtDbGllbnRNZXRyaWNzLmxlbmd0aCA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X2VsX3BvcG92ZXIsIHsKICAgICAgICBrZXk6IDAsCiAgICAgICAgcGxhY2VtZW50OiAibGVmdCIsCiAgICAgICAgd2lkdGg6IDQwMCwKICAgICAgICB0cmlnZ2VyOiAiY2xpY2siLAogICAgICAgIGVmZmVjdDogImRhcmsiCiAgICAgIH0sIHsKICAgICAgICByZWZlcmVuY2U6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgic3BhbiIsIHsKICAgICAgICAgICAgb25DbGljazogX2NhY2hlWzFdIHx8IChfY2FjaGVbMV0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHNldENvbmZpZ1R5cGUoJ2xpbmtDbGllbnRNZXRyaWNDb25maWcnKTsKICAgICAgICAgICAgfSkKICAgICAgICAgIH0sIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9JY29uLCB7CiAgICAgICAgICAgIGNsYXNzOiAiY3AgbWwtNSIsCiAgICAgICAgICAgIGljb25OYW1lOiAibW9kZV9lZGl0IiwKICAgICAgICAgICAgc2l6ZTogIm1pZGRsZSIKICAgICAgICAgIH0pXSldOwogICAgICAgIH0pLAogICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBbX2NyZWF0ZVZOb2RlKE1ldHJpY3MsIHsKICAgICAgICAgICAgdHlwZTogY29uZmlnVHlwZS52YWx1ZSwKICAgICAgICAgICAgbWV0cmljczogX3VucmVmKHN0YXRlcykubGlua0NsaWVudE1ldHJpY3MsCiAgICAgICAgICAgIG9uVXBkYXRlOiBjaGFuZ2VMaW5rQ2xpZW50TWV0cmljcwogICAgICAgICAgfSwgbnVsbCwgOCwgWyJ0eXBlIiwgIm1ldHJpY3MiXSldOwogICAgICAgIH0pLAogICAgICAgIF86IDEKICAgICAgfSkpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgiIiwgdHJ1ZSldKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfU2VsZWN0b3IsIHsKICAgICAgICBjbGFzczogImlucHV0cyIsCiAgICAgICAgbXVsdGlwbGU6IHRydWUsCiAgICAgICAgdmFsdWU6IF91bnJlZihzdGF0ZXMpLmxpbmtDbGllbnRNZXRyaWNzLAogICAgICAgIG9wdGlvbnM6IF91bnJlZihzdGF0ZXMpLmxpbmtNZXRyaWNMaXN0LAogICAgICAgIHNpemU6ICJzbWFsbCIsCiAgICAgICAgcGxhY2Vob2xkZXI6ICJTZWxlY3QgbWV0cmljcyIsCiAgICAgICAgb25DaGFuZ2U6IHVwZGF0ZUxpbmtDbGllbnRNZXRyaWNzCiAgICAgIH0sIG51bGwsIDgsIFsidmFsdWUiLCAib3B0aW9ucyJdKV0sIDUxMiksIFtbX3ZTaG93LCBfdW5yZWYoZGFzaGJvYXJkU3RvcmUpLmVudGl0eSAhPT0gX3VucmVmKEVudGl0eVR5cGUpWzJdLnZhbHVlXV0pXSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzYsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJoNSIsIF9ob2lzdGVkXzcsIF90b0Rpc3BsYXlTdHJpbmcoX3VucmVmKHQpKCJub2RlU2V0dGluZ3MiKSksIDEpLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF84LCBfdG9EaXNwbGF5U3RyaW5nKF91bnJlZih0KSgibm9kZURhc2hib2FyZCIpKSwgMSksIF93aXRoRGlyZWN0aXZlcyhfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9TZWxlY3RvciwgewogICAgICAgIHZhbHVlOiBfdW5yZWYoc3RhdGVzKS5ub2RlRGFzaGJvYXJkLAogICAgICAgIG9wdGlvbnM6IF91bnJlZihzdGF0ZXMpLm5vZGVEYXNoYm9hcmRzLAogICAgICAgIHNpemU6ICJzbWFsbCIsCiAgICAgICAgcGxhY2Vob2xkZXI6ICJQbGVhc2UgaW5wdXQgYSBkYXNoYm9hcmQgbmFtZSBmb3Igbm9kZXMiLAogICAgICAgIG9uQ2hhbmdlOiBjaGFuZ2VOb2RlRGFzaGJvYXJkLAogICAgICAgIGNsYXNzOiAiaW5wdXRzIgogICAgICB9LCBudWxsLCA4LCBbInZhbHVlIiwgIm9wdGlvbnMiXSksIFtbX3ZTaG93LCAhX3VucmVmKGlzU2VydmljZSldXSksIChfb3BlbkJsb2NrKHRydWUpLCBfY3JlYXRlRWxlbWVudEJsb2NrKF9GcmFnbWVudCwgbnVsbCwgX3JlbmRlckxpc3QoX3VucmVmKGl0ZW1zKSwgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgcmV0dXJuIF93aXRoRGlyZWN0aXZlcygoX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCB7CiAgICAgICAgICBrZXk6IGluZGV4LAogICAgICAgICAgY2xhc3M6ICJtZXRyaWMtaXRlbSIKICAgICAgICB9LCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfU2VsZWN0b3IsIHsKICAgICAgICAgIHZhbHVlOiBpdGVtLnNjb3BlLAogICAgICAgICAgb3B0aW9uczogX3VucmVmKFNjb3BlVHlwZSksCiAgICAgICAgICBzaXplOiAic21hbGwiLAogICAgICAgICAgcGxhY2Vob2xkZXI6ICJTZWxlY3QgYSBzY29wZSIsCiAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoJGV2ZW50KSB7CiAgICAgICAgICAgIHJldHVybiBjaGFuZ2VTY29wZShpbmRleCwgJGV2ZW50KTsKICAgICAgICAgIH0sCiAgICAgICAgICBjbGFzczogIml0ZW0gbXItNSIKICAgICAgICB9LCBudWxsLCA4LCBbInZhbHVlIiwgIm9wdGlvbnMiLCAib25DaGFuZ2UiXSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X1NlbGVjdG9yLCB7CiAgICAgICAgICB2YWx1ZTogaXRlbS5kYXNoYm9hcmQsCiAgICAgICAgICBvcHRpb25zOiBfdW5yZWYoc3RhdGVzKS5ub2RlRGFzaGJvYXJkcywKICAgICAgICAgIHNpemU6ICJzbWFsbCIsCiAgICAgICAgICBwbGFjZWhvbGRlcjogIlBsZWFzZSBpbnB1dCBhIGRhc2hib2FyZCBuYW1lIGZvciBub2RlcyIsCiAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoJGV2ZW50KSB7CiAgICAgICAgICAgIHJldHVybiB1cGRhdGVOb2RlRGFzaGJvYXJkcyhpbmRleCwgJGV2ZW50KTsKICAgICAgICAgIH0sCiAgICAgICAgICBjbGFzczogIml0ZW0gbXItNSIKICAgICAgICB9LCBudWxsLCA4LCBbInZhbHVlIiwgIm9wdGlvbnMiLCAib25DaGFuZ2UiXSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoInNwYW4iLCBudWxsLCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfSWNvbiwgewogICAgICAgICAgY2xhc3M6ICJjcCBtci01IiwKICAgICAgICAgIGljb25OYW1lOiAicmVtb3ZlX2NpcmNsZV9vdXRsaW5lIiwKICAgICAgICAgIHNpemU6ICJtaWRkbGUiLAogICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygkZXZlbnQpIHsKICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZUl0ZW0oaW5kZXgpOwogICAgICAgICAgfQogICAgICAgIH0sIG51bGwsIDgsIFsib25DbGljayJdKSwgX3dpdGhEaXJlY3RpdmVzKF9jcmVhdGVWTm9kZShfY29tcG9uZW50X0ljb24sIHsKICAgICAgICAgIGNsYXNzOiAiY3AiLAogICAgICAgICAgaWNvbk5hbWU6ICJhZGRfY2lyY2xlX291dGxpbmVjb250cm9sX3BvaW50IiwKICAgICAgICAgIHNpemU6ICJtaWRkbGUiLAogICAgICAgICAgb25DbGljazogYWRkSXRlbQogICAgICAgIH0sIG51bGwsIDUxMiksIFtbX3ZTaG93LCBpbmRleCA9PT0gX3VucmVmKGl0ZW1zKS5sZW5ndGggLSAxICYmIF91bnJlZihpdGVtcykubGVuZ3RoIDwgNV1dKV0pXSkpLCBbW192U2hvdywgX3VucmVmKGlzU2VydmljZSldXSk7CiAgICAgIH0pLCAxMjgpKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfOSwgW19jcmVhdGVFbGVtZW50Vk5vZGUoInNwYW4iLCBudWxsLCBfdG9EaXNwbGF5U3RyaW5nKF91bnJlZih0KSgibm9kZU1ldHJpY3MiKSksIDEpLCBfdW5yZWYoc3RhdGVzKS5ub2RlTWV0cmljcy5sZW5ndGggPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX2NvbXBvbmVudF9lbF9wb3BvdmVyLCB7CiAgICAgICAga2V5OiAwLAogICAgICAgIHBsYWNlbWVudDogImxlZnQiLAogICAgICAgIHdpZHRoOiA0MDAsCiAgICAgICAgdHJpZ2dlcjogImNsaWNrIiwKICAgICAgICBlZmZlY3Q6ICJkYXJrIgogICAgICB9LCB7CiAgICAgICAgcmVmZXJlbmNlOiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gW19jcmVhdGVFbGVtZW50Vk5vZGUoInNwYW4iLCB7CiAgICAgICAgICAgIG9uQ2xpY2s6IF9jYWNoZVsyXSB8fCAoX2NhY2hlWzJdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiBzZXRDb25maWdUeXBlKCdub2RlTWV0cmljQ29uZmlnJyk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICB9LCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfSWNvbiwgewogICAgICAgICAgICBjbGFzczogImNwIG1sLTUiLAogICAgICAgICAgICBpY29uTmFtZTogIm1vZGVfZWRpdCIsCiAgICAgICAgICAgIHNpemU6ICJtaWRkbGUiCiAgICAgICAgICB9KV0pXTsKICAgICAgICB9KSwKICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gW19jcmVhdGVWTm9kZShNZXRyaWNzLCB7CiAgICAgICAgICAgIHR5cGU6IGNvbmZpZ1R5cGUudmFsdWUsCiAgICAgICAgICAgIG1ldHJpY3M6IF91bnJlZihzdGF0ZXMpLm5vZGVNZXRyaWNzLAogICAgICAgICAgICBvblVwZGF0ZTogY2hhbmdlTm9kZU1ldHJpY3MKICAgICAgICAgIH0sIG51bGwsIDgsIFsidHlwZSIsICJtZXRyaWNzIl0pXTsKICAgICAgICB9KSwKICAgICAgICBfOiAxCiAgICAgIH0pKSA6IF9jcmVhdGVDb21tZW50Vk5vZGUoIiIsIHRydWUpXSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X1NlbGVjdG9yLCB7CiAgICAgICAgY2xhc3M6ICJpbnB1dHMiLAogICAgICAgIG11bHRpcGxlOiB0cnVlLAogICAgICAgIHZhbHVlOiBfdW5yZWYoc3RhdGVzKS5ub2RlTWV0cmljcywKICAgICAgICBvcHRpb25zOiBfdW5yZWYoc3RhdGVzKS5ub2RlTWV0cmljTGlzdCwKICAgICAgICBzaXplOiAic21hbGwiLAogICAgICAgIHBsYWNlaG9sZGVyOiAiU2VsZWN0IG1ldHJpY3MiLAogICAgICAgIG9uQ2hhbmdlOiB1cGRhdGVOb2RlTWV0cmljcwogICAgICB9LCBudWxsLCA4LCBbInZhbHVlIiwgIm9wdGlvbnMiXSldKSwgX3dpdGhEaXJlY3RpdmVzKF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzEwLCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiaDUiLCBfaG9pc3RlZF8xMSwgX3RvRGlzcGxheVN0cmluZyhfdW5yZWYodCkoImxlZ2VuZFNldHRpbmdzIikpLCAxKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMTIsIF90b0Rpc3BsYXlTdHJpbmcoX3VucmVmKHQpKCJjb25kaXRpb25zIikpLCAxKSwgKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCBudWxsLCBfcmVuZGVyTGlzdChfdW5yZWYobGVnZW5kKS5tZXRyaWMsIGZ1bmN0aW9uIChtZXRyaWMsIGluZGV4KSB7CiAgICAgICAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgewogICAgICAgICAga2V5OiBtZXRyaWMubmFtZSArIGluZGV4CiAgICAgICAgfSwgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X1NlbGVjdG9yLCB7CiAgICAgICAgICBjbGFzczogIml0ZW0iLAogICAgICAgICAgdmFsdWU6IG1ldHJpYy5uYW1lLAogICAgICAgICAgb3B0aW9uczogX3VucmVmKHN0YXRlcykubm9kZU1ldHJpY0xpc3QsCiAgICAgICAgICBzaXplOiAic21hbGwiLAogICAgICAgICAgcGxhY2Vob2xkZXI6ICJTZWxlY3QgYSBtZXRyaWMiLAogICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKCRldmVudCkgewogICAgICAgICAgICByZXR1cm4gY2hhbmdlTGVnZW5kKF91bnJlZihMZWdlbmRPcHQpLk5BTUUsICRldmVudCwgaW5kZXgpOwogICAgICAgICAgfQogICAgICAgIH0sIG51bGwsIDgsIFsidmFsdWUiLCAib3B0aW9ucyIsICJvbkNoYW5nZSJdKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfU2VsZWN0b3IsIHsKICAgICAgICAgIGNsYXNzOiAiaW5wdXQtc21hbGwiLAogICAgICAgICAgdmFsdWU6IG1ldHJpYy5jb25kaXRpb24sCiAgICAgICAgICBvcHRpb25zOiBfdW5yZWYoTWV0cmljQ29uZGl0aW9ucyksCiAgICAgICAgICBzaXplOiAic21hbGwiLAogICAgICAgICAgcGxhY2Vob2xkZXI6ICJTZWxlY3QgYSBjb25kaXRpb24iLAogICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKCRldmVudCkgewogICAgICAgICAgICByZXR1cm4gY2hhbmdlTGVnZW5kKF91bnJlZihMZWdlbmRPcHQpLkNPTkRJVElPTiwgJGV2ZW50LCBpbmRleCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgbnVsbCwgOCwgWyJ2YWx1ZSIsICJvcHRpb25zIiwgIm9uQ2hhbmdlIl0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9pbnB1dCwgewogICAgICAgICAgbW9kZWxWYWx1ZTogbWV0cmljLnZhbHVlLAogICAgICAgICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBmdW5jdGlvbiBvblVwZGF0ZU1vZGVsVmFsdWUoJGV2ZW50KSB7CiAgICAgICAgICAgIHJldHVybiBtZXRyaWMudmFsdWUgPSAkZXZlbnQ7CiAgICAgICAgICB9LAogICAgICAgICAgcGxhY2Vob2xkZXI6ICJQbGVhc2UgaW5wdXQgYSB2YWx1ZSIsCiAgICAgICAgICB0eXBlOiAibnVtYmVyIiwKICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZSgkZXZlbnQpIHsKICAgICAgICAgICAgcmV0dXJuIGNoYW5nZUxlZ2VuZChfdW5yZWYoTGVnZW5kT3B0KS5WQUxVRSwgJGV2ZW50LCBpbmRleCk7CiAgICAgICAgICB9LAogICAgICAgICAgc2l6ZTogInNtYWxsIiwKICAgICAgICAgIGNsYXNzOiAiaXRlbSIKICAgICAgICB9LCBudWxsLCA4LCBbIm1vZGVsVmFsdWUiLCAib25VcGRhdGU6bW9kZWxWYWx1ZSIsICJvbkNoYW5nZSJdKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgic3BhbiIsIG51bGwsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9JY29uLCB7CiAgICAgICAgICBjbGFzczogImNwIGRlbGV0ZSIsCiAgICAgICAgICBpY29uTmFtZTogInJlbW92ZV9jaXJjbGVfb3V0bGluZSIsCiAgICAgICAgICBzaXplOiAibWlkZGxlIiwKICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soJGV2ZW50KSB7CiAgICAgICAgICAgIHJldHVybiBkZWxldGVNZXRyaWMoaW5kZXgpOwogICAgICAgICAgfQogICAgICAgIH0sIG51bGwsIDgsIFsib25DbGljayJdKSwgX3dpdGhEaXJlY3RpdmVzKF9jcmVhdGVWTm9kZShfY29tcG9uZW50X0ljb24sIHsKICAgICAgICAgIGNsYXNzOiAiY3AiLAogICAgICAgICAgaWNvbk5hbWU6ICJhZGRfY2lyY2xlX291dGxpbmVjb250cm9sX3BvaW50IiwKICAgICAgICAgIHNpemU6ICJtaWRkbGUiLAogICAgICAgICAgb25DbGljazogYWRkTWV0cmljCiAgICAgICAgfSwgbnVsbCwgNTEyKSwgW1tfdlNob3csIGluZGV4ID09PSBfdW5yZWYobGVnZW5kKS5tZXRyaWMubGVuZ3RoIC0gMSAmJiBfdW5yZWYobGVnZW5kKS5tZXRyaWMubGVuZ3RoIDwgNV1dKV0pLCBfd2l0aERpcmVjdGl2ZXMoX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgbnVsbCwgIiYmIiwgNTEyKSwgW1tfdlNob3csIGluZGV4ICE9PSBfdW5yZWYobGVnZW5kKS5tZXRyaWMubGVuZ3RoIC0gMV1dKV0pOwogICAgICB9KSwgMTI4KSksIF9ob2lzdGVkXzEzLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9pbnB1dCwgewogICAgICAgIG1vZGVsVmFsdWU6IF91bnJlZihkZXNjcmlwdGlvbikuaGVhbHRoeSwKICAgICAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVszXSB8fCAoX2NhY2hlWzNdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgcmV0dXJuIF91bnJlZihkZXNjcmlwdGlvbikuaGVhbHRoeSA9ICRldmVudDsKICAgICAgICB9KSwKICAgICAgICBwbGFjZWhvbGRlcjogIlBsZWFzZSBpbnB1dCBkZXNjcmlwdGlvbiIsCiAgICAgICAgc2l6ZTogInNtYWxsIiwKICAgICAgICBjbGFzczogIm10LTUiCiAgICAgIH0sIG51bGwsIDgsIFsibW9kZWxWYWx1ZSJdKSwgX2hvaXN0ZWRfMTQsIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2lucHV0LCB7CiAgICAgICAgbW9kZWxWYWx1ZTogX3VucmVmKGRlc2NyaXB0aW9uKS51bmhlYWx0aHksCiAgICAgICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbNF0gfHwgKF9jYWNoZVs0XSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBfdW5yZWYoZGVzY3JpcHRpb24pLnVuaGVhbHRoeSA9ICRldmVudDsKICAgICAgICB9KSwKICAgICAgICBwbGFjZWhvbGRlcjogIlBsZWFzZSBpbnB1dCBkZXNjcmlwdGlvbiIsCiAgICAgICAgc2l6ZTogInNtYWxsIiwKICAgICAgICBjbGFzczogIm10LTUiCiAgICAgIH0sIG51bGwsIDgsIFsibW9kZWxWYWx1ZSJdKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfYnV0dG9uLCB7CiAgICAgICAgb25DbGljazogc2V0TGVnZW5kLAogICAgICAgIGNsYXNzOiAibGVnZW5kLWJ0biIsCiAgICAgICAgc2l6ZTogInNtYWxsIiwKICAgICAgICB0eXBlOiAicHJpbWFyeSIKICAgICAgfSwgewogICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBbX2NyZWF0ZVRleHRWTm9kZShfdG9EaXNwbGF5U3RyaW5nKF91bnJlZih0KSgic2V0TGVnZW5kIikpLCAxKV07CiAgICAgICAgfSksCiAgICAgICAgXzogMQogICAgICB9KV0sIDUxMiksIFtbX3ZTaG93LCBfdW5yZWYoaXNTZXJ2aWNlKV1dKV0sIDY0KTsKICAgIH07CiAgfQp9KTs="},null]}