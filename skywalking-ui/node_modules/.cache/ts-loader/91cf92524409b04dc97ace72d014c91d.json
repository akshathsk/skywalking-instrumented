{"remainingRequest":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/thread-loader/dist/cjs.js!/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/babel-loader/lib/index.js!/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/ts-loader/index.js??ref--15-3!/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/src/views/dashboard/related/network-profiling/components/ProcessTopology.vue?vue&type=script&lang=ts&setup=true","dependencies":[{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/src/views/dashboard/related/network-profiling/components/ProcessTopology.vue","mtime":1661850019000},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/babel.config.js","mtime":1661850018000},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/unplugin/dist/webpack/loaders/transform.js","mtime":1663881224252},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/unplugin/dist/webpack/loaders/transform.js","mtime":1663881224252},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/unplugin/dist/webpack/loaders/transform.js","mtime":1663881224252},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/unplugin/dist/webpack/loaders/transform.js","mtime":1663881224252},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/cache-loader/dist/cjs.js","mtime":1663881222784},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/thread-loader/dist/cjs.js","mtime":1663881222612},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/babel-loader/lib/index.js","mtime":1663881224500},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/ts-loader/index.js","mtime":1663881224684},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/cache-loader/dist/cjs.js","mtime":1663881222784},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/vue-loader-v16/dist/index.js","mtime":1663881224404}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvc2sxMTcvZmluYWwtcHJvamVjdC9hcGFjaGUtc2t5d2Fsa2luZy1hcG0tOS4yLjAvc2t5d2Fsa2luZy11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiL2hvbWUvc2sxMTcvZmluYWwtcHJvamVjdC9hcGFjaGUtc2t5d2Fsa2luZy1hcG0tOS4yLjAvc2t5d2Fsa2luZy11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvc2sxMTcvZmluYWwtcHJvamVjdC9hcGFjaGUtc2t5d2Fsa2luZy1hcG0tOS4yLjAvc2t5d2Fsa2luZy11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCB7IGRlZmluZUNvbXBvbmVudCBhcyBfZGVmaW5lQ29tcG9uZW50IH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIHVucmVmIGFzIF91bnJlZiwgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCB3aXRoQ3R4IGFzIF93aXRoQ3R4LCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCBjcmVhdGVFbGVtZW50QmxvY2sgYXMgX2NyZWF0ZUVsZW1lbnRCbG9jayB9IGZyb20gInZ1ZSI7CmltcG9ydCB7IHJlZiwgb25Nb3VudGVkLCB3YXRjaCB9IGZyb20gInZ1ZSI7CmltcG9ydCAqIGFzIGQzIGZyb20gImQzIjsKaW1wb3J0IHsgdXNlSTE4biB9IGZyb20gInZ1ZS1pMThuIjsKaW1wb3J0IHsgRWxNZXNzYWdlIH0gZnJvbSAiZWxlbWVudC1wbHVzIjsKaW1wb3J0IHJvdXRlciBmcm9tICJAL3JvdXRlciI7CmltcG9ydCB7IHVzZU5ldHdvcmtQcm9maWxpbmdTdG9yZSB9IGZyb20gIkAvc3RvcmUvbW9kdWxlcy9uZXR3b3JrLXByb2ZpbGluZyI7CmltcG9ydCB7IHVzZURhc2hib2FyZFN0b3JlIH0gZnJvbSAiQC9zdG9yZS9tb2R1bGVzL2Rhc2hib2FyZCI7CmltcG9ydCB7IHVzZVNlbGVjdG9yU3RvcmUgfSBmcm9tICJAL3N0b3JlL21vZHVsZXMvc2VsZWN0b3JzIjsKaW1wb3J0IGQzdGlwIGZyb20gImQzLXRpcCI7CmltcG9ydCB7IGxpbmtFbGVtZW50LCBhbmNob3JFbGVtZW50LCBhcnJvd01hcmtlciB9IGZyb20gIi4vR3JhcGgvbGlua1Byb2Nlc3MiOwppbXBvcnQgbm9kZUVsZW1lbnQgZnJvbSAiLi9HcmFwaC9ub2RlUHJvY2VzcyI7CmltcG9ydCB6b29tIGZyb20gIi4uLy4uL2NvbXBvbmVudHMvdXRpbHMvem9vbSI7CmltcG9ydCB7IHVzZVRocm90dGxlRm4gfSBmcm9tICJAdnVldXNlL2NvcmUiOwppbXBvcnQgU2V0dGluZ3MgZnJvbSAiLi9TZXR0aW5ncy52dWUiOwppbXBvcnQgeyBFbnRpdHlUeXBlIH0gZnJvbSAiQC92aWV3cy9kYXNoYm9hcmQvZGF0YSI7CmltcG9ydCBnZXREYXNoYm9hcmQgZnJvbSAiQC9ob29rcy91c2VEYXNoYm9hcmRzU2Vzc2lvbiI7CmltcG9ydCB7IExheW91dCB9IGZyb20gIi4vR3JhcGgvbGF5b3V0IjsKaW1wb3J0IFRpbWVMaW5lIGZyb20gIi4vVGltZUxpbmUudnVlIjsKaW1wb3J0IHsgdXNlQXBwU3RvcmVXaXRoT3V0IH0gZnJvbSAiQC9zdG9yZS9tb2R1bGVzL2FwcCI7Ci8qZ2xvYmFsIE51bGxhYmxlLCBkZWZpbmVQcm9wcyAqLwoKZXhwb3J0IGRlZmF1bHQgLyojX19QVVJFX18qL19kZWZpbmVDb21wb25lbnQoewogIHByb3BzOiB7CiAgICBjb25maWc6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZ3JhcGg6IHt9CiAgICAgICAgfTsKICAgICAgfQogICAgfQogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKF9fcHJvcHMpIHsKICAgIHZhciBwcm9wcyA9IF9fcHJvcHM7CgogICAgdmFyIF91c2VJMThuID0gdXNlSTE4bigpLAogICAgICAgIHQgPSBfdXNlSTE4bi50OwoKICAgIHZhciBhcHBTdG9yZSA9IHVzZUFwcFN0b3JlV2l0aE91dCgpOwogICAgdmFyIGRhc2hib2FyZFN0b3JlID0gdXNlRGFzaGJvYXJkU3RvcmUoKTsKICAgIHZhciBzZWxlY3RvclN0b3JlID0gdXNlU2VsZWN0b3JTdG9yZSgpOwogICAgdmFyIG5ldHdvcmtQcm9maWxpbmdTdG9yZSA9IHVzZU5ldHdvcmtQcm9maWxpbmdTdG9yZSgpOwogICAgdmFyIGhlaWdodCA9IHJlZigxMDApOwogICAgdmFyIHdpZHRoID0gcmVmKDEwMCk7CiAgICB2YXIgc3ZnID0gcmVmKG51bGwpOwogICAgdmFyIGNoYXJ0ID0gcmVmKG51bGwpOwogICAgdmFyIHRpcCA9IHJlZihudWxsKTsKICAgIHZhciBncmFwaCA9IHJlZihudWxsKTsKICAgIHZhciBub2RlID0gcmVmKG51bGwpOwogICAgdmFyIGxpbmsgPSByZWYobnVsbCk7CiAgICB2YXIgYW5jaG9yID0gcmVmKG51bGwpOwogICAgdmFyIGFycm93ID0gcmVmKG51bGwpOwogICAgdmFyIG9sZFZhbCA9IHJlZih7CiAgICAgIHdpZHRoOiAwLAogICAgICBoZWlnaHQ6IDAKICAgIH0pOwogICAgdmFyIGNvbmZpZyA9IHJlZihwcm9wcy5jb25maWcgfHwge30pOwogICAgdmFyIGRpZmYgPSByZWYoWzIyMCwgMjAwXSk7CiAgICB2YXIgcmFkaXVzID0gMjEwOwogICAgdmFyIGRhdGVzID0gcmVmKG51bGwpOwogICAgb25Nb3VudGVkKGZ1bmN0aW9uICgpIHsKICAgICAgaW5pdCgpOwogICAgICBvbGRWYWwudmFsdWUgPSBjaGFydC52YWx1ZSAmJiBjaGFydC52YWx1ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSB8fCB7CiAgICAgICAgd2lkdGg6IDAsCiAgICAgICAgaGVpZ2h0OiAwCiAgICAgIH07CiAgICB9KTsKCiAgICBmdW5jdGlvbiBpbml0KCkgewogICAgICByZXR1cm4gX2luaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBfaW5pdCgpIHsKICAgICAgX2luaXQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3ZnLnZhbHVlID0gZDMuc2VsZWN0KGNoYXJ0LnZhbHVlKS5hcHBlbmQoInN2ZyIpLmF0dHIoImNsYXNzIiwgInByb2Nlc3Mtc3ZnIik7CgogICAgICAgICAgICAgICAgaWYgKG5ldHdvcmtQcm9maWxpbmdTdG9yZS5ub2Rlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBkcmF3R3JhcGgoKTsKICAgICAgICAgICAgICAgIGNyZWF0ZUxheW91dCgpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwogICAgICByZXR1cm4gX2luaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkcmF3R3JhcGgoKSB7CiAgICAgIHZhciBfY2hhcnQkdmFsdWU7CgogICAgICB2YXIgZG9tID0gKChfY2hhcnQkdmFsdWUgPSBjaGFydC52YWx1ZSkgPT09IG51bGwgfHwgX2NoYXJ0JHZhbHVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2hhcnQkdmFsdWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpIHx8IHsKICAgICAgICBoZWlnaHQ6IDIwLAogICAgICAgIHdpZHRoOiAwCiAgICAgIH07CiAgICAgIGhlaWdodC52YWx1ZSA9IChkb20uaGVpZ2h0IHx8IDQwKSAtIDIwOwogICAgICB3aWR0aC52YWx1ZSA9IGRvbS53aWR0aDsKICAgICAgc3ZnLnZhbHVlLmF0dHIoImhlaWdodCIsIGhlaWdodC52YWx1ZSkuYXR0cigid2lkdGgiLCB3aWR0aC52YWx1ZSk7CiAgICAgIHRpcC52YWx1ZSA9IGQzdGlwKCkuYXR0cigiY2xhc3MiLCAiZDMtdGlwIikub2Zmc2V0KFstOCwgMF0pOwogICAgICBkaWZmLnZhbHVlWzBdID0gKGRvbS53aWR0aCAtIHJhZGl1cyAqIDIpIC8gMiArIHJhZGl1czsKICAgICAgZ3JhcGgudmFsdWUgPSBzdmcudmFsdWUuYXBwZW5kKCJnIikuYXR0cigiY2xhc3MiLCAic3ZnLWdyYXBoIikuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiLmNvbmNhdChkaWZmLnZhbHVlWzBdLCAiLCAiKS5jb25jYXQoZGlmZi52YWx1ZVsxXSwgIikiKSk7CiAgICAgIGdyYXBoLnZhbHVlLmNhbGwodGlwLnZhbHVlKTsKICAgICAgbm9kZS52YWx1ZSA9IGdyYXBoLnZhbHVlLmFwcGVuZCgiZyIpLnNlbGVjdEFsbCgiLnRvcG8tbm9kZSIpOwogICAgICBsaW5rLnZhbHVlID0gZ3JhcGgudmFsdWUuYXBwZW5kKCJnIikuc2VsZWN0QWxsKCIudG9wby1jYWxsIik7CiAgICAgIGFuY2hvci52YWx1ZSA9IGdyYXBoLnZhbHVlLmFwcGVuZCgiZyIpLnNlbGVjdEFsbCgiLnRvcG8tbGluZS1hbmNob3IiKTsKICAgICAgYXJyb3cudmFsdWUgPSBncmFwaC52YWx1ZS5hcHBlbmQoImciKS5zZWxlY3RBbGwoIi50b3BvLWxpbmUtYXJyb3ciKTsKICAgICAgc3ZnLnZhbHVlLmNhbGwoem9vbShkMywgZ3JhcGgudmFsdWUsIGRpZmYudmFsdWUpKTsKICAgICAgc3ZnLnZhbHVlLm9uKCJjbGljayIsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgbmV0d29ya1Byb2ZpbGluZ1N0b3JlLnNldE5vZGUobnVsbCk7CiAgICAgICAgbmV0d29ya1Byb2ZpbGluZ1N0b3JlLnNldExpbmsobnVsbCk7CiAgICAgICAgZGFzaGJvYXJkU3RvcmUuc2VsZWN0V2lkZ2V0KHByb3BzLmNvbmZpZyk7CiAgICAgIH0pOwogICAgICB1c2VUaHJvdHRsZUZuKHJlc2l6ZSwgNTAwKSgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGhleEdyaWQoKSB7CiAgICAgIHZhciBuID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAxOwogICAgICB2YXIgcmFkaXVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAxOwogICAgICB2YXIgb3JpZ2luID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBbMCwgMF07CiAgICAgIHZhciB4LCB5LCB5biwgcDsKICAgICAgdmFyIGdMYXlvdXQgPSBuZXcgTGF5b3V0KHJhZGl1cywgb3JpZ2luKTsKICAgICAgdmFyIHBvcyA9IFtdOwoKICAgICAgZm9yICh4ID0gLW47IHggPD0gbjsgeCsrKSB7CiAgICAgICAgeSA9IE1hdGgubWF4KC1uLCAteCAtIG4pOyAvLyAwCgogICAgICAgIHluID0gTWF0aC5taW4obiwgLXggKyBuKTsgLy8gMQoKICAgICAgICBmb3IgKHk7IHkgPD0geW47IHkrKykgewogICAgICAgICAgcCA9IGdMYXlvdXQuYXhpYWxUb1BpeGVsKHgsIHkpOwogICAgICAgICAgcG9zLnB1c2gocCk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcG9zOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZVBvbHlnb24ocmFkaXVzKSB7CiAgICAgIHZhciBzaWRlcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogNjsKICAgICAgdmFyIG9mZnNldCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogMDsKICAgICAgdmFyIHBvbHkgPSBbXTsKICAgICAgdmFyIGksIHJhZDsKCiAgICAgIGZvciAoaSA9IDA7IGkgPCBzaWRlczsgaSsrKSB7CiAgICAgICAgcmFkID0gTWF0aC5QSSAqIDIgKiAoaSAvIHNpZGVzKTsKICAgICAgICBwb2x5LnB1c2goW01hdGguY29zKHJhZCArIG9mZnNldCkgKiByYWRpdXMsIE1hdGguc2luKHJhZCArIG9mZnNldCkgKiByYWRpdXNdKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHBvbHk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0Q2lyY2xlUG9pbnQocmFkaXVzKSB7CiAgICAgIHZhciBwID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAxOwogICAgICB2YXIgZGF0YSA9IFtdOwogICAgICB2YXIgb3JpZ2luID0gWzAsIDBdOwoKICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IDM2MDsgaW5kZXggPSBpbmRleCArIHApIHsKICAgICAgICBpZiAoaW5kZXggPCAyMzAgfHwgaW5kZXggPiAzMTApIHsKICAgICAgICAgIHZhciB4ID0gcmFkaXVzICogTWF0aC5jb3MoTWF0aC5QSSAqIDIgKiBpbmRleCAvIDM2MCk7CiAgICAgICAgICB2YXIgeSA9IHJhZGl1cyAqIE1hdGguc2luKE1hdGguUEkgKiAyICogaW5kZXggLyAzNjApOwogICAgICAgICAgZGF0YS5wdXNoKFt4ICsgb3JpZ2luWzBdLCB5ICsgb3JpZ2luWzFdXSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gZGF0YTsKICAgIH0KCiAgICBmdW5jdGlvbiBjcmVhdGVMYXlvdXQoKSB7CiAgICAgIGlmICghbm9kZS52YWx1ZSB8fCAhbGluay52YWx1ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGRvbSA9IGNoYXJ0LnZhbHVlICYmIGNoYXJ0LnZhbHVlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIHx8IHsKICAgICAgICB3aWR0aDogMCwKICAgICAgICBoZWlnaHQ6IDAKICAgICAgfTsKCiAgICAgIGlmIChpc05hTihkb20ud2lkdGgpIHx8IGRvbS53aWR0aCA8IDEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBwID0gewogICAgICAgIGNvdW50OiAxLAogICAgICAgIHJhZGl1czogcmFkaXVzIC8vIGxheW91dCBoZXhhZ29ucyByYWRpdXMgMzAwCgogICAgICB9OwogICAgICB2YXIgcG9seWdvbiA9IGNyZWF0ZVBvbHlnb24ocC5yYWRpdXMsIDYsIDApOwogICAgICB2YXIgb3JpZ2luID0gWzAsIDBdOwogICAgICB2YXIgdmVydGljZXMgPSBbXTsgLy8gYSBoZXhhZ29uIHZlcnRpY2VzCgogICAgICBmb3IgKHZhciB2ID0gMDsgdiA8IHBvbHlnb24ubGVuZ3RoOyB2KyspIHsKICAgICAgICB2ZXJ0aWNlcy5wdXNoKFtvcmlnaW5bMF0gKyBwb2x5Z29uW3ZdWzBdLCBvcmlnaW5bMV0gKyBwb2x5Z29uW3ZdWzFdXSk7CiAgICAgIH0KCiAgICAgIHZhciBsaW5lUGF0aCA9IGQzLmxpbmUoKTsKICAgICAgbGluZVBhdGguY3VydmUoZDMuY3VydmVMaW5lYXJDbG9zZWQpOwogICAgICB2YXIgaGV4UG9seWdvbiA9IGdyYXBoLnZhbHVlLmFwcGVuZCgiZyIpOwogICAgICBoZXhQb2x5Z29uLmFwcGVuZCgicGF0aCIpLmF0dHIoImQiLCBsaW5lUGF0aCh2ZXJ0aWNlcykpLmF0dHIoInN0cm9rZSIsICIjRDVEREY2IikuYXR0cigic3Ryb2tlLXdpZHRoIiwgMikuc3R5bGUoImZpbGwiLCAibm9uZSIpOwogICAgICBoZXhQb2x5Z29uLmFwcGVuZCgidGV4dCIpLmF0dHIoImZpbGwiLCAiIzAwMCIpLmF0dHIoInRleHQtYW5jaG9yIiwgIm1pZGRsZSIpLmF0dHIoIngiLCAwKS5hdHRyKCJ5IiwgcC5yYWRpdXMgLSAxNSkudGV4dChmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHNlbGVjdG9yU3RvcmUuY3VycmVudFBvZC5sYWJlbDsKICAgICAgfSk7CiAgICAgIHZhciBub2RlQXJyID0gbmV0d29ya1Byb2ZpbGluZ1N0b3JlLm5vZGVzLmZpbHRlcihmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBkLmlzUmVhbCB8fCBkLm5hbWUgPT09ICJVTktOT1dOX0xPQ0FMIjsKICAgICAgfSk7CiAgICAgIHZhciBjb3VudCA9IG5vZGVBcnIubGVuZ3RoOyAvLyBsYXlvdXQKCiAgICAgIHZhciBjZW50ZXJzID0gaGV4R3JpZChwLmNvdW50LCA2OCwgb3JpZ2luKTsgLy8gY3ViZSBjZW50ZXJzCgogICAgICB2YXIgY3ViZUNlbnRlcnMgPSBbXTsKCiAgICAgIGlmIChjb3VudCA+IDcpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNlbnRlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIC8vIGNvbnN0IHBvbHlnb24gPSBjcmVhdGVQb2x5Z29uKDY4LCA2LCAwKTsKICAgICAgICAgIC8vIGNvbnN0IHZlcnRpY2VzOiBhbnkgPSBbXTsgLy8gYSBoZXhhZ29uIHZlcnRpY2VzCiAgICAgICAgICAvLyBmb3IgKGxldCB2ID0gMDsgdiA8IHBvbHlnb24ubGVuZ3RoOyB2KyspIHsKICAgICAgICAgIC8vICAgdmVydGljZXMucHVzaChbCiAgICAgICAgICAvLyAgICAgY2VudGVyc1tpXVswXSArIHBvbHlnb25bdl1bMF0sCiAgICAgICAgICAvLyAgICAgY2VudGVyc1tpXVsxXSArIHBvbHlnb25bdl1bMV0sCiAgICAgICAgICAvLyAgIF0pOwogICAgICAgICAgLy8gfQogICAgICAgICAgLy8gY29uc3QgbGluZVBhdGggPSBkMy5saW5lKCk7CiAgICAgICAgICAvLyBsaW5lUGF0aC5jdXJ2ZShkMy5jdXJ2ZUxpbmVhckNsb3NlZCk7CiAgICAgICAgICAvLyBncmFwaC52YWx1ZQogICAgICAgICAgLy8gICAuYXBwZW5kKCJwYXRoIikKICAgICAgICAgIC8vICAgLmF0dHIoImQiLCBsaW5lUGF0aCh2ZXJ0aWNlcykpCiAgICAgICAgICAvLyAgIC5hdHRyKCJzdHJva2UiLCAiI2NjYyIpCiAgICAgICAgICAvLyAgIC5hdHRyKCJzdHJva2Utd2lkdGgiLCAxKQogICAgICAgICAgLy8gICAuc3R5bGUoImZpbGwiLCAibm9uZSIpOwogICAgICAgICAgdmFyIGMgPSBoZXhHcmlkKDEsIDIwLCBjZW50ZXJzW2ldKTsKCiAgICAgICAgICBpZiAoY291bnQgPCAxNSkgewogICAgICAgICAgICBjID0gW2NbMF0sIGNbNV1dOwogICAgICAgICAgfSBlbHNlIGlmIChjb3VudCA8IDIyKSB7CiAgICAgICAgICAgIGMgPSBbY1swXSwgY1syXSwgY1s1XV07CiAgICAgICAgICB9CgogICAgICAgICAgY3ViZUNlbnRlcnMucHVzaC5hcHBseShjdWJlQ2VudGVycywgX3RvQ29uc3VtYWJsZUFycmF5KGMpKTsKICAgICAgICB9CgogICAgICAgIHNodWZmbGVBcnJheShjdWJlQ2VudGVycyk7CiAgICAgIH0gLy8gZm9yIChsZXQgaSA9IDA7IGkgPCBjdWJlQ2VudGVycy5sZW5ndGg7IGkrKykgewogICAgICAvLyAgIGNvbnN0IHBvbHlnb24gPSBjcmVhdGVQb2x5Z29uKDIwLCA2LCAwKTsKICAgICAgLy8gICBjb25zdCB2ZXJ0aWNlczogYW55ID0gW107IC8vIGEgaGV4YWdvbiB2ZXJ0aWNlcwogICAgICAvLyAgIGZvciAobGV0IHYgPSAwOyB2IDwgcG9seWdvbi5sZW5ndGg7IHYrKykgewogICAgICAvLyAgICAgdmVydGljZXMucHVzaChbCiAgICAgIC8vICAgICAgIGN1YmVDZW50ZXJzW2ldWzBdICsgcG9seWdvblt2XVswXSwKICAgICAgLy8gICAgICAgY3ViZUNlbnRlcnNbaV1bMV0gKyBwb2x5Z29uW3ZdWzFdLAogICAgICAvLyAgICAgXSk7CiAgICAgIC8vICAgfQogICAgICAvLyAgIGNvbnN0IGxpbmVQYXRoID0gZDMubGluZSgpOwogICAgICAvLyAgIGxpbmVQYXRoLmN1cnZlKGQzLmN1cnZlTGluZWFyQ2xvc2VkKTsKICAgICAgLy8gICBncmFwaC52YWx1ZQogICAgICAvLyAgICAgLmFwcGVuZCgicGF0aCIpCiAgICAgIC8vICAgICAuYXR0cigiZCIsIGxpbmVQYXRoKHZlcnRpY2VzKSkKICAgICAgLy8gICAgIC5hdHRyKCJzdHJva2UiLCAiI2NjYyIpCiAgICAgIC8vICAgICAuYXR0cigic3Ryb2tlLXdpZHRoIiwgMSkKICAgICAgLy8gICAgIC5zdHlsZSgiZmlsbCIsICJub25lIik7CiAgICAgIC8vIH0KCgogICAgICB2YXIgY3ViZXMgPSBjb3VudCA+IDcgPyBjdWJlQ2VudGVycyA6IGNlbnRlcnM7CgogICAgICBmb3IgKHZhciBfdiA9IDA7IF92IDwgY291bnQ7IF92KyspIHsKICAgICAgICB2YXIgeCA9IGN1YmVzW192XVswXTsKICAgICAgICB2YXIgeSA9IGN1YmVzW192XVsxXTsKICAgICAgICBub2RlQXJyW192XS54ID0geDsKICAgICAgICBub2RlQXJyW192XS55ID0geTsKICAgICAgfQoKICAgICAgdmFyIG91dE5vZGVzID0gbmV0d29ya1Byb2ZpbGluZ1N0b3JlLm5vZGVzLmZpbHRlcihmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiAhKGQuaXNSZWFsIHx8IGQubmFtZSA9PT0gIlVOS05PV05fTE9DQUwiKTsKICAgICAgfSk7CiAgICAgIHZhciBpbnRlcnZhbCA9IDMwOwogICAgICB2YXIgciA9IDI1MDsKICAgICAgdmFyIHBvaW50QXJyID0gZ2V0Q2lyY2xlUG9pbnQociwgaW50ZXJ2YWwpOwoKICAgICAgZm9yICh2YXIgX3YyID0gMDsgX3YyIDwgb3V0Tm9kZXMubGVuZ3RoOyBfdjIrKykgewogICAgICAgIGlmICghcG9pbnRBcnJbX3YyXSkgewogICAgICAgICAgciA9IHIgKyA4MDsKICAgICAgICAgIHBvaW50QXJyID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShwb2ludEFyciksIF90b0NvbnN1bWFibGVBcnJheShnZXRDaXJjbGVQb2ludChyLCBpbnRlcnZhbCkpKTsKICAgICAgICB9CgogICAgICAgIG91dE5vZGVzW192Ml0ueCA9IHBvaW50QXJyW192Ml1bMF07CiAgICAgICAgb3V0Tm9kZXNbX3YyXS55ID0gcG9pbnRBcnJbX3YyXVsxXTsKICAgICAgfQoKICAgICAgZHJhd1RvcG9sb2d5KFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkobm9kZUFyciksIF90b0NvbnN1bWFibGVBcnJheShvdXROb2RlcykpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkcmF3VG9wb2xvZ3kobm9kZUFycikgewogICAgICBub2RlLnZhbHVlID0gbm9kZS52YWx1ZS5kYXRhKG5vZGVBcnIsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGQuaWQ7CiAgICAgIH0pOwogICAgICBub2RlLnZhbHVlLmV4aXQoKS5yZW1vdmUoKTsKICAgICAgbm9kZS52YWx1ZSA9IG5vZGVFbGVtZW50KGQzLCBub2RlLnZhbHVlLmVudGVyKCksIHsKICAgICAgICB0aXBIdG1sOiBmdW5jdGlvbiB0aXBIdG1sKGRhdGEpIHsKICAgICAgICAgIHJldHVybiAiIDxkaXYgY2xhc3M9XCJtYi01XCI+PHNwYW4gY2xhc3M9XCJncmV5XCI+bmFtZTogPC9zcGFuPiIuY29uY2F0KGRhdGEubmFtZSwgIjwvZGl2PiIpOwogICAgICAgIH0KICAgICAgfSwgdGlwLnZhbHVlKS5tZXJnZShub2RlLnZhbHVlKTsgLy8gbGluZSBlbGVtZW50CgogICAgICB2YXIgb2JqID0ge307CiAgICAgIHZhciBjYWxscyA9IG5ldHdvcmtQcm9maWxpbmdTdG9yZS5jYWxscy5yZWR1Y2UoZnVuY3Rpb24gKHByZXYsIG5leHQpIHsKICAgICAgICBpZiAob2JqW25leHQudGFyZ2V0SWQgKyBuZXh0LnNvdXJjZUlkXSkgewogICAgICAgICAgbmV4dC5sb3dlckFyYyA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICBvYmpbbmV4dC5zb3VyY2VJZCArIG5leHQudGFyZ2V0SWRdID0gdHJ1ZTsKICAgICAgICBwcmV2LnB1c2gobmV4dCk7CiAgICAgICAgcmV0dXJuIHByZXY7CiAgICAgIH0sIFtdKTsKICAgICAgbGluay52YWx1ZSA9IGxpbmsudmFsdWUuZGF0YShjYWxscywgZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gZC5pZDsKICAgICAgfSk7CiAgICAgIGxpbmsudmFsdWUuZXhpdCgpLnJlbW92ZSgpOwogICAgICBsaW5rLnZhbHVlID0gbGlua0VsZW1lbnQobGluay52YWx1ZS5lbnRlcigpKS5tZXJnZShsaW5rLnZhbHVlKTsKICAgICAgYW5jaG9yLnZhbHVlID0gYW5jaG9yLnZhbHVlLmRhdGEoY2FsbHMsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGQuaWQ7CiAgICAgIH0pOwogICAgICBhbmNob3IudmFsdWUuZXhpdCgpLnJlbW92ZSgpOwogICAgICBhbmNob3IudmFsdWUgPSBhbmNob3JFbGVtZW50KGFuY2hvci52YWx1ZS5lbnRlcigpLCB7CiAgICAgICAgaGFuZGxlTGlua0NsaWNrOiBoYW5kbGVMaW5rQ2xpY2ssCiAgICAgICAgdGlwSHRtbDogZnVuY3Rpb24gdGlwSHRtbChkYXRhKSB7CiAgICAgICAgICB2YXIgdHlwZXMgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGRhdGEuc291cmNlQ29tcG9uZW50cyksIF90b0NvbnN1bWFibGVBcnJheShkYXRhLnRhcmdldENvbXBvbmVudHMpKTsKICAgICAgICAgIHZhciBsID0gIlRDUCI7CgogICAgICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCJodHRwcyIpKSB7CiAgICAgICAgICAgIGwgPSAiSFRUUFMiOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0eXBlcy5pbmNsdWRlcygiaHR0cCIpKSB7CiAgICAgICAgICAgIGwgPSAiSFRUUCI7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCJ0bHMiKSkgewogICAgICAgICAgICBsID0gIlRMUyI7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGh0bWwgPSAiPGRpdj48c3BhbiBjbGFzcz1cImdyZXlcIj4iLmNvbmNhdCh0KCJkZXRlY3RQb2ludCIpLCAiOiA8L3NwYW4+IikuY29uY2F0KGRhdGEuZGV0ZWN0UG9pbnRzLmpvaW4oIiB8ICIpLCAiPC9kaXY+XG4gICAgICAgIDxkaXY+PHNwYW4gY2xhc3M9XCJncmV5XCI+VHlwZTogPC9zcGFuPiIpLmNvbmNhdChsLCAiPC9kaXY+Iik7CiAgICAgICAgICByZXR1cm4gaHRtbDsKICAgICAgICB9CiAgICAgIH0sIHRpcC52YWx1ZSkubWVyZ2UoYW5jaG9yLnZhbHVlKTsgLy8gYXJyb3cgbWFya2VyCgogICAgICBhcnJvdy52YWx1ZSA9IGFycm93LnZhbHVlLmRhdGEoY2FsbHMsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGQuaWQ7CiAgICAgIH0pOwogICAgICBhcnJvdy52YWx1ZS5leGl0KCkucmVtb3ZlKCk7CiAgICAgIGFycm93LnZhbHVlID0gYXJyb3dNYXJrZXIoYXJyb3cudmFsdWUuZW50ZXIoKSkubWVyZ2UoYXJyb3cudmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNodWZmbGVBcnJheShhcnJheSkgewogICAgICBmb3IgKHZhciBpID0gYXJyYXkubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkgewogICAgICAgIHZhciBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7CiAgICAgICAgdmFyIF9yZWYgPSBbYXJyYXlbal0sIGFycmF5W2ldXTsKICAgICAgICBhcnJheVtpXSA9IF9yZWZbMF07CiAgICAgICAgYXJyYXlbal0gPSBfcmVmWzFdOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gaGFuZGxlTGlua0NsaWNrKGV2ZW50LCBkKSB7CiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICBuZXR3b3JrUHJvZmlsaW5nU3RvcmUuc2V0Tm9kZShudWxsKTsKICAgICAgbmV0d29ya1Byb2ZpbGluZ1N0b3JlLnNldExpbmsoZCk7CgogICAgICBpZiAoIWNvbmZpZy52YWx1ZS5saW5rRGFzaGJvYXJkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgX2dldERhc2hib2FyZCA9IGdldERhc2hib2FyZCh7CiAgICAgICAgbmFtZTogY29uZmlnLnZhbHVlLmxpbmtEYXNoYm9hcmQsCiAgICAgICAgbGF5ZXI6IGRhc2hib2FyZFN0b3JlLmxheWVySWQsCiAgICAgICAgZW50aXR5OiBFbnRpdHlUeXBlWzddLnZhbHVlCiAgICAgIH0pLAogICAgICAgICAgZGFzaGJvYXJkID0gX2dldERhc2hib2FyZC5kYXNoYm9hcmQ7CgogICAgICBpZiAoIWRhc2hib2FyZCkgewogICAgICAgIEVsTWVzc2FnZS5lcnJvcigiVGhlIGRhc2hib2FyZCBuYW1lZCAiLmNvbmNhdChjb25maWcudmFsdWUubGlua0Rhc2hib2FyZCwgIiBkb2Vzbid0IGV4aXN0IikpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHRpbWVzID0ge307CgogICAgICBpZiAoZGF0ZXMudmFsdWUpIHsKICAgICAgICB0aW1lcyA9IGRhdGVzLnZhbHVlOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBfbmV0d29ya1Byb2ZpbGluZ1N0b3IgPSBuZXR3b3JrUHJvZmlsaW5nU3RvcmUuc2VsZWN0ZWROZXR3b3JrVGFzaywKICAgICAgICAgICAgdGFza1N0YXJ0VGltZSA9IF9uZXR3b3JrUHJvZmlsaW5nU3Rvci50YXNrU3RhcnRUaW1lLAogICAgICAgICAgICBmaXhlZFRyaWdnZXJEdXJhdGlvbiA9IF9uZXR3b3JrUHJvZmlsaW5nU3Rvci5maXhlZFRyaWdnZXJEdXJhdGlvbjsKICAgICAgICB2YXIgc3RhcnRUaW1lID0gZml4ZWRUcmlnZ2VyRHVyYXRpb24gPiAxODAwID8gdGFza1N0YXJ0VGltZSArIGZpeGVkVHJpZ2dlckR1cmF0aW9uICogMTAwMCAtIDMwICogNjAgKiAxMDAwIDogdGFza1N0YXJ0VGltZTsKICAgICAgICB0aW1lcyA9IHsKICAgICAgICAgIHN0YXJ0OiBzdGFydFRpbWUsCiAgICAgICAgICBlbmQ6IHRhc2tTdGFydFRpbWUgKyBmaXhlZFRyaWdnZXJEdXJhdGlvbiAqIDEwMDAKICAgICAgICB9OwogICAgICB9CgogICAgICB2YXIgcGFyYW0gPSBKU09OLnN0cmluZ2lmeShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRpbWVzKSwge30sIHsKICAgICAgICBzdGVwOiBhcHBTdG9yZS5kdXJhdGlvbi5zdGVwLAogICAgICAgIHV0YzogYXBwU3RvcmUudXRjCiAgICAgIH0pKTsKICAgICAgdmFyIHBhdGggPSAiL2Rhc2hib2FyZC8iLmNvbmNhdChkYXNoYm9hcmQubGF5ZXIsICIvIikuY29uY2F0KEVudGl0eVR5cGVbN10udmFsdWUsICIvIikuY29uY2F0KGQuc291cmNlLnNlcnZpY2VJZCwgIi8iKS5jb25jYXQoZC5zb3VyY2Uuc2VydmljZUluc3RhbmNlSWQsICIvIikuY29uY2F0KGQuc291cmNlLmlkLCAiLyIpLmNvbmNhdChkLnRhcmdldC5zZXJ2aWNlSWQsICIvIikuY29uY2F0KGQudGFyZ2V0LnNlcnZpY2VJbnN0YW5jZUlkLCAiLyIpLmNvbmNhdChkLnRhcmdldC5pZCwgIi8iKS5jb25jYXQoZGFzaGJvYXJkLm5hbWUsICIvZHVyYXRpb24vIikuY29uY2F0KHBhcmFtKTsKICAgICAgdmFyIHJvdXRlVXJsID0gcm91dGVyLnJlc29sdmUoewogICAgICAgIHBhdGg6IHBhdGgKICAgICAgfSk7CiAgICAgIHdpbmRvdy5vcGVuKHJvdXRlVXJsLmhyZWYsICJfYmxhbmsiKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVTZXR0aW5ncyhwYXJhbSkgewogICAgICBjb25maWcudmFsdWUgPSBwYXJhbTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRDb25maWcoKSB7CiAgICAgIGRhc2hib2FyZFN0b3JlLnNlbGVjdFdpZGdldChwcm9wcy5jb25maWcpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldERhdGVzKHRpbWVzKSB7CiAgICAgIGRhdGVzLnZhbHVlID0gdGltZXM7CiAgICB9CgogICAgZnVuY3Rpb24gcmVzaXplKCkgewogICAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoZnVuY3Rpb24gKGVudHJpZXMpIHsKICAgICAgICB2YXIgZW50cnkgPSBlbnRyaWVzWzBdOwogICAgICAgIHZhciBjciA9IGVudHJ5LmNvbnRlbnRSZWN0OwoKICAgICAgICBpZiAoTWF0aC5hYnMoY3Iud2lkdGggLSBvbGRWYWwudmFsdWUud2lkdGgpIDwgNSAmJiBNYXRoLmFicyhjci5oZWlnaHQgLSBvbGRWYWwudmFsdWUuaGVpZ2h0KSA8IDUpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGZyZXNoTm9kZXMoKTsKICAgICAgICBvbGRWYWwudmFsdWUgPSB7CiAgICAgICAgICB3aWR0aDogY3Iud2lkdGgsCiAgICAgICAgICBoZWlnaHQ6IGNyLmhlaWdodAogICAgICAgIH07CiAgICAgIH0pOwoKICAgICAgaWYgKGNoYXJ0LnZhbHVlKSB7CiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShjaGFydC52YWx1ZSk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBmcmVzaE5vZGVzKCkgewogICAgICByZXR1cm4gX2ZyZXNoTm9kZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBfZnJlc2hOb2RlcygpIHsKICAgICAgX2ZyZXNoTm9kZXMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBzdmcudmFsdWUuc2VsZWN0QWxsKCIuc3ZnLWdyYXBoIikucmVtb3ZlKCk7CgogICAgICAgICAgICAgICAgaWYgKG5ldHdvcmtQcm9maWxpbmdTdG9yZS5ub2Rlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGRyYXdHcmFwaCgpOwogICAgICAgICAgICAgICAgY3JlYXRlTGF5b3V0KCk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKTsKICAgICAgcmV0dXJuIF9mcmVzaE5vZGVzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgd2F0Y2goZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gbmV0d29ya1Byb2ZpbGluZ1N0b3JlLm5vZGVzOwogICAgfSwgZnVuY3Rpb24gKCkgewogICAgICBmcmVzaE5vZGVzKCk7CiAgICB9KTsKICAgIHJldHVybiBmdW5jdGlvbiAoX2N0eCwgX2NhY2hlKSB7CiAgICAgIHZhciBfY29tcG9uZW50X0ljb24gPSBfcmVzb2x2ZUNvbXBvbmVudCgiSWNvbiIpOwoKICAgICAgdmFyIF9jb21wb25lbnRfZWxfcG9wb3ZlciA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1wb3BvdmVyIik7CgogICAgICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKF9GcmFnbWVudCwgbnVsbCwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIHsKICAgICAgICByZWZfa2V5OiAiY2hhcnQiLAogICAgICAgIHJlZjogY2hhcnQsCiAgICAgICAgY2xhc3M6ICJwcm9jZXNzLXRvcG8iCiAgICAgIH0sIG51bGwsIDUxMiksIF91bnJlZihkYXNoYm9hcmRTdG9yZSkuZWRpdE1vZGUgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX2NvbXBvbmVudF9lbF9wb3BvdmVyLCB7CiAgICAgICAga2V5OiAwLAogICAgICAgIHBsYWNlbWVudDogImJvdHRvbSIsCiAgICAgICAgd2lkdGg6IDI5NSwKICAgICAgICB0cmlnZ2VyOiAiY2xpY2siCiAgICAgIH0sIHsKICAgICAgICByZWZlcmVuY2U6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgewogICAgICAgICAgICBjbGFzczogInN3aXRjaC1pY29uLWVkaXQgbWwtNSIsCiAgICAgICAgICAgIHRpdGxlOiAiU2V0dGluZ3MiLAogICAgICAgICAgICBvbkNsaWNrOiBzZXRDb25maWcKICAgICAgICAgIH0sIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9JY29uLCB7CiAgICAgICAgICAgIHNpemU6ICJtaWRkbGUiLAogICAgICAgICAgICBpY29uTmFtZTogInNldHRpbmdfZW1wdHkiCiAgICAgICAgICB9KV0pXTsKICAgICAgICB9KSwKICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gW19jcmVhdGVWTm9kZShTZXR0aW5ncywgewogICAgICAgICAgICBvblVwZGF0ZTogdXBkYXRlU2V0dGluZ3MKICAgICAgICAgIH0pXTsKICAgICAgICB9KSwKICAgICAgICBfOiAxCiAgICAgIH0pKSA6IF9jcmVhdGVDb21tZW50Vk5vZGUoIiIsIHRydWUpLCBfY3JlYXRlVk5vZGUoVGltZUxpbmUsIHsKICAgICAgICBvbkdldDogZ2V0RGF0ZXMKICAgICAgfSldLCA2NCk7CiAgICB9OwogIH0KfSk7"},null]}