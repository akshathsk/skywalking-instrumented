{"remainingRequest":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/thread-loader/dist/cjs.js!/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/babel-loader/lib/index.js!/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/ts-loader/index.js??ref--15-3!/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/src/views/dashboard/related/topology/components/Settings.vue?vue&type=script&lang=ts&setup=true","dependencies":[{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/src/views/dashboard/related/topology/components/Settings.vue","mtime":1661850019000},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/babel.config.js","mtime":1661850018000},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/unplugin/dist/webpack/loaders/transform.js","mtime":1663881224252},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/unplugin/dist/webpack/loaders/transform.js","mtime":1663881224252},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/unplugin/dist/webpack/loaders/transform.js","mtime":1663881224252},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/unplugin/dist/webpack/loaders/transform.js","mtime":1663881224252},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/cache-loader/dist/cjs.js","mtime":1663881222784},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/thread-loader/dist/cjs.js","mtime":1663881222612},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/babel-loader/lib/index.js","mtime":1663881224500},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/ts-loader/index.js","mtime":1663881224684},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/cache-loader/dist/cjs.js","mtime":1663881222784},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/vue-loader-v16/dist/index.js","mtime":1663881224404}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvc2sxMTcvZmluYWwtcHJvamVjdC9hcGFjaGUtc2t5d2Fsa2luZy1hcG0tOS4yLjAvc2t5d2Fsa2luZy11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS9zazExNy9maW5hbC1wcm9qZWN0L2FwYWNoZS1za3l3YWxraW5nLWFwbS05LjIuMC9za3l3YWxraW5nLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCB7IGRlZmluZUNvbXBvbmVudCBhcyBfZGVmaW5lQ29tcG9uZW50IH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgdW5yZWYgYXMgX3VucmVmLCB0b0Rpc3BsYXlTdHJpbmcgYXMgX3RvRGlzcGxheVN0cmluZywgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgd2l0aEN0eCBhcyBfd2l0aEN0eCwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jaywgY3JlYXRlQ29tbWVudFZOb2RlIGFzIF9jcmVhdGVDb21tZW50Vk5vZGUsIHZTaG93IGFzIF92U2hvdywgd2l0aERpcmVjdGl2ZXMgYXMgX3dpdGhEaXJlY3RpdmVzLCByZW5kZXJMaXN0IGFzIF9yZW5kZXJMaXN0LCBGcmFnbWVudCBhcyBfRnJhZ21lbnQsIGNyZWF0ZUVsZW1lbnRCbG9jayBhcyBfY3JlYXRlRWxlbWVudEJsb2NrLCBjcmVhdGVUZXh0Vk5vZGUgYXMgX2NyZWF0ZVRleHRWTm9kZSwgcHVzaFNjb3BlSWQgYXMgX3B1c2hTY29wZUlkLCBwb3BTY29wZUlkIGFzIF9wb3BTY29wZUlkIH0gZnJvbSAidnVlIjsKCnZhciBfd2l0aFNjb3BlSWQgPSBmdW5jdGlvbiBfd2l0aFNjb3BlSWQobikgewogIHJldHVybiBfcHVzaFNjb3BlSWQoImRhdGEtdi0yMDY0ZDkyYyIpLCBuID0gbigpLCBfcG9wU2NvcGVJZCgpLCBuOwp9OwoKdmFyIF9ob2lzdGVkXzEgPSB7CiAgY2xhc3M6ICJsaW5rLXNldHRpbmdzIgp9Owp2YXIgX2hvaXN0ZWRfMiA9IHsKICBjbGFzczogInRpdGxlIgp9Owp2YXIgX2hvaXN0ZWRfMyA9IHsKICBjbGFzczogImxhYmVsIgp9Owp2YXIgX2hvaXN0ZWRfNCA9IHsKICBjbGFzczogImxhYmVsIgp9Owp2YXIgX2hvaXN0ZWRfNSA9IHsKICBjbGFzczogImxhYmVsIgp9Owp2YXIgX2hvaXN0ZWRfNiA9IHsKICBjbGFzczogIm5vZGUtc2V0dGluZ3MiCn07CnZhciBfaG9pc3RlZF83ID0gewogIGNsYXNzOiAidGl0bGUiCn07CnZhciBfaG9pc3RlZF84ID0gewogIGNsYXNzOiAibGFiZWwiCn07CnZhciBfaG9pc3RlZF85ID0gewogIGNsYXNzOiAibGFiZWwiCn07CnZhciBfaG9pc3RlZF8xMCA9IHsKICBjbGFzczogImxlZ2VuZC1zZXR0aW5ncyIKfTsKdmFyIF9ob2lzdGVkXzExID0gewogIGNsYXNzOiAidGl0bGUiCn07CnZhciBfaG9pc3RlZF8xMiA9IHsKICBjbGFzczogImxhYmVsIgp9OwoKdmFyIF9ob2lzdGVkXzEzID0gLyojX19QVVJFX18qL193aXRoU2NvcGVJZChmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIC8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCB7CiAgICBjbGFzczogImxhYmVsIgogIH0sICJIZWFsdGh5IERlc2NyaXB0aW9uIiwgLTEpOwp9KTsKCnZhciBfaG9pc3RlZF8xNCA9IC8qI19fUFVSRV9fKi9fd2l0aFNjb3BlSWQoZnVuY3Rpb24gKCkgewogIHJldHVybiAvKiNfX1BVUkVfXyovX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgewogICAgY2xhc3M6ICJsYWJlbCIKICB9LCAiVW5oZWFsdGh5IERlc2NyaXB0aW9uIiwgLTEpOwp9KTsKCmltcG9ydCB7IHJlYWN0aXZlLCByZWYgfSBmcm9tICJ2dWUiOwppbXBvcnQgeyB1c2VJMThuIH0gZnJvbSAidnVlLWkxOG4iOwppbXBvcnQgeyB1c2VEYXNoYm9hcmRTdG9yZSB9IGZyb20gIkAvc3RvcmUvbW9kdWxlcy9kYXNoYm9hcmQiOwppbXBvcnQgeyB1c2VUb3BvbG9neVN0b3JlIH0gZnJvbSAiQC9zdG9yZS9tb2R1bGVzL3RvcG9sb2d5IjsKaW1wb3J0IHsgRWxNZXNzYWdlIH0gZnJvbSAiZWxlbWVudC1wbHVzIjsKaW1wb3J0IHsgTWV0cmljQ2F0YWxvZywgU2NvcGVUeXBlLCBNZXRyaWNDb25kaXRpb25zIH0gZnJvbSAiLi4vLi4vLi4vZGF0YSI7CmltcG9ydCB7IHVzZVF1ZXJ5VG9wb2xvZ3lNZXRyaWNzIH0gZnJvbSAiQC9ob29rcy91c2VQcm9jZXNzb3IiOwppbXBvcnQgeyBFbnRpdHlUeXBlLCBMZWdlbmRPcHQsIE1ldHJpY3NUeXBlIH0gZnJvbSAiLi4vLi4vLi4vZGF0YSI7CmltcG9ydCBNZXRyaWNzIGZyb20gIi4vTWV0cmljcy52dWUiOwovKmdsb2JhbCBkZWZpbmVFbWl0cyAqLwoKZXhwb3J0IGRlZmF1bHQgLyojX19QVVJFX18qL19kZWZpbmVDb21wb25lbnQoewogIGVtaXRzOiBbInVwZGF0ZSIsICJ1cGRhdGVOb2RlcyJdLAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cChfX3Byb3BzLCBfcmVmKSB7CiAgICB2YXIgZW1pdCA9IF9yZWYuZW1pdDsKCiAgICB2YXIgX3VzZUkxOG4gPSB1c2VJMThuKCksCiAgICAgICAgdCA9IF91c2VJMThuLnQ7CgogICAgdmFyIGRhc2hib2FyZFN0b3JlID0gdXNlRGFzaGJvYXJkU3RvcmUoKTsKICAgIHZhciB0b3BvbG9neVN0b3JlID0gdXNlVG9wb2xvZ3lTdG9yZSgpOwogICAgdmFyIHNlbGVjdGVkR3JpZCA9IGRhc2hib2FyZFN0b3JlLnNlbGVjdGVkR3JpZDsKICAgIHZhciBub2RlRGFzaGJvYXJkID0gc2VsZWN0ZWRHcmlkLm5vZGVEYXNoYm9hcmQgJiYgc2VsZWN0ZWRHcmlkLm5vZGVEYXNoYm9hcmQubGVuZ3RoID8gc2VsZWN0ZWRHcmlkLm5vZGVEYXNoYm9hcmQgOiAiIjsKICAgIHZhciBpc1NlcnZpY2UgPSBbRW50aXR5VHlwZVswXS52YWx1ZSwgRW50aXR5VHlwZVsxXS52YWx1ZV0uaW5jbHVkZXMoZGFzaGJvYXJkU3RvcmUuZW50aXR5KTsKICAgIHZhciBpdGVtcyA9IHJlYWN0aXZlKGlzU2VydmljZSAmJiBub2RlRGFzaGJvYXJkID8gbm9kZURhc2hib2FyZCA6IFt7CiAgICAgIHNjb3BlOiAiIiwKICAgICAgZGFzaGJvYXJkOiAiIgogICAgfV0pOwogICAgdmFyIHN0YXRlcyA9IHJlYWN0aXZlKHsKICAgICAgbGlua0Rhc2hib2FyZDogc2VsZWN0ZWRHcmlkLmxpbmtEYXNoYm9hcmQgfHwgIiIsCiAgICAgIG5vZGVEYXNoYm9hcmQ6IHNlbGVjdGVkR3JpZC5ub2RlRGFzaGJvYXJkIHx8IFtdLAogICAgICBsaW5rU2VydmVyTWV0cmljczogc2VsZWN0ZWRHcmlkLmxpbmtTZXJ2ZXJNZXRyaWNzIHx8IFtdLAogICAgICBsaW5rQ2xpZW50TWV0cmljczogc2VsZWN0ZWRHcmlkLmxpbmtDbGllbnRNZXRyaWNzIHx8IFtdLAogICAgICBub2RlTWV0cmljczogc2VsZWN0ZWRHcmlkLm5vZGVNZXRyaWNzIHx8IFtdLAogICAgICBub2RlTWV0cmljTGlzdDogW10sCiAgICAgIGxpbmtNZXRyaWNMaXN0OiBbXSwKICAgICAgbGlua0Rhc2hib2FyZHM6IFtdLAogICAgICBub2RlRGFzaGJvYXJkczogW10KICAgIH0pOwogICAgdmFyIGwgPSBzZWxlY3RlZEdyaWQubGVnZW5kICYmIHNlbGVjdGVkR3JpZC5sZWdlbmQubGVuZ3RoOwogICAgdmFyIGxlZ2VuZCA9IHJlYWN0aXZlKHsKICAgICAgbWV0cmljOiBsID8gc2VsZWN0ZWRHcmlkLmxlZ2VuZCA6IFt7CiAgICAgICAgbmFtZTogIiIsCiAgICAgICAgY29uZGl0aW9uOiAiIiwKICAgICAgICB2YWx1ZTogIiIKICAgICAgfV0KICAgIH0pOwogICAgdmFyIGNvbmZpZ1R5cGUgPSByZWYoIiIpOwogICAgdmFyIGRlc2NyaXB0aW9uID0gcmVhY3RpdmUoc2VsZWN0ZWRHcmlkLmRlc2NyaXB0aW9uIHx8IHt9KTsKICAgIGdldE1ldHJpY0xpc3QoKTsKCiAgICBmdW5jdGlvbiBnZXRNZXRyaWNMaXN0KCkgewogICAgICByZXR1cm4gX2dldE1ldHJpY0xpc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBfZ2V0TWV0cmljTGlzdCgpIHsKICAgICAgX2dldE1ldHJpY0xpc3QgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGxpc3QsIGpzb24sIGVudGl0eTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBsaXN0ID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJkYXNoYm9hcmRzIikgfHwgIltdIik7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBkYXNoYm9hcmRTdG9yZS5mZXRjaE1ldHJpY0xpc3QoKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAganNvbiA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCFqc29uLmVycm9ycykgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKGpzb24uZXJyb3JzKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBlbnRpdHkgPSBkYXNoYm9hcmRTdG9yZS5lbnRpdHkgPT09IEVudGl0eVR5cGVbMV0udmFsdWUgPyBFbnRpdHlUeXBlWzBdLnZhbHVlIDogZGFzaGJvYXJkU3RvcmUuZW50aXR5ID09PSBFbnRpdHlUeXBlWzRdLnZhbHVlID8gRW50aXR5VHlwZVszXS52YWx1ZSA6IGRhc2hib2FyZFN0b3JlLmVudGl0eTsKICAgICAgICAgICAgICAgIHN0YXRlcy5saW5rRGFzaGJvYXJkcyA9IGxpc3QucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBkKSB7CiAgICAgICAgICAgICAgICAgIGlmIChkLmxheWVyID09PSBkYXNoYm9hcmRTdG9yZS5sYXllcklkICYmIGQuZW50aXR5ID09PSBlbnRpdHkgKyAiUmVsYXRpb24iKSB7CiAgICAgICAgICAgICAgICAgICAgcHJldi5wdXNoKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZCksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogZC5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGQubmFtZQogICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7CiAgICAgICAgICAgICAgICB9LCBbXSk7CiAgICAgICAgICAgICAgICBzdGF0ZXMubm9kZU1ldHJpY0xpc3QgPSAoanNvbi5kYXRhLm1ldHJpY3MgfHwgW10pLmZpbHRlcihmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZC50eXBlID09PSBNZXRyaWNzVHlwZS5SRUdVTEFSX1ZBTFVFOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBzdGF0ZXMubGlua01ldHJpY0xpc3QgPSAoanNvbi5kYXRhLm1ldHJpY3MgfHwgW10pLmZpbHRlcihmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZW50aXR5ICsgIlJlbGF0aW9uIiA9PT0gTWV0cmljQ2F0YWxvZ1tkLmNhdGFsb2ddICYmIGQudHlwZSA9PT0gTWV0cmljc1R5cGUuUkVHVUxBUl9WQUxVRTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmICghaXNTZXJ2aWNlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICBzdGF0ZXMubm9kZURhc2hib2FyZHMgPSBsaXN0LnJlZHVjZShmdW5jdGlvbiAocHJldiwgZCkgewogICAgICAgICAgICAgICAgICBpZiAoZC5sYXllciA9PT0gZGFzaGJvYXJkU3RvcmUubGF5ZXJJZCAmJiBkLmVudGl0eSA9PT0gZW50aXR5KSB7CiAgICAgICAgICAgICAgICAgICAgcHJldi5wdXNoKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZCksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogZC5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGQubmFtZQogICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7CiAgICAgICAgICAgICAgICB9LCBbXSk7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwogICAgICByZXR1cm4gX2dldE1ldHJpY0xpc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRMZWdlbmQoKSB7CiAgICAgIHJldHVybiBfc2V0TGVnZW5kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgZnVuY3Rpb24gX3NldExlZ2VuZCgpIHsKICAgICAgX3NldExlZ2VuZCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIGlkcywgbmFtZXMsIHBhcmFtLCByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHVwZGF0ZVNldHRpbmdzKCk7CiAgICAgICAgICAgICAgICBpZHMgPSB0b3BvbG9neVN0b3JlLm5vZGVzLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZC5pZDsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbmFtZXMgPSBkYXNoYm9hcmRTdG9yZS5zZWxlY3RlZEdyaWQubGVnZW5kLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZC5uYW1lOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKG5hbWVzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGVtaXQoInVwZGF0ZU5vZGVzIik7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiB1c2VRdWVyeVRvcG9sb2d5TWV0cmljcyhuYW1lcywgaWRzKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgcGFyYW0gPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICByZXR1cm4gdG9wb2xvZ3lTdG9yZS5nZXRMZWdlbmRNZXRyaWNzKHBhcmFtKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXMuZXJyb3JzKSB7CiAgICAgICAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcihyZXMuZXJyb3JzKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBlbWl0KCJ1cGRhdGVOb2RlcyIpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpOwogICAgICByZXR1cm4gX3NldExlZ2VuZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZU5vZGVEYXNoYm9hcmQob3B0KSB7CiAgICAgIHN0YXRlcy5ub2RlRGFzaGJvYXJkID0gb3B0WzBdLnZhbHVlOwogICAgICB1cGRhdGVTZXR0aW5ncygpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZUxpbmtEYXNoYm9hcmQob3B0KSB7CiAgICAgIHN0YXRlcy5saW5rRGFzaGJvYXJkID0gb3B0WzBdLnZhbHVlOwogICAgICB1cGRhdGVTZXR0aW5ncygpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZUxlZ2VuZCh0eXBlLCBvcHQsIGluZGV4KSB7CiAgICAgIGxlZ2VuZC5tZXRyaWNbaW5kZXhdW3R5cGVdID0gb3B0WzBdLnZhbHVlIHx8IG9wdDsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VTY29wZShpbmRleCwgb3B0KSB7CiAgICAgIGl0ZW1zW2luZGV4XS5zY29wZSA9IG9wdFswXS52YWx1ZTsKICAgICAgdmFyIGxpc3QgPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImRhc2hib2FyZHMiKSB8fCAiW10iKTsKICAgICAgc3RhdGVzLm5vZGVEYXNoYm9hcmRzID0gbGlzdC5yZWR1Y2UoZnVuY3Rpb24gKHByZXYsIGQpIHsKICAgICAgICBpZiAoZC5sYXllciA9PT0gZGFzaGJvYXJkU3RvcmUubGF5ZXJJZCAmJiBkLmVudGl0eSA9PT0gb3B0WzBdLnZhbHVlKSB7CiAgICAgICAgICBwcmV2LnB1c2goX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkKSwge30sIHsKICAgICAgICAgICAgbGFiZWw6IGQubmFtZSwKICAgICAgICAgICAgdmFsdWU6IGQubmFtZQogICAgICAgICAgfSkpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHByZXY7CiAgICAgIH0sIFtdKTsKICAgICAgaXRlbXNbaW5kZXhdLmRhc2hib2FyZCA9IHN0YXRlcy5ub2RlRGFzaGJvYXJkc1swXS52YWx1ZTsKICAgICAgdXBkYXRlU2V0dGluZ3MoKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVOb2RlRGFzaGJvYXJkcyhpbmRleCwgY29udGVudCkgewogICAgICBpdGVtc1tpbmRleF0uZGFzaGJvYXJkID0gY29udGVudFswXS52YWx1ZTsKICAgICAgdXBkYXRlU2V0dGluZ3MoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGRJdGVtKCkgewogICAgICBpdGVtcy5wdXNoKHsKICAgICAgICBzY29wZTogIiIsCiAgICAgICAgZGFzaGJvYXJkOiAiIgogICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZWxldGVJdGVtKGluZGV4KSB7CiAgICAgIGlmIChpdGVtcy5sZW5ndGggPT09IDEpIHsKICAgICAgICBpdGVtcy5wdXNoKHsKICAgICAgICAgIHNjb3BlOiAiIiwKICAgICAgICAgIGRhc2hib2FyZDogIiIKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaXRlbXMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgdXBkYXRlU2V0dGluZ3MoKTsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVTZXR0aW5ncyhtZXRyaWNDb25maWcpIHsKICAgICAgdmFyIG1ldHJpY3MgPSBsZWdlbmQubWV0cmljLmZpbHRlcihmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBkLm5hbWUgJiYgZC52YWx1ZSAmJiBkLmNvbmRpdGlvbjsKICAgICAgfSk7CgogICAgICB2YXIgcGFyYW0gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGFzaGJvYXJkU3RvcmUuc2VsZWN0ZWRHcmlkKSwge30sIHsKICAgICAgICBsaW5rRGFzaGJvYXJkOiBzdGF0ZXMubGlua0Rhc2hib2FyZCwKICAgICAgICBub2RlRGFzaGJvYXJkOiBpc1NlcnZpY2UgPyBpdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgIHJldHVybiBkLmRhc2hib2FyZDsKICAgICAgICB9KSA6IHN0YXRlcy5ub2RlRGFzaGJvYXJkLAogICAgICAgIGxpbmtTZXJ2ZXJNZXRyaWNzOiBzdGF0ZXMubGlua1NlcnZlck1ldHJpY3MsCiAgICAgICAgbGlua0NsaWVudE1ldHJpY3M6IHN0YXRlcy5saW5rQ2xpZW50TWV0cmljcywKICAgICAgICBub2RlTWV0cmljczogc3RhdGVzLm5vZGVNZXRyaWNzLAogICAgICAgIGxlZ2VuZDogbWV0cmljcwogICAgICB9LCBtZXRyaWNDb25maWcpLCB7fSwgewogICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbgogICAgICB9KTsKCiAgICAgIGRhc2hib2FyZFN0b3JlLnNlbGVjdFdpZGdldChwYXJhbSk7CiAgICAgIGRhc2hib2FyZFN0b3JlLnNldENvbmZpZ3MocGFyYW0pOwogICAgICBlbWl0KCJ1cGRhdGUiLCBwYXJhbSk7CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlTGlua1NlcnZlck1ldHJpY3Mob3B0aW9ucykgewogICAgICB2YXIgb3B0ID0gb3B0aW9ucy5tYXAoZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gZC52YWx1ZTsKICAgICAgfSk7CiAgICAgIHZhciBpbmRleCA9IHN0YXRlcy5saW5rU2VydmVyTWV0cmljcy5maW5kSW5kZXgoZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gIW9wdC5pbmNsdWRlcyhkKTsKICAgICAgfSk7CiAgICAgIHN0YXRlcy5saW5rU2VydmVyTWV0cmljcyA9IG9wdDsKCiAgICAgIGlmIChpbmRleCA8IDApIHsKICAgICAgICBjaGFuZ2VMaW5rU2VydmVyTWV0cmljcygpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIG9yaWdpbiA9IGRhc2hib2FyZFN0b3JlLnNlbGVjdGVkR3JpZC5saW5rU2VydmVyTWV0cmljQ29uZmlnIHx8IFtdOwogICAgICB2YXIgY29uZmlnID0gb3JpZ2luLmxlbmd0aCA9PT0gMSA/IFtdIDogb3JpZ2luLnNwbGljZShpbmRleCwgMSk7CiAgICAgIGNoYW5nZUxpbmtTZXJ2ZXJNZXRyaWNzKHsKICAgICAgICBsaW5rU2VydmVyTWV0cmljQ29uZmlnOiBjb25maWcKICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlTGlua1NlcnZlck1ldHJpY3MoX3gpIHsKICAgICAgcmV0dXJuIF9jaGFuZ2VMaW5rU2VydmVyTWV0cmljcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIGZ1bmN0aW9uIF9jaGFuZ2VMaW5rU2VydmVyTWV0cmljcygpIHsKICAgICAgX2NoYW5nZUxpbmtTZXJ2ZXJNZXRyaWNzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhjb25maWcpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdXBkYXRlU2V0dGluZ3MoY29uZmlnKTsKCiAgICAgICAgICAgICAgICBpZiAoc3RhdGVzLmxpbmtTZXJ2ZXJNZXRyaWNzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRvcG9sb2d5U3RvcmUuc2V0TGlua1NlcnZlck1ldHJpY3Moe30pOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICB0b3BvbG9neVN0b3JlLmdldExpbmtTZXJ2ZXJNZXRyaWNzKHN0YXRlcy5saW5rU2VydmVyTWV0cmljcyk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKTsKICAgICAgcmV0dXJuIF9jaGFuZ2VMaW5rU2VydmVyTWV0cmljcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZUxpbmtDbGllbnRNZXRyaWNzKG9wdGlvbnMpIHsKICAgICAgdmFyIG9wdCA9IG9wdGlvbnMubWFwKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGQudmFsdWU7CiAgICAgIH0pOwogICAgICB2YXIgaW5kZXggPSBzdGF0ZXMubGlua0NsaWVudE1ldHJpY3MuZmluZEluZGV4KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuICFvcHQuaW5jbHVkZXMoZCk7CiAgICAgIH0pOwogICAgICBzdGF0ZXMubGlua0NsaWVudE1ldHJpY3MgPSBvcHQ7CgogICAgICBpZiAoaW5kZXggPCAwKSB7CiAgICAgICAgY2hhbmdlTGlua0NsaWVudE1ldHJpY3MoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBvcmlnaW4gPSBkYXNoYm9hcmRTdG9yZS5zZWxlY3RlZEdyaWQubGlua0NsaWVudE1ldHJpY0NvbmZpZyB8fCBbXTsKICAgICAgdmFyIGNvbmZpZyA9IG9yaWdpbi5sZW5ndGggPT09IDEgPyBbXSA6IG9yaWdpbi5zcGxpY2UoaW5kZXgsIDEpOwogICAgICBjaGFuZ2VMaW5rQ2xpZW50TWV0cmljcyh7CiAgICAgICAgbGlua0NsaWVudE1ldHJpY0NvbmZpZzogY29uZmlnCiAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZUxpbmtDbGllbnRNZXRyaWNzKF94MikgewogICAgICByZXR1cm4gX2NoYW5nZUxpbmtDbGllbnRNZXRyaWNzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgZnVuY3Rpb24gX2NoYW5nZUxpbmtDbGllbnRNZXRyaWNzKCkgewogICAgICBfY2hhbmdlTGlua0NsaWVudE1ldHJpY3MgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KGNvbmZpZykgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB1cGRhdGVTZXR0aW5ncyhjb25maWcpOwoKICAgICAgICAgICAgICAgIGlmIChzdGF0ZXMubGlua0NsaWVudE1ldHJpY3MubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdG9wb2xvZ3lTdG9yZS5zZXRMaW5rQ2xpZW50TWV0cmljcyh7fSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHRvcG9sb2d5U3RvcmUuZ2V0TGlua0NsaWVudE1ldHJpY3Moc3RhdGVzLmxpbmtDbGllbnRNZXRyaWNzKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpOwogICAgICByZXR1cm4gX2NoYW5nZUxpbmtDbGllbnRNZXRyaWNzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlTm9kZU1ldHJpY3Mob3B0aW9ucykgewogICAgICB2YXIgb3B0ID0gb3B0aW9ucy5tYXAoZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gZC52YWx1ZTsKICAgICAgfSk7CiAgICAgIHZhciBpbmRleCA9IHN0YXRlcy5ub2RlTWV0cmljcy5maW5kSW5kZXgoZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gIW9wdC5pbmNsdWRlcyhkKTsKICAgICAgfSk7CiAgICAgIHN0YXRlcy5ub2RlTWV0cmljcyA9IG9wdDsKCiAgICAgIGlmIChpbmRleCA8IDApIHsKICAgICAgICBjaGFuZ2VOb2RlTWV0cmljcygpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIG9yaWdpbiA9IGRhc2hib2FyZFN0b3JlLnNlbGVjdGVkR3JpZC5ub2RlTWV0cmljQ29uZmlnIHx8IFtdOwogICAgICB2YXIgY29uZmlnID0gb3JpZ2luLmxlbmd0aCA9PT0gMSA/IFtdIDogb3JpZ2luLnNwbGljZShpbmRleCwgMSk7CiAgICAgIGNoYW5nZU5vZGVNZXRyaWNzKHsKICAgICAgICBub2RlTWV0cmljQ29uZmlnOiBjb25maWcKICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlTm9kZU1ldHJpY3MoX3gzKSB7CiAgICAgIHJldHVybiBfY2hhbmdlTm9kZU1ldHJpY3MuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBfY2hhbmdlTm9kZU1ldHJpY3MoKSB7CiAgICAgIF9jaGFuZ2VOb2RlTWV0cmljcyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoY29uZmlnKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHVwZGF0ZVNldHRpbmdzKGNvbmZpZyk7CgogICAgICAgICAgICAgICAgaWYgKHN0YXRlcy5ub2RlTWV0cmljcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0b3BvbG9neVN0b3JlLnNldE5vZGVNZXRyaWNWYWx1ZSh7fSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHRvcG9sb2d5U3RvcmUucXVlcnlOb2RlTWV0cmljcyhzdGF0ZXMubm9kZU1ldHJpY3MpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICB9KSk7CiAgICAgIHJldHVybiBfY2hhbmdlTm9kZU1ldHJpY3MuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZWxldGVNZXRyaWMoaW5kZXgpIHsKICAgICAgaWYgKGxlZ2VuZC5tZXRyaWMubGVuZ3RoID09PSAxKSB7CiAgICAgICAgbGVnZW5kLm1ldHJpYyA9IFt7CiAgICAgICAgICBuYW1lOiAiIiwKICAgICAgICAgIGNvbmRpdGlvbjogIiIsCiAgICAgICAgICB2YWx1ZTogIiIKICAgICAgICB9XTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGxlZ2VuZC5tZXRyaWMuc3BsaWNlKGluZGV4LCAxKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGRNZXRyaWMoKSB7CiAgICAgIGxlZ2VuZC5tZXRyaWMucHVzaCh7CiAgICAgICAgbmFtZTogIiIsCiAgICAgICAgY29uZGl0aW9uOiAiIiwKICAgICAgICB2YWx1ZTogIiIKICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0Q29uZmlnVHlwZSh0eXBlKSB7CiAgICAgIGNvbmZpZ1R5cGUudmFsdWUgPSB0eXBlOwogICAgfQoKICAgIHJldHVybiBmdW5jdGlvbiAoX2N0eCwgX2NhY2hlKSB7CiAgICAgIHZhciBfY29tcG9uZW50X1NlbGVjdG9yID0gX3Jlc29sdmVDb21wb25lbnQoIlNlbGVjdG9yIik7CgogICAgICB2YXIgX2NvbXBvbmVudF9JY29uID0gX3Jlc29sdmVDb21wb25lbnQoIkljb24iKTsKCiAgICAgIHZhciBfY29tcG9uZW50X2VsX3BvcG92ZXIgPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtcG9wb3ZlciIpOwoKICAgICAgdmFyIF9jb21wb25lbnRfZWxfaW5wdXQgPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtaW5wdXQiKTsKCiAgICAgIHZhciBfY29tcG9uZW50X2VsX2J1dHRvbiA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1idXR0b24iKTsKCiAgICAgIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCBudWxsLCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMSwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImg1IiwgX2hvaXN0ZWRfMiwgX3RvRGlzcGxheVN0cmluZyhfdW5yZWYodCkoImNhbGxTZXR0aW5ncyIpKSwgMSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzMsIF90b0Rpc3BsYXlTdHJpbmcoX3VucmVmKHQpKCJsaW5rRGFzaGJvYXJkIikpLCAxKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfU2VsZWN0b3IsIHsKICAgICAgICB2YWx1ZTogX3VucmVmKHN0YXRlcykubGlua0Rhc2hib2FyZCwKICAgICAgICBvcHRpb25zOiBfdW5yZWYoc3RhdGVzKS5saW5rRGFzaGJvYXJkcywKICAgICAgICBzaXplOiAic21hbGwiLAogICAgICAgIHBsYWNlaG9sZGVyOiAiUGxlYXNlIGlucHV0IGEgZGFzaGJvYXJkIG5hbWUgZm9yIGNhbGxzIiwKICAgICAgICBvbkNoYW5nZTogY2hhbmdlTGlua0Rhc2hib2FyZCwKICAgICAgICBjbGFzczogImlucHV0cyIsCiAgICAgICAgY2xlYXJhYmxlOiB0cnVlCiAgICAgIH0sIG51bGwsIDgsIFsidmFsdWUiLCAib3B0aW9ucyJdKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfNCwgW19jcmVhdGVFbGVtZW50Vk5vZGUoInNwYW4iLCBudWxsLCBfdG9EaXNwbGF5U3RyaW5nKF91bnJlZih0KSgibGlua1NlcnZlck1ldHJpY3MiKSksIDEpLCBfdW5yZWYoc3RhdGVzKS5saW5rU2VydmVyTWV0cmljcy5sZW5ndGggPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX2NvbXBvbmVudF9lbF9wb3BvdmVyLCB7CiAgICAgICAga2V5OiAwLAogICAgICAgIHBsYWNlbWVudDogImxlZnQiLAogICAgICAgIHdpZHRoOiA0MDAsCiAgICAgICAgdHJpZ2dlcjogImNsaWNrIiwKICAgICAgICBlZmZlY3Q6ICJkYXJrIgogICAgICB9LCB7CiAgICAgICAgcmVmZXJlbmNlOiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gW19jcmVhdGVFbGVtZW50Vk5vZGUoInNwYW4iLCB7CiAgICAgICAgICAgIG9uQ2xpY2s6IF9jYWNoZVswXSB8fCAoX2NhY2hlWzBdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgICAgIHJldHVybiBzZXRDb25maWdUeXBlKCdsaW5rU2VydmVyTWV0cmljQ29uZmlnJyk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICB9LCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfSWNvbiwgewogICAgICAgICAgICBjbGFzczogImNwIG1sLTUiLAogICAgICAgICAgICBpY29uTmFtZTogIm1vZGVfZWRpdCIsCiAgICAgICAgICAgIHNpemU6ICJtaWRkbGUiCiAgICAgICAgICB9KV0pXTsKICAgICAgICB9KSwKICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gW19jcmVhdGVWTm9kZShNZXRyaWNzLCB7CiAgICAgICAgICAgIHR5cGU6IGNvbmZpZ1R5cGUudmFsdWUsCiAgICAgICAgICAgIG1ldHJpY3M6IF91bnJlZihzdGF0ZXMpLmxpbmtTZXJ2ZXJNZXRyaWNzLAogICAgICAgICAgICBvblVwZGF0ZTogY2hhbmdlTGlua1NlcnZlck1ldHJpY3MKICAgICAgICAgIH0sIG51bGwsIDgsIFsidHlwZSIsICJtZXRyaWNzIl0pXTsKICAgICAgICB9KSwKICAgICAgICBfOiAxCiAgICAgIH0pKSA6IF9jcmVhdGVDb21tZW50Vk5vZGUoIiIsIHRydWUpXSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X1NlbGVjdG9yLCB7CiAgICAgICAgY2xhc3M6ICJpbnB1dHMiLAogICAgICAgIG11bHRpcGxlOiB0cnVlLAogICAgICAgIHZhbHVlOiBfdW5yZWYoc3RhdGVzKS5saW5rU2VydmVyTWV0cmljcywKICAgICAgICBvcHRpb25zOiBfdW5yZWYoc3RhdGVzKS5saW5rTWV0cmljTGlzdCwKICAgICAgICBzaXplOiAic21hbGwiLAogICAgICAgIHBsYWNlaG9sZGVyOiAiU2VsZWN0IG1ldHJpY3MiLAogICAgICAgIG9uQ2hhbmdlOiB1cGRhdGVMaW5rU2VydmVyTWV0cmljcwogICAgICB9LCBudWxsLCA4LCBbInZhbHVlIiwgIm9wdGlvbnMiXSksIF93aXRoRGlyZWN0aXZlcyhfY3JlYXRlRWxlbWVudFZOb2RlKCJzcGFuIiwgbnVsbCwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzUsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJzcGFuIiwgbnVsbCwgX3RvRGlzcGxheVN0cmluZyhfdW5yZWYodCkoImxpbmtDbGllbnRNZXRyaWNzIikpLCAxKSwgX3VucmVmKHN0YXRlcykubGlua0NsaWVudE1ldHJpY3MubGVuZ3RoID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfZWxfcG9wb3ZlciwgewogICAgICAgIGtleTogMCwKICAgICAgICBwbGFjZW1lbnQ6ICJsZWZ0IiwKICAgICAgICB3aWR0aDogNDAwLAogICAgICAgIHRyaWdnZXI6ICJjbGljayIsCiAgICAgICAgZWZmZWN0OiAiZGFyayIKICAgICAgfSwgewogICAgICAgIHJlZmVyZW5jZTogX3dpdGhDdHgoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJzcGFuIiwgewogICAgICAgICAgICBvbkNsaWNrOiBfY2FjaGVbMV0gfHwgKF9jYWNoZVsxXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gc2V0Q29uZmlnVHlwZSgnbGlua0NsaWVudE1ldHJpY0NvbmZpZycpOwogICAgICAgICAgICB9KQogICAgICAgICAgfSwgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X0ljb24sIHsKICAgICAgICAgICAgY2xhc3M6ICJjcCBtbC01IiwKICAgICAgICAgICAgaWNvbk5hbWU6ICJtb2RlX2VkaXQiLAogICAgICAgICAgICBzaXplOiAibWlkZGxlIgogICAgICAgICAgfSldKV07CiAgICAgICAgfSksCiAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFtfY3JlYXRlVk5vZGUoTWV0cmljcywgewogICAgICAgICAgICB0eXBlOiBjb25maWdUeXBlLnZhbHVlLAogICAgICAgICAgICBtZXRyaWNzOiBfdW5yZWYoc3RhdGVzKS5saW5rQ2xpZW50TWV0cmljcywKICAgICAgICAgICAgb25VcGRhdGU6IGNoYW5nZUxpbmtDbGllbnRNZXRyaWNzCiAgICAgICAgICB9LCBudWxsLCA4LCBbInR5cGUiLCAibWV0cmljcyJdKV07CiAgICAgICAgfSksCiAgICAgICAgXzogMQogICAgICB9KSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCIiLCB0cnVlKV0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9TZWxlY3RvciwgewogICAgICAgIGNsYXNzOiAiaW5wdXRzIiwKICAgICAgICBtdWx0aXBsZTogdHJ1ZSwKICAgICAgICB2YWx1ZTogX3VucmVmKHN0YXRlcykubGlua0NsaWVudE1ldHJpY3MsCiAgICAgICAgb3B0aW9uczogX3VucmVmKHN0YXRlcykubGlua01ldHJpY0xpc3QsCiAgICAgICAgc2l6ZTogInNtYWxsIiwKICAgICAgICBwbGFjZWhvbGRlcjogIlNlbGVjdCBtZXRyaWNzIiwKICAgICAgICBvbkNoYW5nZTogdXBkYXRlTGlua0NsaWVudE1ldHJpY3MKICAgICAgfSwgbnVsbCwgOCwgWyJ2YWx1ZSIsICJvcHRpb25zIl0pXSwgNTEyKSwgW1tfdlNob3csIF91bnJlZihkYXNoYm9hcmRTdG9yZSkuZW50aXR5ICE9PSBfdW5yZWYoRW50aXR5VHlwZSlbMl0udmFsdWVdXSldKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfNiwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImg1IiwgX2hvaXN0ZWRfNywgX3RvRGlzcGxheVN0cmluZyhfdW5yZWYodCkoIm5vZGVTZXR0aW5ncyIpKSwgMSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzgsIF90b0Rpc3BsYXlTdHJpbmcoX3VucmVmKHQpKCJub2RlRGFzaGJvYXJkIikpLCAxKSwgX3dpdGhEaXJlY3RpdmVzKF9jcmVhdGVWTm9kZShfY29tcG9uZW50X1NlbGVjdG9yLCB7CiAgICAgICAgdmFsdWU6IF91bnJlZihzdGF0ZXMpLm5vZGVEYXNoYm9hcmQsCiAgICAgICAgb3B0aW9uczogX3VucmVmKHN0YXRlcykubm9kZURhc2hib2FyZHMsCiAgICAgICAgc2l6ZTogInNtYWxsIiwKICAgICAgICBwbGFjZWhvbGRlcjogIlBsZWFzZSBpbnB1dCBhIGRhc2hib2FyZCBuYW1lIGZvciBub2RlcyIsCiAgICAgICAgb25DaGFuZ2U6IGNoYW5nZU5vZGVEYXNoYm9hcmQsCiAgICAgICAgY2xhc3M6ICJpbnB1dHMiCiAgICAgIH0sIG51bGwsIDgsIFsidmFsdWUiLCAib3B0aW9ucyJdKSwgW1tfdlNob3csICFfdW5yZWYoaXNTZXJ2aWNlKV1dKSwgKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCBudWxsLCBfcmVuZGVyTGlzdChfdW5yZWYoaXRlbXMpLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICByZXR1cm4gX3dpdGhEaXJlY3RpdmVzKChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIHsKICAgICAgICAgIGtleTogaW5kZXgsCiAgICAgICAgICBjbGFzczogIm1ldHJpYy1pdGVtIgogICAgICAgIH0sIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9TZWxlY3RvciwgewogICAgICAgICAgdmFsdWU6IGl0ZW0uc2NvcGUsCiAgICAgICAgICBvcHRpb25zOiBfdW5yZWYoU2NvcGVUeXBlKSwKICAgICAgICAgIHNpemU6ICJzbWFsbCIsCiAgICAgICAgICBwbGFjZWhvbGRlcjogIlNlbGVjdCBhIHNjb3BlIiwKICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZSgkZXZlbnQpIHsKICAgICAgICAgICAgcmV0dXJuIGNoYW5nZVNjb3BlKGluZGV4LCAkZXZlbnQpOwogICAgICAgICAgfSwKICAgICAgICAgIGNsYXNzOiAiaXRlbSBtci01IgogICAgICAgIH0sIG51bGwsIDgsIFsidmFsdWUiLCAib3B0aW9ucyIsICJvbkNoYW5nZSJdKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfU2VsZWN0b3IsIHsKICAgICAgICAgIHZhbHVlOiBpdGVtLmRhc2hib2FyZCwKICAgICAgICAgIG9wdGlvbnM6IF91bnJlZihzdGF0ZXMpLm5vZGVEYXNoYm9hcmRzLAogICAgICAgICAgc2l6ZTogInNtYWxsIiwKICAgICAgICAgIHBsYWNlaG9sZGVyOiAiUGxlYXNlIGlucHV0IGEgZGFzaGJvYXJkIG5hbWUgZm9yIG5vZGVzIiwKICAgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZSgkZXZlbnQpIHsKICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZU5vZGVEYXNoYm9hcmRzKGluZGV4LCAkZXZlbnQpOwogICAgICAgICAgfSwKICAgICAgICAgIGNsYXNzOiAiaXRlbSBtci01IgogICAgICAgIH0sIG51bGwsIDgsIFsidmFsdWUiLCAib3B0aW9ucyIsICJvbkNoYW5nZSJdKSwgX2NyZWF0ZUVsZW1lbnRWTm9kZSgic3BhbiIsIG51bGwsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9JY29uLCB7CiAgICAgICAgICBjbGFzczogImNwIG1yLTUiLAogICAgICAgICAgaWNvbk5hbWU6ICJyZW1vdmVfY2lyY2xlX291dGxpbmUiLAogICAgICAgICAgc2l6ZTogIm1pZGRsZSIsCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCRldmVudCkgewogICAgICAgICAgICByZXR1cm4gZGVsZXRlSXRlbShpbmRleCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgbnVsbCwgOCwgWyJvbkNsaWNrIl0pLCBfd2l0aERpcmVjdGl2ZXMoX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfSWNvbiwgewogICAgICAgICAgY2xhc3M6ICJjcCIsCiAgICAgICAgICBpY29uTmFtZTogImFkZF9jaXJjbGVfb3V0bGluZWNvbnRyb2xfcG9pbnQiLAogICAgICAgICAgc2l6ZTogIm1pZGRsZSIsCiAgICAgICAgICBvbkNsaWNrOiBhZGRJdGVtCiAgICAgICAgfSwgbnVsbCwgNTEyKSwgW1tfdlNob3csIGluZGV4ID09PSBfdW5yZWYoaXRlbXMpLmxlbmd0aCAtIDEgJiYgX3VucmVmKGl0ZW1zKS5sZW5ndGggPCA1XV0pXSldKSksIFtbX3ZTaG93LCBfdW5yZWYoaXNTZXJ2aWNlKV1dKTsKICAgICAgfSksIDEyOCkpLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF85LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgic3BhbiIsIG51bGwsIF90b0Rpc3BsYXlTdHJpbmcoX3VucmVmKHQpKCJub2RlTWV0cmljcyIpKSwgMSksIF91bnJlZihzdGF0ZXMpLm5vZGVNZXRyaWNzLmxlbmd0aCA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X2VsX3BvcG92ZXIsIHsKICAgICAgICBrZXk6IDAsCiAgICAgICAgcGxhY2VtZW50OiAibGVmdCIsCiAgICAgICAgd2lkdGg6IDQwMCwKICAgICAgICB0cmlnZ2VyOiAiY2xpY2siLAogICAgICAgIGVmZmVjdDogImRhcmsiCiAgICAgIH0sIHsKICAgICAgICByZWZlcmVuY2U6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgic3BhbiIsIHsKICAgICAgICAgICAgb25DbGljazogX2NhY2hlWzJdIHx8IChfY2FjaGVbMl0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHNldENvbmZpZ1R5cGUoJ25vZGVNZXRyaWNDb25maWcnKTsKICAgICAgICAgICAgfSkKICAgICAgICAgIH0sIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9JY29uLCB7CiAgICAgICAgICAgIGNsYXNzOiAiY3AgbWwtNSIsCiAgICAgICAgICAgIGljb25OYW1lOiAibW9kZV9lZGl0IiwKICAgICAgICAgICAgc2l6ZTogIm1pZGRsZSIKICAgICAgICAgIH0pXSldOwogICAgICAgIH0pLAogICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBbX2NyZWF0ZVZOb2RlKE1ldHJpY3MsIHsKICAgICAgICAgICAgdHlwZTogY29uZmlnVHlwZS52YWx1ZSwKICAgICAgICAgICAgbWV0cmljczogX3VucmVmKHN0YXRlcykubm9kZU1ldHJpY3MsCiAgICAgICAgICAgIG9uVXBkYXRlOiBjaGFuZ2VOb2RlTWV0cmljcwogICAgICAgICAgfSwgbnVsbCwgOCwgWyJ0eXBlIiwgIm1ldHJpY3MiXSldOwogICAgICAgIH0pLAogICAgICAgIF86IDEKICAgICAgfSkpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgiIiwgdHJ1ZSldKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfU2VsZWN0b3IsIHsKICAgICAgICBjbGFzczogImlucHV0cyIsCiAgICAgICAgbXVsdGlwbGU6IHRydWUsCiAgICAgICAgdmFsdWU6IF91bnJlZihzdGF0ZXMpLm5vZGVNZXRyaWNzLAogICAgICAgIG9wdGlvbnM6IF91bnJlZihzdGF0ZXMpLm5vZGVNZXRyaWNMaXN0LAogICAgICAgIHNpemU6ICJzbWFsbCIsCiAgICAgICAgcGxhY2Vob2xkZXI6ICJTZWxlY3QgbWV0cmljcyIsCiAgICAgICAgb25DaGFuZ2U6IHVwZGF0ZU5vZGVNZXRyaWNzCiAgICAgIH0sIG51bGwsIDgsIFsidmFsdWUiLCAib3B0aW9ucyJdKV0pLCBfd2l0aERpcmVjdGl2ZXMoX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMTAsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJoNSIsIF9ob2lzdGVkXzExLCBfdG9EaXNwbGF5U3RyaW5nKF91bnJlZih0KSgibGVnZW5kU2V0dGluZ3MiKSksIDEpLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF8xMiwgX3RvRGlzcGxheVN0cmluZyhfdW5yZWYodCkoImNvbmRpdGlvbnMiKSksIDEpLCAoX29wZW5CbG9jayh0cnVlKSwgX2NyZWF0ZUVsZW1lbnRCbG9jayhfRnJhZ21lbnQsIG51bGwsIF9yZW5kZXJMaXN0KF91bnJlZihsZWdlbmQpLm1ldHJpYywgZnVuY3Rpb24gKG1ldHJpYywgaW5kZXgpIHsKICAgICAgICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCB7CiAgICAgICAgICBrZXk6IG1ldHJpYy5uYW1lICsgaW5kZXgKICAgICAgICB9LCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfU2VsZWN0b3IsIHsKICAgICAgICAgIGNsYXNzOiAiaXRlbSIsCiAgICAgICAgICB2YWx1ZTogbWV0cmljLm5hbWUsCiAgICAgICAgICBvcHRpb25zOiBfdW5yZWYoc3RhdGVzKS5ub2RlTWV0cmljTGlzdCwKICAgICAgICAgIHNpemU6ICJzbWFsbCIsCiAgICAgICAgICBwbGFjZWhvbGRlcjogIlNlbGVjdCBhIG1ldHJpYyIsCiAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoJGV2ZW50KSB7CiAgICAgICAgICAgIHJldHVybiBjaGFuZ2VMZWdlbmQoX3VucmVmKExlZ2VuZE9wdCkuTkFNRSwgJGV2ZW50LCBpbmRleCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgbnVsbCwgOCwgWyJ2YWx1ZSIsICJvcHRpb25zIiwgIm9uQ2hhbmdlIl0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9TZWxlY3RvciwgewogICAgICAgICAgY2xhc3M6ICJpbnB1dC1zbWFsbCIsCiAgICAgICAgICB2YWx1ZTogbWV0cmljLmNvbmRpdGlvbiwKICAgICAgICAgIG9wdGlvbnM6IF91bnJlZihNZXRyaWNDb25kaXRpb25zKSwKICAgICAgICAgIHNpemU6ICJzbWFsbCIsCiAgICAgICAgICBwbGFjZWhvbGRlcjogIlNlbGVjdCBhIGNvbmRpdGlvbiIsCiAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoJGV2ZW50KSB7CiAgICAgICAgICAgIHJldHVybiBjaGFuZ2VMZWdlbmQoX3VucmVmKExlZ2VuZE9wdCkuQ09ORElUSU9OLCAkZXZlbnQsIGluZGV4KTsKICAgICAgICAgIH0KICAgICAgICB9LCBudWxsLCA4LCBbInZhbHVlIiwgIm9wdGlvbnMiLCAib25DaGFuZ2UiXSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2lucHV0LCB7CiAgICAgICAgICBtb2RlbFZhbHVlOiBtZXRyaWMudmFsdWUsCiAgICAgICAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IGZ1bmN0aW9uIG9uVXBkYXRlTW9kZWxWYWx1ZSgkZXZlbnQpIHsKICAgICAgICAgICAgcmV0dXJuIG1ldHJpYy52YWx1ZSA9ICRldmVudDsKICAgICAgICAgIH0sCiAgICAgICAgICBwbGFjZWhvbGRlcjogIlBsZWFzZSBpbnB1dCBhIHZhbHVlIiwKICAgICAgICAgIHR5cGU6ICJudW1iZXIiLAogICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKCRldmVudCkgewogICAgICAgICAgICByZXR1cm4gY2hhbmdlTGVnZW5kKF91bnJlZihMZWdlbmRPcHQpLlZBTFVFLCAkZXZlbnQsIGluZGV4KTsKICAgICAgICAgIH0sCiAgICAgICAgICBzaXplOiAic21hbGwiLAogICAgICAgICAgY2xhc3M6ICJpdGVtIgogICAgICAgIH0sIG51bGwsIDgsIFsibW9kZWxWYWx1ZSIsICJvblVwZGF0ZTptb2RlbFZhbHVlIiwgIm9uQ2hhbmdlIl0pLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJzcGFuIiwgbnVsbCwgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X0ljb24sIHsKICAgICAgICAgIGNsYXNzOiAiY3AgZGVsZXRlIiwKICAgICAgICAgIGljb25OYW1lOiAicmVtb3ZlX2NpcmNsZV9vdXRsaW5lIiwKICAgICAgICAgIHNpemU6ICJtaWRkbGUiLAogICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygkZXZlbnQpIHsKICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZU1ldHJpYyhpbmRleCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgbnVsbCwgOCwgWyJvbkNsaWNrIl0pLCBfd2l0aERpcmVjdGl2ZXMoX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfSWNvbiwgewogICAgICAgICAgY2xhc3M6ICJjcCIsCiAgICAgICAgICBpY29uTmFtZTogImFkZF9jaXJjbGVfb3V0bGluZWNvbnRyb2xfcG9pbnQiLAogICAgICAgICAgc2l6ZTogIm1pZGRsZSIsCiAgICAgICAgICBvbkNsaWNrOiBhZGRNZXRyaWMKICAgICAgICB9LCBudWxsLCA1MTIpLCBbW192U2hvdywgaW5kZXggPT09IF91bnJlZihsZWdlbmQpLm1ldHJpYy5sZW5ndGggLSAxICYmIF91bnJlZihsZWdlbmQpLm1ldHJpYy5sZW5ndGggPCA1XV0pXSksIF93aXRoRGlyZWN0aXZlcyhfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBudWxsLCAiJiYiLCA1MTIpLCBbW192U2hvdywgaW5kZXggIT09IF91bnJlZihsZWdlbmQpLm1ldHJpYy5sZW5ndGggLSAxXV0pXSk7CiAgICAgIH0pLCAxMjgpKSwgX2hvaXN0ZWRfMTMsIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2lucHV0LCB7CiAgICAgICAgbW9kZWxWYWx1ZTogX3VucmVmKGRlc2NyaXB0aW9uKS5oZWFsdGh5LAogICAgICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzNdIHx8IChfY2FjaGVbM10gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gX3VucmVmKGRlc2NyaXB0aW9uKS5oZWFsdGh5ID0gJGV2ZW50OwogICAgICAgIH0pLAogICAgICAgIHBsYWNlaG9sZGVyOiAiUGxlYXNlIGlucHV0IGRlc2NyaXB0aW9uIiwKICAgICAgICBzaXplOiAic21hbGwiLAogICAgICAgIGNsYXNzOiAibXQtNSIKICAgICAgfSwgbnVsbCwgOCwgWyJtb2RlbFZhbHVlIl0pLCBfaG9pc3RlZF8xNCwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfaW5wdXQsIHsKICAgICAgICBtb2RlbFZhbHVlOiBfdW5yZWYoZGVzY3JpcHRpb24pLnVuaGVhbHRoeSwKICAgICAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVs0XSB8fCAoX2NhY2hlWzRdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgcmV0dXJuIF91bnJlZihkZXNjcmlwdGlvbikudW5oZWFsdGh5ID0gJGV2ZW50OwogICAgICAgIH0pLAogICAgICAgIHBsYWNlaG9sZGVyOiAiUGxlYXNlIGlucHV0IGRlc2NyaXB0aW9uIiwKICAgICAgICBzaXplOiAic21hbGwiLAogICAgICAgIGNsYXNzOiAibXQtNSIKICAgICAgfSwgbnVsbCwgOCwgWyJtb2RlbFZhbHVlIl0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9lbF9idXR0b24sIHsKICAgICAgICBvbkNsaWNrOiBzZXRMZWdlbmQsCiAgICAgICAgY2xhc3M6ICJsZWdlbmQtYnRuIiwKICAgICAgICBzaXplOiAic21hbGwiLAogICAgICAgIHR5cGU6ICJwcmltYXJ5IgogICAgICB9LCB7CiAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFtfY3JlYXRlVGV4dFZOb2RlKF90b0Rpc3BsYXlTdHJpbmcoX3VucmVmKHQpKCJzZXRMZWdlbmQiKSksIDEpXTsKICAgICAgICB9KSwKICAgICAgICBfOiAxCiAgICAgIH0pXSwgNTEyKSwgW1tfdlNob3csIF91bnJlZihpc1NlcnZpY2UpXV0pXSwgNjQpOwogICAgfTsKICB9Cn0pOw=="},null]}