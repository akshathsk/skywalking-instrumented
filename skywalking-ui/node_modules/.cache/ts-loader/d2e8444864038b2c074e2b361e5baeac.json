{"remainingRequest":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/thread-loader/dist/cjs.js!/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/babel-loader/lib/index.js!/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/ts-loader/index.js??ref--15-3!/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/eslint-loader/index.js??ref--14-0!/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/src/store/modules/dashboard.ts","dependencies":[{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/src/store/modules/dashboard.ts","mtime":1661850019000},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/babel.config.js","mtime":1661850018000},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/unplugin/dist/webpack/loaders/transform.js","mtime":1663881224252},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/cache-loader/dist/cjs.js","mtime":1663881222784},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/thread-loader/dist/cjs.js","mtime":1663881222612},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/babel-loader/lib/index.js","mtime":1663881224500},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/ts-loader/index.js","mtime":1663881224684},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/eslint-loader/index.js","mtime":1663881222992}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3NrMTE3L2ZpbmFsLXByb2plY3QvYXBhY2hlLXNreXdhbGtpbmctYXBtLTkuMi4wL3NreXdhbGtpbmctdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIgZnJvbSAiL2hvbWUvc2sxMTcvZmluYWwtcHJvamVjdC9hcGFjaGUtc2t5d2Fsa2luZy1hcG0tOS4yLjAvc2t5d2Fsa2luZy11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9ob21lL3NrMTE3L2ZpbmFsLXByb2plY3QvYXBhY2hlLXNreXdhbGtpbmctYXBtLTkuMi4wL3NreXdhbGtpbmctdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIi9ob21lL3NrMTE3L2ZpbmFsLXByb2plY3QvYXBhY2hlLXNreXdhbGtpbmctYXBtLTkuMi4wL3NreXdhbGtpbmctdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CgovKioKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZSBvciBtb3JlCiAqIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUgZGlzdHJpYnV0ZWQgd2l0aAogKiB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuCiAqIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlIHRvIFlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wCiAqICh0aGUgIkxpY2Vuc2UiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoCiAqIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwppbXBvcnQgeyBkZWZpbmVTdG9yZSB9IGZyb20gInBpbmlhIjsKaW1wb3J0IHsgc3RvcmUgfSBmcm9tICJAL3N0b3JlIjsKaW1wb3J0IGdyYXBocWwgZnJvbSAiQC9ncmFwaHFsIjsKaW1wb3J0IHF1ZXJ5IGZyb20gIkAvZ3JhcGhxbC9mZXRjaCI7CmltcG9ydCB7IHVzZVNlbGVjdG9yU3RvcmUgfSBmcm9tICJAL3N0b3JlL21vZHVsZXMvc2VsZWN0b3JzIjsKaW1wb3J0IHsgTmV3Q29udHJvbCwgVGV4dENvbmZpZywgVGltZVJhbmdlQ29uZmlnIH0gZnJvbSAiLi4vZGF0YSI7CmltcG9ydCB7IEVsTWVzc2FnZSB9IGZyb20gImVsZW1lbnQtcGx1cyI7CmltcG9ydCB7IHVzZUkxOG4gfSBmcm9tICJ2dWUtaTE4biI7CmltcG9ydCB7IEVudGl0eVR5cGUgfSBmcm9tICJAL3ZpZXdzL2Rhc2hib2FyZC9kYXRhIjsKZXhwb3J0IHZhciBkYXNoYm9hcmRTdG9yZSA9IGRlZmluZVN0b3JlKHsKICBpZDogImRhc2hib2FyZCIsCiAgc3RhdGU6IGZ1bmN0aW9uIHN0YXRlKCkgewogICAgcmV0dXJuIHsKICAgICAgbGF5b3V0OiBbXSwKICAgICAgc2hvd0NvbmZpZzogZmFsc2UsCiAgICAgIHNlbGVjdGVkR3JpZDogbnVsbCwKICAgICAgZW50aXR5OiAiIiwKICAgICAgbGF5ZXJJZDogIiIsCiAgICAgIGFjdGl2ZWRHcmlkSXRlbTogIiIsCiAgICAgIHNlbGVjdG9yU3RvcmU6IHVzZVNlbGVjdG9yU3RvcmUoKSwKICAgICAgc2hvd1RvcG9sb2d5OiBmYWxzZSwKICAgICAgY3VycmVudFRhYkl0ZW1zOiBbXSwKICAgICAgZGFzaGJvYXJkczogW10sCiAgICAgIGN1cnJlbnREYXNoYm9hcmQ6IG51bGwsCiAgICAgIGVkaXRNb2RlOiBmYWxzZSwKICAgICAgY3VycmVudFRhYkluZGV4OiAwCiAgICB9OwogIH0sCiAgYWN0aW9uczogewogICAgc2V0TGF5b3V0OiBmdW5jdGlvbiBzZXRMYXlvdXQoZGF0YSkgewogICAgICB0aGlzLmxheW91dCA9IGRhdGE7CiAgICB9LAogICAgc2V0TW9kZTogZnVuY3Rpb24gc2V0TW9kZShtb2RlKSB7CiAgICAgIHRoaXMuZWRpdE1vZGUgPSBtb2RlOwogICAgfSwKICAgIHJlc2V0RGFzaGJvYXJkczogZnVuY3Rpb24gcmVzZXREYXNoYm9hcmRzKGxpc3QpIHsKICAgICAgdGhpcy5kYXNoYm9hcmRzID0gbGlzdDsKICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiZGFzaGJvYXJkcyIsIEpTT04uc3RyaW5naWZ5KGxpc3QpKTsKICAgIH0sCiAgICBzZXRDdXJyZW50RGFzaGJvYXJkOiBmdW5jdGlvbiBzZXRDdXJyZW50RGFzaGJvYXJkKGl0ZW0pIHsKICAgICAgdGhpcy5jdXJyZW50RGFzaGJvYXJkID0gaXRlbTsKICAgIH0sCiAgICBhZGRDb250cm9sOiBmdW5jdGlvbiBhZGRDb250cm9sKHR5cGUpIHsKICAgICAgdmFyIGFyciA9IHRoaXMubGF5b3V0Lm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBOdW1iZXIoZC5pKTsKICAgICAgfSk7CiAgICAgIHZhciBpbmRleCA9IFN0cmluZyhNYXRoLm1heC5hcHBseShNYXRoLCBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSkgKyAxKTsKCiAgICAgIGlmICghdGhpcy5sYXlvdXQubGVuZ3RoKSB7CiAgICAgICAgaW5kZXggPSAiMCI7CiAgICAgIH0KCiAgICAgIHZhciBuZXdJdGVtID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBOZXdDb250cm9sKSwge30sIHsKICAgICAgICBpOiBpbmRleCwKICAgICAgICBpZDogaW5kZXgsCiAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICBtZXRyaWNUeXBlczogWyIiXSwKICAgICAgICBtZXRyaWNzOiBbIiJdCiAgICAgIH0pOwoKICAgICAgaWYgKHR5cGUgPT09ICJUYWIiKSB7CiAgICAgICAgbmV3SXRlbS5oID0gMzY7CiAgICAgICAgbmV3SXRlbS5hY3RpdmVkVGFiSW5kZXggPSAwOwogICAgICAgIG5ld0l0ZW0uY2hpbGRyZW4gPSBbewogICAgICAgICAgbmFtZTogIlRhYjEiLAogICAgICAgICAgY2hpbGRyZW46IFtdCiAgICAgICAgfSwgewogICAgICAgICAgbmFtZTogIlRhYjIiLAogICAgICAgICAgY2hpbGRyZW46IFtdCiAgICAgICAgfV07CiAgICAgIH0KCiAgICAgIGlmICh0eXBlID09PSAiVG9wb2xvZ3kiKSB7CiAgICAgICAgbmV3SXRlbS5oID0gMzY7CiAgICAgICAgbmV3SXRlbS5ncmFwaCA9IHsKICAgICAgICAgIHNob3dEZXB0aDogdHJ1ZSwKICAgICAgICAgIGRlcHRoOiB0aGlzLmVudGl0eSA9PT0gRW50aXR5VHlwZVsxXS52YWx1ZSA/IDEgOiB0aGlzLmVudGl0eSA9PT0gRW50aXR5VHlwZVswXS52YWx1ZSA/IDIgOiAzCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgaWYgKFsiVHJhY2UiLCAiUHJvZmlsZSIsICJMb2ciLCAiRGVtYW5kTG9nIiwgIkVicGYiLCAiTmV0d29ya1Byb2ZpbGluZyJdLmluY2x1ZGVzKHR5cGUpKSB7CiAgICAgICAgbmV3SXRlbS5oID0gMzY7CiAgICAgIH0KCiAgICAgIGlmICh0eXBlID09PSAiVGV4dCIpIHsKICAgICAgICBuZXdJdGVtLmggPSA2OwogICAgICAgIG5ld0l0ZW0uZ3JhcGggPSBUZXh0Q29uZmlnOwogICAgICB9CgogICAgICBpZiAodHlwZSA9PT0gIlRpbWVSYW5nZSIpIHsKICAgICAgICBuZXdJdGVtLncgPSA4OwogICAgICAgIG5ld0l0ZW0uaCA9IDY7CiAgICAgICAgbmV3SXRlbS5ncmFwaCA9IFRpbWVSYW5nZUNvbmZpZzsKICAgICAgfQoKICAgICAgdGhpcy5hY3RpdmVkR3JpZEl0ZW0gPSBuZXdJdGVtLmk7CiAgICAgIHRoaXMuc2VsZWN0ZWRHcmlkID0gbmV3SXRlbTsKICAgICAgdGhpcy5sYXlvdXQgPSB0aGlzLmxheW91dC5tYXAoZnVuY3Rpb24gKGQpIHsKICAgICAgICBkLnkgPSBkLnkgKyBuZXdJdGVtLmg7CiAgICAgICAgcmV0dXJuIGQ7CiAgICAgIH0pOwogICAgICB0aGlzLmxheW91dC5wdXNoKG5ld0l0ZW0pOwogICAgfSwKICAgIGFkZFRhYkl0ZW06IGZ1bmN0aW9uIGFkZFRhYkl0ZW0oaXRlbSkgewogICAgICB2YXIgX3RoaXMkbGF5b3V0JGlkeCRjaGlsLCBfdGhpcyRsYXlvdXQkaWR4JGNoaWwyOwoKICAgICAgdmFyIGlkeCA9IHRoaXMubGF5b3V0LmZpbmRJbmRleChmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBkLmkgPT09IGl0ZW0uaTsKICAgICAgfSk7CgogICAgICBpZiAoIXRoaXMubGF5b3V0W2lkeF0uY2hpbGRyZW4pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBsZW4gPSAoKF90aGlzJGxheW91dCRpZHgkY2hpbCA9IHRoaXMubGF5b3V0W2lkeF0uY2hpbGRyZW4pID09PSBudWxsIHx8IF90aGlzJGxheW91dCRpZHgkY2hpbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbGF5b3V0JGlkeCRjaGlsLmxlbmd0aCkgfHwgMDsKICAgICAgdmFyIGkgPSB7CiAgICAgICAgbmFtZTogIlRhYiIgKyAobGVuICsgMSksCiAgICAgICAgY2hpbGRyZW46IFtdCiAgICAgIH07CiAgICAgIChfdGhpcyRsYXlvdXQkaWR4JGNoaWwyID0gdGhpcy5sYXlvdXRbaWR4XS5jaGlsZHJlbikgPT09IG51bGwgfHwgX3RoaXMkbGF5b3V0JGlkeCRjaGlsMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbGF5b3V0JGlkeCRjaGlsMi5wdXNoKGkpOwogICAgfSwKICAgIGFkZFRhYkNvbnRyb2xzOiBmdW5jdGlvbiBhZGRUYWJDb250cm9scyh0eXBlKSB7CiAgICAgIHZhciBhY3RpdmVkR3JpZEl0ZW0gPSB0aGlzLmFjdGl2ZWRHcmlkSXRlbS5zcGxpdCgiLSIpWzBdOwogICAgICB2YXIgaWR4ID0gdGhpcy5sYXlvdXQuZmluZEluZGV4KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGQuaSA9PT0gYWN0aXZlZEdyaWRJdGVtOwogICAgICB9KTsKCiAgICAgIGlmIChpZHggPCAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgdGFiSW5kZXggPSB0aGlzLmxheW91dFtpZHhdLmFjdGl2ZWRUYWJJbmRleCB8fCAwOwogICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLmxheW91dFtpZHhdLmNoaWxkcmVuW3RhYkluZGV4XS5jaGlsZHJlbjsKICAgICAgdmFyIGFyciA9IGNoaWxkcmVuLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBOdW1iZXIoZC5pKTsKICAgICAgfSk7CiAgICAgIHZhciBpbmRleCA9IFN0cmluZyhNYXRoLm1heC5hcHBseShNYXRoLCBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSkgKyAxKTsKCiAgICAgIGlmICghY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgaW5kZXggPSAiMCI7CiAgICAgIH0KCiAgICAgIHZhciBpZCA9ICIiLmNvbmNhdChhY3RpdmVkR3JpZEl0ZW0sICItIikuY29uY2F0KHRhYkluZGV4LCAiLSIpLmNvbmNhdChpbmRleCk7CgogICAgICB2YXIgbmV3SXRlbSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgTmV3Q29udHJvbCksIHt9LCB7CiAgICAgICAgaTogaW5kZXgsCiAgICAgICAgaWQ6IGlkLAogICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgbWV0cmljVHlwZXM6IFsiIl0sCiAgICAgICAgbWV0cmljczogWyIiXQogICAgICB9KTsKCiAgICAgIGlmICh0eXBlID09PSAiVG9wb2xvZ3kiKSB7CiAgICAgICAgbmV3SXRlbS5oID0gMzI7CiAgICAgICAgbmV3SXRlbS5ncmFwaCA9IHsKICAgICAgICAgIHNob3dEZXB0aDogdHJ1ZQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGlmIChbIlRyYWNlIiwgIlByb2ZpbGUiLCAiTG9nIiwgIkRlbWFuZExvZyIsICJFYnBmIiwgIk5ldHdvcmtQcm9maWxpbmciXS5pbmNsdWRlcyh0eXBlKSkgewogICAgICAgIG5ld0l0ZW0uaCA9IDMyOwogICAgICB9CgogICAgICBpZiAodHlwZSA9PT0gIlRleHQiKSB7CiAgICAgICAgbmV3SXRlbS5oID0gNjsKICAgICAgICBuZXdJdGVtLmdyYXBoID0gVGV4dENvbmZpZzsKICAgICAgfQoKICAgICAgaWYgKHR5cGUgPT09ICJUaW1lUmFuZ2UiKSB7CiAgICAgICAgbmV3SXRlbS53ID0gODsKICAgICAgICBuZXdJdGVtLmggPSA2OwogICAgICAgIG5ld0l0ZW0uZ3JhcGggPSBUZXh0Q29uZmlnOwogICAgICB9CgogICAgICBpZiAodGhpcy5sYXlvdXRbaWR4XS5jaGlsZHJlbikgewogICAgICAgIHZhciBpdGVtcyA9IGNoaWxkcmVuLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgICAgZC55ID0gZC55ICsgbmV3SXRlbS5oOwogICAgICAgICAgcmV0dXJuIGQ7CiAgICAgICAgfSk7CiAgICAgICAgaXRlbXMucHVzaChuZXdJdGVtKTsKICAgICAgICB0aGlzLmxheW91dFtpZHhdLmNoaWxkcmVuW3RhYkluZGV4XS5jaGlsZHJlbiA9IGl0ZW1zOwogICAgICAgIHRoaXMuY3VycmVudFRhYkl0ZW1zID0gaXRlbXM7CiAgICAgIH0KICAgIH0sCiAgICBhY3RpdmVHcmlkSXRlbTogZnVuY3Rpb24gYWN0aXZlR3JpZEl0ZW0oaW5kZXgpIHsKICAgICAgdGhpcy5hY3RpdmVkR3JpZEl0ZW0gPSBpbmRleDsKICAgIH0sCiAgICBzZXRBY3RpdmVUYWJJbmRleDogZnVuY3Rpb24gc2V0QWN0aXZlVGFiSW5kZXgoaW5kZXgsIHRhcmdldCkgewogICAgICB0aGlzLmN1cnJlbnRUYWJJbmRleCA9IGluZGV4OwogICAgICB2YXIgbSA9IHRhcmdldCB8fCB0aGlzLmFjdGl2ZWRHcmlkSXRlbTsKICAgICAgdmFyIGlkeCA9IHRoaXMubGF5b3V0LmZpbmRJbmRleChmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBkLmkgPT09IG07CiAgICAgIH0pOwoKICAgICAgaWYgKGlkeCA8IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMubGF5b3V0W2lkeF0uYWN0aXZlZFRhYkluZGV4ID0gaW5kZXg7CiAgICB9LAogICAgc2V0Q3VycmVudFRhYkl0ZW1zOiBmdW5jdGlvbiBzZXRDdXJyZW50VGFiSXRlbXMoaXRlbXMpIHsKICAgICAgdGhpcy5jdXJyZW50VGFiSXRlbXMgPSBpdGVtczsKICAgIH0sCiAgICByZW1vdmVUYWI6IGZ1bmN0aW9uIHJlbW92ZVRhYihpdGVtKSB7CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkR3JpZCAmJiB0aGlzLnNlbGVjdGVkR3JpZC5pID09PSBpdGVtLmkpIHsKICAgICAgICB0aGlzLnNlbGVjdGVkR3JpZCA9IG51bGw7CiAgICAgIH0KCiAgICAgIHRoaXMubGF5b3V0ID0gdGhpcy5sYXlvdXQuZmlsdGVyKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGQuaSAhPT0gaXRlbS5pOwogICAgICB9KTsKICAgIH0sCiAgICByZW1vdmVDb250cm9sczogZnVuY3Rpb24gcmVtb3ZlQ29udHJvbHMoaXRlbSkgewogICAgICB2YXIgYWN0aXZlZCA9IHRoaXMuYWN0aXZlZEdyaWRJdGVtLnNwbGl0KCItIik7CiAgICAgIHZhciBpbmRleCA9IHRoaXMubGF5b3V0LmZpbmRJbmRleChmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBhY3RpdmVkWzBdID09PSBkLmk7CiAgICAgIH0pOwoKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRHcmlkICYmIHRoaXMuc2VsZWN0ZWRHcmlkLmkgPT09IGl0ZW0uaSkgewogICAgICAgIHRoaXMuc2VsZWN0ZWRHcmlkID0gbnVsbDsKICAgICAgfQoKICAgICAgaWYgKGFjdGl2ZWQubGVuZ3RoID09PSAzKSB7CiAgICAgICAgdmFyIHRhYkluZGV4ID0gTnVtYmVyKGFjdGl2ZWRbMV0pOwogICAgICAgIHRoaXMuY3VycmVudFRhYkl0ZW1zID0gdGhpcy5jdXJyZW50VGFiSXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICByZXR1cm4gYWN0aXZlZFsyXSAhPT0gZC5pOwogICAgICAgIH0pOwogICAgICAgIHRoaXMubGF5b3V0W2luZGV4XS5jaGlsZHJlblt0YWJJbmRleF0uY2hpbGRyZW4gPSB0aGlzLmN1cnJlbnRUYWJJdGVtczsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMubGF5b3V0ID0gdGhpcy5sYXlvdXQuZmlsdGVyKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGQuaSAhPT0gaXRlbS5pOwogICAgICB9KTsKICAgIH0sCiAgICByZW1vdmVUYWJJdGVtOiBmdW5jdGlvbiByZW1vdmVUYWJJdGVtKGl0ZW0sIGluZGV4KSB7CiAgICAgIHZhciBpZHggPSB0aGlzLmxheW91dC5maW5kSW5kZXgoZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gZC5pID09PSBpdGVtLmk7CiAgICAgIH0pOwoKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRHcmlkKSB7CiAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMubGF5b3V0W2lkeF0uY2hpbGRyZW5baW5kZXhdLmNoaWxkcmVuKSwKICAgICAgICAgICAgX3N0ZXA7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgX2l0ZW0gPSBfc3RlcC52YWx1ZTsKCiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkR3JpZC5pID09PSBfaXRlbS5pKSB7CiAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEdyaWQgPSBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHRoaXMubGF5b3V0W2lkeF0uY2hpbGRyZW4pIHsKICAgICAgICB2YXIgX3RoaXMkbGF5b3V0JGlkeCRjaGlsMzsKCiAgICAgICAgKF90aGlzJGxheW91dCRpZHgkY2hpbDMgPSB0aGlzLmxheW91dFtpZHhdLmNoaWxkcmVuKSA9PT0gbnVsbCB8fCBfdGhpcyRsYXlvdXQkaWR4JGNoaWwzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRsYXlvdXQkaWR4JGNoaWwzLnNwbGljZShpbmRleCwgMSk7CiAgICAgIH0KICAgIH0sCiAgICBzZXRDb25maWdQYW5lbDogZnVuY3Rpb24gc2V0Q29uZmlnUGFuZWwoc2hvdykgewogICAgICB0aGlzLnNob3dDb25maWcgPSBzaG93OwogICAgfSwKICAgIHNlbGVjdFdpZGdldDogZnVuY3Rpb24gc2VsZWN0V2lkZ2V0KGl0ZW0pIHsKICAgICAgdGhpcy5zZWxlY3RlZEdyaWQgPSBpdGVtOwogICAgfSwKICAgIHNldExheWVyOiBmdW5jdGlvbiBzZXRMYXllcihpZCkgewogICAgICB0aGlzLmxheWVySWQgPSBpZDsKICAgIH0sCiAgICBzZXRFbnRpdHk6IGZ1bmN0aW9uIHNldEVudGl0eSh0eXBlKSB7CiAgICAgIHRoaXMuZW50aXR5ID0gdHlwZTsKICAgIH0sCiAgICBzZXRUb3BvbG9neTogZnVuY3Rpb24gc2V0VG9wb2xvZ3koc2hvdykgewogICAgICB0aGlzLnNob3dUb3BvbG9neSA9IHNob3c7CiAgICB9LAogICAgc2V0Q29uZmlnczogZnVuY3Rpb24gc2V0Q29uZmlncyhwYXJhbSkgewogICAgICB2YXIgYWN0aXZlZCA9IHRoaXMuYWN0aXZlZEdyaWRJdGVtLnNwbGl0KCItIik7CiAgICAgIHZhciBpbmRleCA9IHRoaXMubGF5b3V0LmZpbmRJbmRleChmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBhY3RpdmVkWzBdID09PSBkLmk7CiAgICAgIH0pOwoKICAgICAgaWYgKGFjdGl2ZWQubGVuZ3RoID09PSAzKSB7CiAgICAgICAgdmFyIHRhYkluZGV4ID0gTnVtYmVyKGFjdGl2ZWRbMV0pOwogICAgICAgIHZhciBpdGVtSW5kZXggPSB0aGlzLmxheW91dFtpbmRleF0uY2hpbGRyZW5bdGFiSW5kZXhdLmNoaWxkcmVuLmZpbmRJbmRleChmdW5jdGlvbiAoZCkgewogICAgICAgICAgcmV0dXJuIGFjdGl2ZWRbMl0gPT09IGQuaTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLmxheW91dFtpbmRleF0uY2hpbGRyZW5bdGFiSW5kZXhdLmNoaWxkcmVuW2l0ZW1JbmRleF0gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMubGF5b3V0W2luZGV4XS5jaGlsZHJlblt0YWJJbmRleF0uY2hpbGRyZW5baXRlbUluZGV4XSksIHBhcmFtKTsKICAgICAgICB0aGlzLnNlbGVjdGVkR3JpZCA9IHRoaXMubGF5b3V0W2luZGV4XS5jaGlsZHJlblt0YWJJbmRleF0uY2hpbGRyZW5baXRlbUluZGV4XTsKICAgICAgICB0aGlzLnNldEN1cnJlbnRUYWJJdGVtcyh0aGlzLmxheW91dFtpbmRleF0uY2hpbGRyZW5bdGFiSW5kZXhdLmNoaWxkcmVuKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMubGF5b3V0W2luZGV4XSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGhpcy5sYXlvdXRbaW5kZXhdKSwgcGFyYW0pOwogICAgICB0aGlzLnNlbGVjdGVkR3JpZCA9IHRoaXMubGF5b3V0W2luZGV4XTsKICAgIH0sCiAgICBzZXRXaWRnZXQ6IGZ1bmN0aW9uIHNldFdpZGdldChwYXJhbSkgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGF5b3V0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMubGF5b3V0W2ldLnR5cGUgPT09ICJUYWIiKSB7CiAgICAgICAgICBpZiAodGhpcy5sYXlvdXRbaV0uY2hpbGRyZW4gJiYgdGhpcy5sYXlvdXRbaV0uY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5sYXlvdXRbaV0uY2hpbGRyZW4pLAogICAgICAgICAgICAgICAgX3N0ZXAyOwoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgICAgICAgdmFyIGNoaWxkID0gX3N0ZXAyLnZhbHVlOwoKICAgICAgICAgICAgICAgIGlmIChjaGlsZC5jaGlsZHJlbiAmJiBjaGlsZC5jaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCBjaGlsZC5jaGlsZHJlbi5sZW5ndGg7IGMrKykgewogICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5jaGlsZHJlbltjXS5pZCA9PT0gcGFyYW0uaWQpIHsKICAgICAgICAgICAgICAgICAgICAgIGNoaWxkLmNoaWxkcmVuLnNwbGljZShjLCAxLCBwYXJhbSk7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAodGhpcy5sYXlvdXRbaV0uaWQgPT09IHBhcmFtLmlkKSB7CiAgICAgICAgICAgIHRoaXMubGF5b3V0LnNwbGljZShpLCAxLCBwYXJhbSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgZmV0Y2hNZXRyaWNUeXBlOiBmdW5jdGlvbiBmZXRjaE1ldHJpY1R5cGUoaXRlbSkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gZ3JhcGhxbC5xdWVyeSgicXVlcnlUeXBlT2ZNZXRyaWNzIikucGFyYW1zKHsKICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCByZXMuZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBmZXRjaE1ldHJpY0xpc3Q6IGZ1bmN0aW9uIGZldGNoTWV0cmljTGlzdChyZWdleCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gZ3JhcGhxbC5xdWVyeSgicXVlcnlNZXRyaWNzIikucGFyYW1zKHsKICAgICAgICAgICAgICAgICAgcmVnZXg6IHJlZ2V4CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgcmVzLmRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBmZXRjaE1ldHJpY1ZhbHVlOiBmdW5jdGlvbiBmZXRjaE1ldHJpY1ZhbHVlKHBhcmFtKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBxdWVyeShwYXJhbSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIHJlcy5kYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZmV0Y2hUZW1wbGF0ZXM6IGZ1bmN0aW9uIGZldGNoVGVtcGxhdGVzKCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgcmVzLCBkYXRhLCBsaXN0LCBfaXRlcmF0b3IzLCBfc3RlcDMsIHQsIGMsIGtleTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBncmFwaHFsLnF1ZXJ5KCJnZXRUZW1wbGF0ZXMiKS5wYXJhbXMoe30pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIXJlcy5kYXRhLmVycm9ycykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCByZXMuZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGRhdGEgPSByZXMuZGF0YS5kYXRhLmdldEFsbFRlbXBsYXRlczsKICAgICAgICAgICAgICAgIGxpc3QgPSBbXTsKICAgICAgICAgICAgICAgIF9pdGVyYXRvcjMgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihkYXRhKTsKCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjMucygpOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMubigpKS5kb25lOykgewogICAgICAgICAgICAgICAgICAgIHQgPSBfc3RlcDMudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgYyA9IEpTT04ucGFyc2UodC5jb25maWd1cmF0aW9uKTsKICAgICAgICAgICAgICAgICAgICBrZXkgPSBbYy5sYXllciwgYy5lbnRpdHksIGMubmFtZV0uam9pbigiXyIpOwogICAgICAgICAgICAgICAgICAgIGxpc3QucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICBpZDogdC5pZCwKICAgICAgICAgICAgICAgICAgICAgIGxheWVyOiBjLmxheWVyLAogICAgICAgICAgICAgICAgICAgICAgZW50aXR5OiBjLmVudGl0eSwKICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGMubmFtZSwKICAgICAgICAgICAgICAgICAgICAgIGlzUm9vdDogYy5pc1Jvb3QKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICAgICAgaWQ6IHQuaWQsCiAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uOiBjCiAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMy5lKGVycik7CiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICBfaXRlcmF0b3IzLmYoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBsaXN0ID0gbGlzdC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgICAgICAgIHZhciBuYW1lQSA9IGEubmFtZS50b1VwcGVyQ2FzZSgpOwogICAgICAgICAgICAgICAgICB2YXIgbmFtZUIgPSBiLm5hbWUudG9VcHBlckNhc2UoKTsKCiAgICAgICAgICAgICAgICAgIGlmIChuYW1lQSA8IG5hbWVCKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBpZiAobmFtZUEgPiBuYW1lQikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiZGFzaGJvYXJkcyIsIEpTT04uc3RyaW5naWZ5KGxpc3QpKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCByZXMuZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzZXREYXNoYm9hcmRzOiBmdW5jdGlvbiBzZXREYXNoYm9hcmRzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImRhc2hib2FyZHMiKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5mZXRjaFRlbXBsYXRlcygpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDUuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIXJlcy5lcnJvcnMpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpcy5kYXNoYm9hcmRzID0gW107CiAgICAgICAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IocmVzLmVycm9ycyk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIF90aGlzLmRhc2hib2FyZHMgPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImRhc2hib2FyZHMiKSB8fCAiW10iKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgcmVzZXRUZW1wbGF0ZXM6IGZ1bmN0aW9uIHJlc2V0VGVtcGxhdGVzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuZmV0Y2hUZW1wbGF0ZXMoKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ2LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCFyZXMuZXJyb3JzKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMyLmRhc2hib2FyZHMgPSBbXTsKICAgICAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcihyZXMuZXJyb3JzKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgX3RoaXMyLmRhc2hib2FyZHMgPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImRhc2hib2FyZHMiKSB8fCAiW10iKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgdXBkYXRlRGFzaGJvYXJkOiBmdW5jdGlvbiB1cGRhdGVEYXNoYm9hcmQoc2V0dGluZykgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNygpIHsKICAgICAgICB2YXIgcmVzLCBqc29uOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gZ3JhcGhxbC5xdWVyeSgidXBkYXRlVGVtcGxhdGUiKS5wYXJhbXMoewogICAgICAgICAgICAgICAgICBzZXR0aW5nOiBzZXR0aW5nCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ3LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCFyZXMuZGF0YS5lcnJvcnMpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IocmVzLmRhdGEuZXJyb3JzKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KCJyZXR1cm4iLCByZXMuZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIGpzb24gPSByZXMuZGF0YS5kYXRhLmNoYW5nZVRlbXBsYXRlOwoKICAgICAgICAgICAgICAgIGlmIChqc29uLnN0YXR1cykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoanNvbi5tZXNzYWdlKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KCJyZXR1cm4iLCByZXMuZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBFbE1lc3NhZ2Uuc3VjY2VzcygiU2F2ZWQgc3VjY2Vzc2Z1bGx5Iik7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgicmV0dXJuIiwgcmVzLmRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU3KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2F2ZURhc2hib2FyZDogZnVuY3Rpb24gc2F2ZURhc2hib2FyZCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOCgpIHsKICAgICAgICB2YXIgYywgcmVzLCBqc29uLCBpbmRleCwgX3VzZUkxOG4sIHQsIGtleSwgbDsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmIChfdGhpczMuY3VycmVudERhc2hib2FyZC5uYW1lKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKCJUaGUgZGFzaGJvYXJkIG5hbWUgaXMgbmVlZGVkLiIpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBjID0gX29iamVjdFNwcmVhZCh7CiAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBfdGhpczMubGF5b3V0CiAgICAgICAgICAgICAgICB9LCBfdGhpczMuY3VycmVudERhc2hib2FyZCk7CgogICAgICAgICAgICAgICAgaWYgKCFfdGhpczMuY3VycmVudERhc2hib2FyZC5pZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLnVwZGF0ZURhc2hib2FyZCh7CiAgICAgICAgICAgICAgICAgIGlkOiBfdGhpczMuY3VycmVudERhc2hib2FyZC5pZCwKICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbjogSlNPTi5zdHJpbmdpZnkoYykKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDguc2VudDsKICAgICAgICAgICAgICAgIGpzb24gPSByZXMuZGF0YS5jaGFuZ2VUZW1wbGF0ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIGMuaXNSb290ID0gZmFsc2U7CiAgICAgICAgICAgICAgICBpbmRleCA9IF90aGlzMy5kYXNoYm9hcmRzLmZpbmRJbmRleChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZC5uYW1lID09PSBfdGhpczMuY3VycmVudERhc2hib2FyZC5uYW1lICYmIGQuZW50aXR5ID09PSBfdGhpczMuY3VycmVudERhc2hib2FyZC5lbnRpdHkgJiYgZC5sYXllciA9PT0gX3RoaXMzLmN1cnJlbnREYXNoYm9hcmQubGF5ZXJJZDsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmICghKGluZGV4ID4gLTEpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF91c2VJMThuID0gdXNlSTE4bigpLCB0ID0gX3VzZUkxOG4udDsKICAgICAgICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcih0KCJuYW1lRXJyb3IiKSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgcmV0dXJuIGdyYXBocWwucXVlcnkoImFkZE5ld1RlbXBsYXRlIikucGFyYW1zKHsKICAgICAgICAgICAgICAgICAgc2V0dGluZzogewogICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb246IEpTT04uc3RyaW5naWZ5KGMpCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ4LnNlbnQ7CiAgICAgICAgICAgICAgICBqc29uID0gcmVzLmRhdGEuZGF0YS5hZGRUZW1wbGF0ZTsKCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgIGlmICghKHJlcy5kYXRhLmVycm9ycyB8fCByZXMuZXJyb3JzKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDI0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IocmVzLmRhdGEuZXJyb3JzKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguYWJydXB0KCJyZXR1cm4iLCByZXMuZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgICBpZiAoanNvbi5zdGF0dXMpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAyNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKGpzb24ubWVzc2FnZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIiwganNvbik7CgogICAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgICAgICBpZiAoIV90aGlzMy5jdXJyZW50RGFzaGJvYXJkLmlkKSB7CiAgICAgICAgICAgICAgICAgIEVsTWVzc2FnZS5zdWNjZXNzKCJTYXZlZCBzdWNjZXNzZnVsbHkiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBrZXkgPSBbX3RoaXMzLmN1cnJlbnREYXNoYm9hcmQubGF5ZXIsIF90aGlzMy5jdXJyZW50RGFzaGJvYXJkLmVudGl0eSwgX3RoaXMzLmN1cnJlbnREYXNoYm9hcmQubmFtZV0uam9pbigiXyIpOwogICAgICAgICAgICAgICAgX3RoaXMzLmN1cnJlbnREYXNoYm9hcmQuaWQgPSBqc29uLmlkOwoKICAgICAgICAgICAgICAgIGlmIChfdGhpczMuY3VycmVudERhc2hib2FyZC5pZCkgewogICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7CiAgICAgICAgICAgICAgICAgIF90aGlzMy5kYXNoYm9hcmRzID0gX3RoaXMzLmRhc2hib2FyZHMuZmlsdGVyKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuaWQgIT09IF90aGlzMy5jdXJyZW50RGFzaGJvYXJkLmlkOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczMuZGFzaGJvYXJkcy5wdXNoKF90aGlzMy5jdXJyZW50RGFzaGJvYXJkKTsKCiAgICAgICAgICAgICAgICBsID0gewogICAgICAgICAgICAgICAgICBpZDoganNvbi5pZCwKICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbjogYwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeShsKSk7CiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJkYXNoYm9hcmRzIiwgSlNPTi5zdHJpbmdpZnkoX3RoaXMzLmRhc2hib2FyZHMpKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguYWJydXB0KCJyZXR1cm4iLCBqc29uKTsKCiAgICAgICAgICAgICAgY2FzZSAzNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGRlbGV0ZURhc2hib2FyZDogZnVuY3Rpb24gZGVsZXRlRGFzaGJvYXJkKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU5KCkgewogICAgICAgIHZhciByZXMsIGpzb24sIGtleTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0OSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGdyYXBocWwucXVlcnkoInJlbW92ZVRlbXBsYXRlIikucGFyYW1zKHsKICAgICAgICAgICAgICAgICAgaWQ6IF90aGlzNC5jdXJyZW50RGFzaGJvYXJkLmlkCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ5LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCFyZXMuZGF0YS5lcnJvcnMpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IocmVzLmRhdGEuZXJyb3JzKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KCJyZXR1cm4iLCByZXMuZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIGpzb24gPSByZXMuZGF0YS5kYXRhLmRpc2FibGVUZW1wbGF0ZTsKCiAgICAgICAgICAgICAgICBpZiAoanNvbi5zdGF0dXMpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKGpzb24ubWVzc2FnZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgicmV0dXJuIiwgcmVzLmRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX3RoaXM0LmRhc2hib2FyZHMgPSBfdGhpczQuZGFzaGJvYXJkcy5maWx0ZXIoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuaWQgIT09IF90aGlzNC5jdXJyZW50RGFzaGJvYXJkLmlkOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBrZXkgPSBbX3RoaXM0LmN1cnJlbnREYXNoYm9hcmQubGF5ZXIsIF90aGlzNC5jdXJyZW50RGFzaGJvYXJkLmVudGl0eSwgX3RoaXM0LmN1cnJlbnREYXNoYm9hcmQubmFtZV0uam9pbigiXyIpOwogICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU5KTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9KTsKZXhwb3J0IGZ1bmN0aW9uIHVzZURhc2hib2FyZFN0b3JlKCkgewogIHJldHVybiBkYXNoYm9hcmRTdG9yZShzdG9yZSk7Cn0="},null]}