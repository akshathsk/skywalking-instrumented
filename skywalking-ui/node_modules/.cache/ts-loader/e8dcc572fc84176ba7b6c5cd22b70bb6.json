{"remainingRequest":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/thread-loader/dist/cjs.js!/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/babel-loader/lib/index.js!/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/ts-loader/index.js??ref--15-3!/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/src/views/dashboard/panel/Tool.vue?vue&type=script&lang=ts&setup=true","dependencies":[{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/src/views/dashboard/panel/Tool.vue","mtime":1661850019000},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/babel.config.js","mtime":1661850018000},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/unplugin/dist/webpack/loaders/transform.js","mtime":1663881224252},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/unplugin/dist/webpack/loaders/transform.js","mtime":1663881224252},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/unplugin/dist/webpack/loaders/transform.js","mtime":1663881224252},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/unplugin/dist/webpack/loaders/transform.js","mtime":1663881224252},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/cache-loader/dist/cjs.js","mtime":1663881222784},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/thread-loader/dist/cjs.js","mtime":1663881222612},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/babel-loader/lib/index.js","mtime":1663881224500},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/ts-loader/index.js","mtime":1663881224684},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/cache-loader/dist/cjs.js","mtime":1663881222784},{"path":"/home/sk117/final-project/apache-skywalking-apm-9.2.0/skywalking-ui/node_modules/vue-loader-v16/dist/index.js","mtime":1663881224404}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvc2sxMTcvZmluYWwtcHJvamVjdC9hcGFjaGUtc2t5d2Fsa2luZy1hcG0tOS4yLjAvc2t5d2Fsa2luZy11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciBmcm9tICIvaG9tZS9zazExNy9maW5hbC1wcm9qZWN0L2FwYWNoZS1za3l3YWxraW5nLWFwbS05LjIuMC9za3l3YWxraW5nLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3NrMTE3L2ZpbmFsLXByb2plY3QvYXBhY2hlLXNreXdhbGtpbmctYXBtLTkuMi4wL3NreXdhbGtpbmctdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgeyBkZWZpbmVDb21wb25lbnQgYXMgX2RlZmluZUNvbXBvbmVudCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHVucmVmIGFzIF91bnJlZiwgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUVsZW1lbnRCbG9jayBhcyBfY3JlYXRlRWxlbWVudEJsb2NrLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgdG9EaXNwbGF5U3RyaW5nIGFzIF90b0Rpc3BsYXlTdHJpbmcsIG5vcm1hbGl6ZUNsYXNzIGFzIF9ub3JtYWxpemVDbGFzcywgcmVuZGVyTGlzdCBhcyBfcmVuZGVyTGlzdCwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCB3aXRoQ3R4IGFzIF93aXRoQ3R4LCBjcmVhdGVCbG9jayBhcyBfY3JlYXRlQmxvY2ssIHJlc29sdmVEaXJlY3RpdmUgYXMgX3Jlc29sdmVEaXJlY3RpdmUsIHdpdGhEaXJlY3RpdmVzIGFzIF93aXRoRGlyZWN0aXZlcywgcHVzaFNjb3BlSWQgYXMgX3B1c2hTY29wZUlkLCBwb3BTY29wZUlkIGFzIF9wb3BTY29wZUlkIH0gZnJvbSAidnVlIjsKCnZhciBfd2l0aFNjb3BlSWQgPSBmdW5jdGlvbiBfd2l0aFNjb3BlSWQobikgewogIHJldHVybiBfcHVzaFNjb3BlSWQoImRhdGEtdi03MmUzMzYwOCIpLCBuID0gbigpLCBfcG9wU2NvcGVJZCgpLCBuOwp9OwoKdmFyIF9ob2lzdGVkXzEgPSB7CiAgY2xhc3M6ICJkYXNoYm9hcmQtdG9vbCBmbGV4LWgiCn07CnZhciBfaG9pc3RlZF8yID0gewogIGNsYXNzOiAiZmxleC1oIgp9Owp2YXIgX2hvaXN0ZWRfMyA9IHsKICBrZXk6IDAsCiAgY2xhc3M6ICJzZWxlY3RvcnMtaXRlbSIKfTsKCnZhciBfaG9pc3RlZF80ID0gLyojX19QVVJFX18qL193aXRoU2NvcGVJZChmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIC8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJzcGFuIiwgewogICAgY2xhc3M6ICJsYWJlbCIKICB9LCAiJFNlcnZpY2UiLCAtMSk7Cn0pOwoKdmFyIF9ob2lzdGVkXzUgPSB7CiAga2V5OiAxLAogIGNsYXNzOiAic2VsZWN0b3JzLWl0ZW0iCn07CnZhciBfaG9pc3RlZF82ID0gewogIGNsYXNzOiAibGFiZWwiCn07CnZhciBfaG9pc3RlZF83ID0gewogIGtleTogMiwKICBjbGFzczogInNlbGVjdG9ycy1pdGVtIgp9OwoKdmFyIF9ob2lzdGVkXzggPSAvKiNfX1BVUkVfXyovX3dpdGhTY29wZUlkKGZ1bmN0aW9uICgpIHsKICByZXR1cm4gLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoInNwYW4iLCB7CiAgICBjbGFzczogImxhYmVsIgogIH0sICIgJFByb2Nlc3MgIiwgLTEpOwp9KTsKCnZhciBfaG9pc3RlZF85ID0gewogIGtleTogMCwKICBjbGFzczogInNlbGVjdG9ycy1pdGVtIgp9OwoKdmFyIF9ob2lzdGVkXzEwID0gLyojX19QVVJFX18qL193aXRoU2NvcGVJZChmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIC8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJzcGFuIiwgewogICAgY2xhc3M6ICJsYWJlbCIKICB9LCAiJERlc3RpbmF0aW9uU2VydmljZSIsIC0xKTsKfSk7Cgp2YXIgX2hvaXN0ZWRfMTEgPSB7CiAga2V5OiAxLAogIGNsYXNzOiAic2VsZWN0b3JzLWl0ZW0iCn07CnZhciBfaG9pc3RlZF8xMiA9IHsKICBjbGFzczogImxhYmVsIgp9Owp2YXIgX2hvaXN0ZWRfMTMgPSB7CiAga2V5OiAyLAogIGNsYXNzOiAic2VsZWN0b3JzLWl0ZW0iCn07Cgp2YXIgX2hvaXN0ZWRfMTQgPSAvKiNfX1BVUkVfXyovX3dpdGhTY29wZUlkKGZ1bmN0aW9uICgpIHsKICByZXR1cm4gLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoInNwYW4iLCB7CiAgICBjbGFzczogImxhYmVsIgogIH0sICIgJERlc3RpbmF0aW9uUHJvY2VzcyAiLCAtMSk7Cn0pOwoKdmFyIF9ob2lzdGVkXzE1ID0gewogIGtleTogMCwKICBjbGFzczogImZsZXgtaCB0b29scyIKfTsKdmFyIF9ob2lzdGVkXzE2ID0gewogIGtleTogMCwKICBjbGFzczogInRvb2wtaWNvbnMiCn07CnZhciBfaG9pc3RlZF8xNyA9IHsKICBjbGFzczogInN3aXRjaCIKfTsKaW1wb3J0IHsgcmVhY3RpdmUsIHJlZiwgY29tcHV0ZWQsIHdhdGNoIH0gZnJvbSAidnVlIjsKaW1wb3J0IHsgdXNlUm91dGUgfSBmcm9tICJ2dWUtcm91dGVyIjsKaW1wb3J0IHsgdXNlRGFzaGJvYXJkU3RvcmUgfSBmcm9tICJAL3N0b3JlL21vZHVsZXMvZGFzaGJvYXJkIjsKaW1wb3J0IHsgdXNlQXBwU3RvcmVXaXRoT3V0IH0gZnJvbSAiQC9zdG9yZS9tb2R1bGVzL2FwcCI7CmltcG9ydCB7IEVudGl0eVR5cGUsIEFsbFRvb2xzLCBTZXJ2aWNlVG9vbHMsIEluc3RhbmNlVG9vbHMsIEVuZHBvaW50VG9vbHMsIEVuZHBvaW50UmVsYXRpb25Ub29scywgSW5zdGFuY2VSZWxhdGlvblRvb2xzLCBTZXJ2aWNlUmVsYXRpb25Ub29scywgUHJvY2Vzc1Rvb2xzIH0gZnJvbSAiLi4vZGF0YSI7CmltcG9ydCB7IHVzZVNlbGVjdG9yU3RvcmUgfSBmcm9tICJAL3N0b3JlL21vZHVsZXMvc2VsZWN0b3JzIjsKaW1wb3J0IHsgRWxNZXNzYWdlIH0gZnJvbSAiZWxlbWVudC1wbHVzIjsKaW1wb3J0IHsgdXNlSTE4biB9IGZyb20gInZ1ZS1pMThuIjsKZXhwb3J0IGRlZmF1bHQgLyojX19QVVJFX18qL19kZWZpbmVDb21wb25lbnQoewogIHNldHVwOiBmdW5jdGlvbiBzZXR1cChfX3Byb3BzKSB7CiAgICB2YXIgX3VzZUkxOG4gPSB1c2VJMThuKCksCiAgICAgICAgdCA9IF91c2VJMThuLnQ7CgogICAgdmFyIGRhc2hib2FyZFN0b3JlID0gdXNlRGFzaGJvYXJkU3RvcmUoKTsKICAgIHZhciBzZWxlY3RvclN0b3JlID0gdXNlU2VsZWN0b3JTdG9yZSgpOwogICAgdmFyIGFwcFN0b3JlID0gdXNlQXBwU3RvcmVXaXRoT3V0KCk7CiAgICB2YXIgcGFyYW1zID0gdXNlUm91dGUoKS5wYXJhbXM7CiAgICB2YXIgdG9vbEljb25zID0gcmVmKEFsbFRvb2xzKTsKICAgIHZhciBsb2FkaW5nID0gcmVmKGZhbHNlKTsKICAgIHZhciBzdGF0ZXMgPSByZWFjdGl2ZSh7CiAgICAgIGRlc3RTZXJ2aWNlOiAiIiwKICAgICAgZGVzdFBvZDogIiIsCiAgICAgIGtleTogMCwKICAgICAgY3VycmVudFNlcnZpY2U6ICIiLAogICAgICBjdXJyZW50UG9kOiAiIiwKICAgICAgY3VycmVudFByb2Nlc3M6ICIiLAogICAgICBjdXJyZW50RGVzdFNlcnZpY2U6ICIiLAogICAgICBjdXJyZW50RGVzdFBvZDogIiIsCiAgICAgIGN1cnJlbnREZXN0UHJvY2VzczogIiIKICAgIH0pOwogICAgdmFyIGtleSA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHR5cGUgPSBFbnRpdHlUeXBlLmZpbmQoZnVuY3Rpb24gKGQpIHsKICAgICAgICByZXR1cm4gZC52YWx1ZSA9PT0gZGFzaGJvYXJkU3RvcmUuZW50aXR5OwogICAgICB9KTsKICAgICAgcmV0dXJuIHR5cGUgJiYgdHlwZS5rZXkgfHwgMDsKICAgIH0pOwogICAgdmFyIGlzUmVsYXRpb24gPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBbRW50aXR5VHlwZVs3XS52YWx1ZSwgRW50aXR5VHlwZVs2XS52YWx1ZSwgRW50aXR5VHlwZVs1XS52YWx1ZV0uaW5jbHVkZXMoZGFzaGJvYXJkU3RvcmUuZW50aXR5KTsKICAgIH0pOwogICAgc2V0Q3VycmVudERhc2hib2FyZCgpOwogICAgYXBwU3RvcmUuc2V0RXZlbnRTdGFjayhbaW5pdFNlbGVjdG9yXSk7CiAgICBpbml0U2VsZWN0b3IoKTsKCiAgICBmdW5jdGlvbiBpbml0U2VsZWN0b3IoKSB7CiAgICAgIGdldFRvb2xzKCk7CgogICAgICBpZiAocGFyYW1zLnNlcnZpY2VJZCkgewogICAgICAgIHNldFNlbGVjdG9yKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZ2V0U2VydmljZXMoKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNldEN1cnJlbnREYXNoYm9hcmQoKSB7CiAgICAgIGlmIChwYXJhbXMubGF5ZXJJZCkgewogICAgICAgIGRhc2hib2FyZFN0b3JlLnNldExheWVyKHBhcmFtcy5sYXllcklkKTsKICAgICAgICBkYXNoYm9hcmRTdG9yZS5zZXRFbnRpdHkocGFyYW1zLmVudGl0eSk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzZXRTZWxlY3RvcigpIHsKICAgICAgcmV0dXJuIF9zZXRTZWxlY3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIGZ1bmN0aW9uIF9zZXRTZWxlY3RvcigpIHsKICAgICAgX3NldFNlbGVjdG9yID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBqc29uLCBjdXJyZW50U2VydmljZSwgY3VycmVudERlc3RTZXJ2aWNlLCBfaXRlcmF0b3IsIF9zdGVwLCBkLCBfaXRlcmF0b3IyLCBfc3RlcDIsIF9kOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIVtFbnRpdHlUeXBlWzJdLnZhbHVlLCBFbnRpdHlUeXBlWzNdLnZhbHVlLCBFbnRpdHlUeXBlWzVdLnZhbHVlLCBFbnRpdHlUeXBlWzZdLnZhbHVlLCBFbnRpdHlUeXBlWzddLnZhbHVlXS5pbmNsdWRlcyhTdHJpbmcocGFyYW1zLmVudGl0eSkpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBzZXRTb3VyY2VTZWxlY3RvcigpOwoKICAgICAgICAgICAgICAgIGlmICghW0VudGl0eVR5cGVbMl0udmFsdWUsIEVudGl0eVR5cGVbM10udmFsdWVdLmluY2x1ZGVzKFN0cmluZyhwYXJhbXMuZW50aXR5KSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBzZXREZXN0U2VsZWN0b3IoKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3RvclN0b3JlLmZldGNoU2VydmljZXMoZGFzaGJvYXJkU3RvcmUubGF5ZXJJZCk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIGpzb24gPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghanNvbi5lcnJvcnMpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IoanNvbi5lcnJvcnMpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBpZiAoc3RhdGVzLmN1cnJlbnRTZXJ2aWNlKSB7CiAgICAgICAgICAgICAgICAgIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHNlbGVjdG9yU3RvcmUuc2VydmljZXMpOwoKICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgICAgICAgICAgICAgZCA9IF9zdGVwLnZhbHVlOwoKICAgICAgICAgICAgICAgICAgICAgIGlmIChkLnZhbHVlID09PSBzdGF0ZXMuY3VycmVudFNlcnZpY2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFNlcnZpY2UgPSBkOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGlmIChkLnZhbHVlID09PSBzdGF0ZXMuY3VycmVudERlc3RTZXJ2aWNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnREZXN0U2VydmljZSA9IGQ7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihzZWxlY3RvclN0b3JlLnNlcnZpY2VzKTsKCiAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IyLnMoKTsgIShfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICAgICAgICAgIF9kID0gX3N0ZXAyLnZhbHVlOwoKICAgICAgICAgICAgICAgICAgICAgIGlmIChfZC5pZCA9PT0gU3RyaW5nKHBhcmFtcy5zZXJ2aWNlSWQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTZXJ2aWNlID0gX2Q7CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgaWYgKF9kLmlkID09PSBTdHJpbmcocGFyYW1zLmRlc3RTZXJ2aWNlSWQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnREZXN0U2VydmljZSA9IF9kOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBzZWxlY3RvclN0b3JlLnNldEN1cnJlbnRTZXJ2aWNlKGN1cnJlbnRTZXJ2aWNlKTsKICAgICAgICAgICAgICAgIHNlbGVjdG9yU3RvcmUuc2V0Q3VycmVudERlc3RTZXJ2aWNlKGN1cnJlbnREZXN0U2VydmljZSk7CiAgICAgICAgICAgICAgICBzdGF0ZXMuY3VycmVudFNlcnZpY2UgPSBzZWxlY3RvclN0b3JlLmN1cnJlbnRTZXJ2aWNlICYmIHNlbGVjdG9yU3RvcmUuY3VycmVudFNlcnZpY2UudmFsdWU7CiAgICAgICAgICAgICAgICBzdGF0ZXMuY3VycmVudERlc3RTZXJ2aWNlID0gc2VsZWN0b3JTdG9yZS5jdXJyZW50RGVzdFNlcnZpY2UgJiYgc2VsZWN0b3JTdG9yZS5jdXJyZW50RGVzdFNlcnZpY2UudmFsdWU7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwogICAgICByZXR1cm4gX3NldFNlbGVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgZnVuY3Rpb24gc2V0U291cmNlU2VsZWN0b3IoKSB7CiAgICAgIHJldHVybiBfc2V0U291cmNlU2VsZWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBfc2V0U291cmNlU2VsZWN0b3IoKSB7CiAgICAgIF9zZXRTb3VyY2VTZWxlY3RvciA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIGU7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3RvclN0b3JlLmdldFNlcnZpY2UoU3RyaW5nKHBhcmFtcy5zZXJ2aWNlSWQpKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgc3RhdGVzLmN1cnJlbnRTZXJ2aWNlID0gc2VsZWN0b3JTdG9yZS5jdXJyZW50U2VydmljZS52YWx1ZTsKICAgICAgICAgICAgICAgIGUgPSBTdHJpbmcocGFyYW1zLmVudGl0eSkuc3BsaXQoIlJlbGF0aW9uIilbMF07CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2hQb2RzKGUsIHNlbGVjdG9yU3RvcmUuY3VycmVudFNlcnZpY2UuaWQsIHRydWUpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSk7CiAgICAgIHJldHVybiBfc2V0U291cmNlU2VsZWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXREZXN0U2VsZWN0b3IoKSB7CiAgICAgIHJldHVybiBfc2V0RGVzdFNlbGVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgZnVuY3Rpb24gX3NldERlc3RTZWxlY3RvcigpIHsKICAgICAgX3NldERlc3RTZWxlY3RvciA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3RvclN0b3JlLmdldFNlcnZpY2UoU3RyaW5nKHBhcmFtcy5kZXN0U2VydmljZUlkKSwgdHJ1ZSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHN0YXRlcy5jdXJyZW50RGVzdFNlcnZpY2UgPSBzZWxlY3RvclN0b3JlLmN1cnJlbnREZXN0U2VydmljZS52YWx1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaFBvZHMoU3RyaW5nKHBhcmFtcy5lbnRpdHkpLCBzZWxlY3RvclN0b3JlLmN1cnJlbnREZXN0U2VydmljZS5pZCwgdHJ1ZSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKTsKICAgICAgcmV0dXJuIF9zZXREZXN0U2VsZWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRTZXJ2aWNlcygpIHsKICAgICAgcmV0dXJuIF9nZXRTZXJ2aWNlcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIGZ1bmN0aW9uIF9nZXRTZXJ2aWNlcygpIHsKICAgICAgX2dldFNlcnZpY2VzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIganNvbiwgcywgZCwgdmFsLCBlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoZGFzaGJvYXJkU3RvcmUuZW50aXR5KSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBpZiAoZGFzaGJvYXJkU3RvcmUubGF5ZXJJZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgaWYgKCEoZGFzaGJvYXJkU3RvcmUuZW50aXR5ID09PSBFbnRpdHlUeXBlWzFdLnZhbHVlKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdG9yU3RvcmUuZmV0Y2hTZXJ2aWNlcyhkYXNoYm9hcmRTdG9yZS5sYXllcklkKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAganNvbiA9IF9jb250ZXh0NC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghanNvbi5lcnJvcnMpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKGpzb24uZXJyb3JzKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIGlmIChzdGF0ZXMuY3VycmVudFNlcnZpY2UpIHsKICAgICAgICAgICAgICAgICAgcyA9IChzZWxlY3RvclN0b3JlLnNlcnZpY2VzIHx8IFtdKS5maW5kKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQubGFiZWwgPT09IHN0YXRlcy5jdXJyZW50U2VydmljZTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBzID0gKHNlbGVjdG9yU3RvcmUuc2VydmljZXMgfHwgW10pLmZpbmQoZnVuY3Rpb24gKGQsIGluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4ID09PSAwOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBzZWxlY3RvclN0b3JlLnNldEN1cnJlbnRTZXJ2aWNlKHMgfHwgbnVsbCk7CiAgICAgICAgICAgICAgICB2YWwgPSAxOwoKICAgICAgICAgICAgICAgIGlmIChrZXkudmFsdWUgPT09IDUpIHsKICAgICAgICAgICAgICAgICAgdmFsID0gMDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoc3RhdGVzLmN1cnJlbnRTZXJ2aWNlKSB7CiAgICAgICAgICAgICAgICAgIGQgPSAoc2VsZWN0b3JTdG9yZS5zZXJ2aWNlcyB8fCBbXSkuZmluZChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmxhYmVsID09PSBzdGF0ZXMuY3VycmVudERlc3RTZXJ2aWNlOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGQgPSAoc2VsZWN0b3JTdG9yZS5zZXJ2aWNlcyB8fCBbXSkuZmluZChmdW5jdGlvbiAoZCwgaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXggPT09IHZhbDsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgc2VsZWN0b3JTdG9yZS5zZXRDdXJyZW50RGVzdFNlcnZpY2UoZCB8fCBudWxsKTsKCiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0b3JTdG9yZS5jdXJyZW50U2VydmljZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgICBzdGF0ZXMuY3VycmVudFNlcnZpY2UgPSBzZWxlY3RvclN0b3JlLmN1cnJlbnRTZXJ2aWNlLnZhbHVlOwogICAgICAgICAgICAgICAgZSA9IGRhc2hib2FyZFN0b3JlLmVudGl0eS5zcGxpdCgiUmVsYXRpb24iKVswXTsKCiAgICAgICAgICAgICAgICBpZiAoIVtFbnRpdHlUeXBlWzJdLnZhbHVlLCBFbnRpdHlUeXBlWzNdLnZhbHVlLCBFbnRpdHlUeXBlWzVdLnZhbHVlLCBFbnRpdHlUeXBlWzZdLnZhbHVlLCBFbnRpdHlUeXBlWzddLnZhbHVlXS5pbmNsdWRlcyhkYXNoYm9hcmRTdG9yZS5lbnRpdHkpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjU7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2hQb2RzKGUsIHNlbGVjdG9yU3RvcmUuY3VycmVudFNlcnZpY2UuaWQsIHRydWUpOwoKICAgICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAgICAgaWYgKHNlbGVjdG9yU3RvcmUuY3VycmVudERlc3RTZXJ2aWNlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgICAgIHN0YXRlcy5jdXJyZW50RGVzdFNlcnZpY2UgPSBzZWxlY3RvclN0b3JlLmN1cnJlbnREZXN0U2VydmljZS52YWx1ZTsKCiAgICAgICAgICAgICAgICBpZiAoIVtFbnRpdHlUeXBlWzVdLnZhbHVlLCBFbnRpdHlUeXBlWzZdLnZhbHVlLCBFbnRpdHlUeXBlWzddLnZhbHVlXS5pbmNsdWRlcyhkYXNoYm9hcmRTdG9yZS5lbnRpdHkpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzE7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2hQb2RzKGRhc2hib2FyZFN0b3JlLmVudGl0eSwgc2VsZWN0b3JTdG9yZS5jdXJyZW50RGVzdFNlcnZpY2UuaWQsIHRydWUpOwoKICAgICAgICAgICAgICBjYXNlIDMxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpOwogICAgICByZXR1cm4gX2dldFNlcnZpY2VzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlU2VydmljZShfeCkgewogICAgICByZXR1cm4gX2NoYW5nZVNlcnZpY2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBfY2hhbmdlU2VydmljZSgpIHsKICAgICAgX2NoYW5nZVNlcnZpY2UgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KHNlcnZpY2UpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKHNlcnZpY2VbMF0pIHsKICAgICAgICAgICAgICAgICAgc3RhdGVzLmN1cnJlbnRTZXJ2aWNlID0gc2VydmljZVswXS52YWx1ZTsKICAgICAgICAgICAgICAgICAgc2VsZWN0b3JTdG9yZS5zZXRDdXJyZW50U2VydmljZShzZXJ2aWNlWzBdKTsKICAgICAgICAgICAgICAgICAgc2VsZWN0b3JTdG9yZS5zZXRDdXJyZW50UG9kKG51bGwpOwogICAgICAgICAgICAgICAgICBzdGF0ZXMuY3VycmVudFBvZCA9ICIiOwogICAgICAgICAgICAgICAgICBzdGF0ZXMuY3VycmVudFByb2Nlc3MgPSAiIjsKCiAgICAgICAgICAgICAgICAgIGlmIChkYXNoYm9hcmRTdG9yZS5lbnRpdHkgPT09IEVudGl0eVR5cGVbN10udmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICBmZXRjaFBvZHMoIlByb2Nlc3MiLCBzZWxlY3RvclN0b3JlLmN1cnJlbnRTZXJ2aWNlLmlkLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBmZXRjaFBvZHMoZGFzaGJvYXJkU3RvcmUuZW50aXR5LCBzZWxlY3RvclN0b3JlLmN1cnJlbnRTZXJ2aWNlLmlkLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgc2VsZWN0b3JTdG9yZS5zZXRDdXJyZW50U2VydmljZShudWxsKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgfSkpOwogICAgICByZXR1cm4gX2NoYW5nZVNlcnZpY2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VEZXN0U2VydmljZShzZXJ2aWNlKSB7CiAgICAgIGlmIChzZXJ2aWNlWzBdKSB7CiAgICAgICAgc3RhdGVzLmN1cnJlbnREZXN0U2VydmljZSA9IHNlcnZpY2VbMF0udmFsdWU7CiAgICAgICAgc2VsZWN0b3JTdG9yZS5zZXRDdXJyZW50RGVzdFNlcnZpY2Uoc2VydmljZVswXSk7CiAgICAgICAgc2VsZWN0b3JTdG9yZS5zZXRDdXJyZW50RGVzdFBvZChudWxsKTsKICAgICAgICBzdGF0ZXMuY3VycmVudERlc3RQb2QgPSAiIjsKICAgICAgICBzdGF0ZXMuY3VycmVudERlc3RQcm9jZXNzID0gIiI7CiAgICAgICAgZmV0Y2hQb2RzKGRhc2hib2FyZFN0b3JlLmVudGl0eSwgc2VsZWN0b3JTdG9yZS5jdXJyZW50RGVzdFNlcnZpY2UuaWQsIHRydWUpOwogICAgICB9IGVsc2UgewogICAgICAgIHNlbGVjdG9yU3RvcmUuc2V0Q3VycmVudERlc3RTZXJ2aWNlKG51bGwpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlUG9kcyhfeDIpIHsKICAgICAgcmV0dXJuIF9jaGFuZ2VQb2RzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgZnVuY3Rpb24gX2NoYW5nZVBvZHMoKSB7CiAgICAgIF9jaGFuZ2VQb2RzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNihwb2QpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc2VsZWN0b3JTdG9yZS5zZXRDdXJyZW50UG9kKHBvZFswXSB8fCBudWxsKTsKCiAgICAgICAgICAgICAgICBpZiAoZGFzaGJvYXJkU3RvcmUuZW50aXR5ID09PSBFbnRpdHlUeXBlWzddLnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgIHNlbGVjdG9yU3RvcmUuc2V0Q3VycmVudFByb2Nlc3MobnVsbCk7CiAgICAgICAgICAgICAgICAgIHN0YXRlcy5jdXJyZW50UHJvY2VzcyA9ICIiOwogICAgICAgICAgICAgICAgICBmZXRjaFByb2Nlc3ModHJ1ZSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgIH0pKTsKICAgICAgcmV0dXJuIF9jaGFuZ2VQb2RzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlRGVzdFBvZHMocG9kKSB7CiAgICAgIHNlbGVjdG9yU3RvcmUuc2V0Q3VycmVudERlc3RQb2QocG9kWzBdIHx8IG51bGwpOwoKICAgICAgaWYgKGRhc2hib2FyZFN0b3JlLmVudGl0eSA9PT0gRW50aXR5VHlwZVs3XS52YWx1ZSkgewogICAgICAgIHNlbGVjdG9yU3RvcmUuc2V0Q3VycmVudERlc3RQcm9jZXNzKG51bGwpOwogICAgICAgIHN0YXRlcy5jdXJyZW50RGVzdFByb2Nlc3MgPSAiIjsKICAgICAgICBmZXRjaERlc3RQcm9jZXNzKHRydWUpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlRGVzdFByb2Nlc3MocG9kKSB7CiAgICAgIHNlbGVjdG9yU3RvcmUuc2V0Q3VycmVudERlc3RQcm9jZXNzKHBvZFswXSB8fCBudWxsKTsKICAgICAgc3RhdGVzLmN1cnJlbnREZXN0UHJvY2VzcyA9IHBvZFswXS5sYWJlbCB8fCAiIjsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGFuZ2VQcm9jZXNzKHBvZCkgewogICAgICBzZWxlY3RvclN0b3JlLnNldEN1cnJlbnRQcm9jZXNzKHBvZFswXSB8fCBudWxsKTsKICAgICAgc3RhdGVzLmN1cnJlbnRQcm9jZXNzID0gcG9kWzBdLmxhYmVsIHx8ICIiOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZU1vZGUoKSB7CiAgICAgIGlmIChkYXNoYm9hcmRTdG9yZS5lZGl0TW9kZSkgewogICAgICAgIEVsTWVzc2FnZS53YXJuaW5nKHQoImVkaXRXYXJuaW5nIikpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgRWxNZXNzYWdlLndhcm5pbmcodCgidmlld1dhcm5pbmciKSk7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwbHlEYXNoYm9hcmQoKSB7CiAgICAgIHJldHVybiBfYXBwbHlEYXNoYm9hcmQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBfYXBwbHlEYXNoYm9hcmQoKSB7CiAgICAgIF9hcHBseURhc2hib2FyZCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGxvYWRpbmcudmFsdWUgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGRhc2hib2FyZFN0b3JlLnNhdmVEYXNoYm9hcmQoKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgbG9hZGluZy52YWx1ZSA9IGZhbHNlOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTcpOwogICAgICB9KSk7CiAgICAgIHJldHVybiBfYXBwbHlEYXNoYm9hcmQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjbGlja0ljb25zKF94MykgewogICAgICByZXR1cm4gX2NsaWNrSWNvbnMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBfY2xpY2tJY29ucygpIHsKICAgICAgX2NsaWNrSWNvbnMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KHQpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCEoZGFzaGJvYXJkU3RvcmUuc2VsZWN0ZWRHcmlkICYmIGRhc2hib2FyZFN0b3JlLnNlbGVjdGVkR3JpZC50eXBlID09PSAiVGFiIikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBzZXRUYWJDb250cm9scyh0LmlkKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgaWYgKCEoZGFzaGJvYXJkU3RvcmUuYWN0aXZlZEdyaWRJdGVtLnNwbGl0KCItIikubGVuZ3RoID09PSAzKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHNldFRhYkNvbnRyb2xzKHQuaWQpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBzZXRDb250cm9scyh0LmlkKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU4KTsKICAgICAgfSkpOwogICAgICByZXR1cm4gX2NsaWNrSWNvbnMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRUYWJDb250cm9scyhpZCkgewogICAgICBzd2l0Y2ggKGlkKSB7CiAgICAgICAgY2FzZSAiYWRkV2lkZ2V0IjoKICAgICAgICAgIGRhc2hib2FyZFN0b3JlLmFkZFRhYkNvbnRyb2xzKCJXaWRnZXQiKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJhZGRUcmFjZSI6CiAgICAgICAgICBkYXNoYm9hcmRTdG9yZS5hZGRUYWJDb250cm9scygiVHJhY2UiKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJhZGRMb2ciOgogICAgICAgICAgZGFzaGJvYXJkU3RvcmUuYWRkVGFiQ29udHJvbHMoIkxvZyIpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgImFkZFByb2ZpbGUiOgogICAgICAgICAgZGFzaGJvYXJkU3RvcmUuYWRkVGFiQ29udHJvbHMoIlByb2ZpbGUiKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJhZGRFYnBmIjoKICAgICAgICAgIGRhc2hib2FyZFN0b3JlLmFkZFRhYkNvbnRyb2xzKCJFYnBmIik7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAiYWRkVG9wb2xvZ3kiOgogICAgICAgICAgZGFzaGJvYXJkU3RvcmUuYWRkVGFiQ29udHJvbHMoIlRvcG9sb2d5Iik7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAiYWRkVGV4dCI6CiAgICAgICAgICBkYXNoYm9hcmRTdG9yZS5hZGRUYWJDb250cm9scygiVGV4dCIpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgImFkZERlbWFuZExvZyI6CiAgICAgICAgICBkYXNoYm9hcmRTdG9yZS5hZGRUYWJDb250cm9scygiRGVtYW5kTG9nIik7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAiYWRkRXZlbnQiOgogICAgICAgICAgZGFzaGJvYXJkU3RvcmUuYWRkVGFiQ29udHJvbHMoIkV2ZW50Iik7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAiYWRkTmV0d29ya1Byb2ZpbGluZyI6CiAgICAgICAgICBkYXNoYm9hcmRTdG9yZS5hZGRUYWJDb250cm9scygiTmV0d29ya1Byb2ZpbGluZyIpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgImFkZFRpbWVSYW5nZSI6CiAgICAgICAgICBkYXNoYm9hcmRTdG9yZS5hZGRUYWJDb250cm9scygiVGltZVJhbmdlIik7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIEVsTWVzc2FnZS5pbmZvKCJEb24ndCBzdXBwb3J0IHRoaXMgY29udHJvbCIpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzZXRDb250cm9scyhpZCkgewogICAgICBzd2l0Y2ggKGlkKSB7CiAgICAgICAgY2FzZSAiYWRkV2lkZ2V0IjoKICAgICAgICAgIGRhc2hib2FyZFN0b3JlLmFkZENvbnRyb2woIldpZGdldCIpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgImFkZFRhYiI6CiAgICAgICAgICBkYXNoYm9hcmRTdG9yZS5hZGRDb250cm9sKCJUYWIiKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJhZGRUcmFjZSI6CiAgICAgICAgICBkYXNoYm9hcmRTdG9yZS5hZGRDb250cm9sKCJUcmFjZSIpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgImFkZFByb2ZpbGUiOgogICAgICAgICAgZGFzaGJvYXJkU3RvcmUuYWRkQ29udHJvbCgiUHJvZmlsZSIpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgImFkZEVicGYiOgogICAgICAgICAgZGFzaGJvYXJkU3RvcmUuYWRkQ29udHJvbCgiRWJwZiIpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgImFkZExvZyI6CiAgICAgICAgICBkYXNoYm9hcmRTdG9yZS5hZGRDb250cm9sKCJMb2ciKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJhZGRUb3BvbG9neSI6CiAgICAgICAgICBkYXNoYm9hcmRTdG9yZS5hZGRDb250cm9sKCJUb3BvbG9neSIpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgImFkZFRleHQiOgogICAgICAgICAgZGFzaGJvYXJkU3RvcmUuYWRkQ29udHJvbCgiVGV4dCIpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgImFkZERlbWFuZExvZyI6CiAgICAgICAgICBkYXNoYm9hcmRTdG9yZS5hZGRDb250cm9sKCJEZW1hbmRMb2ciKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJhZGRFdmVudCI6CiAgICAgICAgICBkYXNoYm9hcmRTdG9yZS5hZGRDb250cm9sKCJFdmVudCIpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgImFkZE5ldHdvcmtQcm9maWxpbmciOgogICAgICAgICAgZGFzaGJvYXJkU3RvcmUuYWRkQ29udHJvbCgiTmV0d29ya1Byb2ZpbGluZyIpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgImFkZFRpbWVSYW5nZSI6CiAgICAgICAgICBkYXNoYm9hcmRTdG9yZS5hZGRDb250cm9sKCJUaW1lUmFuZ2UiKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgZGFzaGJvYXJkU3RvcmUuYWRkQ29udHJvbCgiV2lkZ2V0Iik7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBmZXRjaFBvZHMoX3g0LCBfeDUsIF94NiwgX3g3KSB7CiAgICAgIHJldHVybiBfZmV0Y2hQb2RzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgZnVuY3Rpb24gX2ZldGNoUG9kcygpIHsKICAgICAgX2ZldGNoUG9kcyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkodHlwZSwgc2VydmljZUlkLCBzZXRQb2QsIHBhcmFtKSB7CiAgICAgICAgdmFyIHJlc3A7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0OS50MCA9IHR5cGU7CiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IF9jb250ZXh0OS50MCA9PT0gRW50aXR5VHlwZVsyXS52YWx1ZSA/IDMgOiBfY29udGV4dDkudDAgPT09IEVudGl0eVR5cGVbM10udmFsdWUgPyA4IDogX2NvbnRleHQ5LnQwID09PSBFbnRpdHlUeXBlWzZdLnZhbHVlID8gMTMgOiBfY29udGV4dDkudDAgPT09IEVudGl0eVR5cGVbNV0udmFsdWUgPyAxOCA6IF9jb250ZXh0OS50MCA9PT0gRW50aXR5VHlwZVs3XS52YWx1ZSA/IDIzIDogX2NvbnRleHQ5LnQwID09PSAiUHJvY2VzcyIgPyAyOSA6IDM1OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3RvclN0b3JlLmdldEVuZHBvaW50cyhfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgICAgICAgc2VydmljZUlkOiBzZXJ2aWNlSWQKICAgICAgICAgICAgICAgIH0sIHBhcmFtKSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIHJlc3AgPSBfY29udGV4dDkuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoc2V0UG9kKSB7CiAgICAgICAgICAgICAgICAgIHVwZGF0ZUN1cnJlbnRQb2QoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgiYnJlYWsiLCAzNik7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0b3JTdG9yZS5nZXRTZXJ2aWNlSW5zdGFuY2VzKHsKICAgICAgICAgICAgICAgICAgc2VydmljZUlkOiBzZXJ2aWNlSWQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgcmVzcCA9IF9jb250ZXh0OS5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChzZXRQb2QpIHsKICAgICAgICAgICAgICAgICAgdXBkYXRlQ3VycmVudFBvZCgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KCJicmVhayIsIDM2KTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0b3JTdG9yZS5nZXRFbmRwb2ludHMoX29iamVjdFNwcmVhZCh7CiAgICAgICAgICAgICAgICAgIHNlcnZpY2VJZDogc2VydmljZUlkLAogICAgICAgICAgICAgICAgICBpc1JlbGF0aW9uOiB0cnVlCiAgICAgICAgICAgICAgICB9LCBwYXJhbSkpOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgcmVzcCA9IF9jb250ZXh0OS5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChzZXRQb2QpIHsKICAgICAgICAgICAgICAgICAgdXBkYXRlQ3VycmVudERlc3RQb2QoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgiYnJlYWsiLCAzNik7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdG9yU3RvcmUuZ2V0U2VydmljZUluc3RhbmNlcyh7CiAgICAgICAgICAgICAgICAgIHNlcnZpY2VJZDogc2VydmljZUlkLAogICAgICAgICAgICAgICAgICBpc1JlbGF0aW9uOiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICAgIHJlc3AgPSBfY29udGV4dDkuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoc2V0UG9kKSB7CiAgICAgICAgICAgICAgICAgIHVwZGF0ZUN1cnJlbnREZXN0UG9kKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5hYnJ1cHQoImJyZWFrIiwgMzYpOwoKICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAyNTsKICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaFBvZHMoRW50aXR5VHlwZVs1XS52YWx1ZSwgc2VydmljZUlkLCBzZXRQb2QsIHBhcmFtKTsKCiAgICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMjc7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2hEZXN0UHJvY2VzcyhzZXRQb2QpOwoKICAgICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgICAgcmVzcCA9IF9jb250ZXh0OS5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5hYnJ1cHQoImJyZWFrIiwgMzYpOwoKICAgICAgICAgICAgICBjYXNlIDI5OgogICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAzMTsKICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaFBvZHMoRW50aXR5VHlwZVszXS52YWx1ZSwgc2VydmljZUlkLCBzZXRQb2QsIHBhcmFtKTsKCiAgICAgICAgICAgICAgY2FzZSAzMToKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMzM7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2hQcm9jZXNzKHNldFBvZCk7CgogICAgICAgICAgICAgIGNhc2UgMzM6CiAgICAgICAgICAgICAgICByZXNwID0gX2NvbnRleHQ5LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgiYnJlYWsiLCAzNik7CgogICAgICAgICAgICAgIGNhc2UgMzU6CiAgICAgICAgICAgICAgICByZXNwID0ge307CgogICAgICAgICAgICAgIGNhc2UgMzY6CiAgICAgICAgICAgICAgICBpZiAocmVzcC5lcnJvcnMpIHsKICAgICAgICAgICAgICAgICAgRWxNZXNzYWdlLmVycm9yKHJlc3AuZXJyb3JzKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAzNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOSk7CiAgICAgIH0pKTsKICAgICAgcmV0dXJuIF9mZXRjaFBvZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBmZXRjaFByb2Nlc3MoX3g4KSB7CiAgICAgIHJldHVybiBfZmV0Y2hQcm9jZXNzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgZnVuY3Rpb24gX2ZldGNoUHJvY2VzcygpIHsKICAgICAgX2ZldGNoUHJvY2VzcyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKHNldFBvZCkgewogICAgICAgIHZhciByZXNwLCBwcm9jZXNzLCBjdXJyZW50UHJvY2VzczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEwJChfY29udGV4dDEwKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0b3JTdG9yZS5nZXRQcm9jZXNzZXMoewogICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkOiBzZWxlY3RvclN0b3JlLmN1cnJlbnRQb2QuaWQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXNwID0gX2NvbnRleHQxMC5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChzZXRQb2QpIHsKICAgICAgICAgICAgICAgICAgcHJvY2VzcyA9IHBhcmFtcy5wcm9jZXNzSWQgfHwgc2VsZWN0b3JTdG9yZS5wcm9jZXNzZXNbMF0uaWQ7CiAgICAgICAgICAgICAgICAgIGN1cnJlbnRQcm9jZXNzID0gc2VsZWN0b3JTdG9yZS5wcm9jZXNzZXMuZmluZChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmlkID09PSBwcm9jZXNzOwogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50UHJvY2VzcykgewogICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yU3RvcmUuc2V0Q3VycmVudFByb2Nlc3MoY3VycmVudFByb2Nlc3MpOwogICAgICAgICAgICAgICAgICAgIHN0YXRlcy5jdXJyZW50UHJvY2VzcyA9IGN1cnJlbnRQcm9jZXNzLmxhYmVsOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJyZXR1cm4iLCByZXNwKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTApOwogICAgICB9KSk7CiAgICAgIHJldHVybiBfZmV0Y2hQcm9jZXNzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgZnVuY3Rpb24gZmV0Y2hEZXN0UHJvY2VzcyhfeDkpIHsKICAgICAgcmV0dXJuIF9mZXRjaERlc3RQcm9jZXNzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgZnVuY3Rpb24gX2ZldGNoRGVzdFByb2Nlc3MoKSB7CiAgICAgIF9mZXRjaERlc3RQcm9jZXNzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTEoc2V0UG9kKSB7CiAgICAgICAgdmFyIHJlc3AsIGRlc3RQcm9jZXNzLCBjdXJyZW50RGVzdFByb2Nlc3M7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMSQoX2NvbnRleHQxMSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDExLnByZXYgPSBfY29udGV4dDExLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdG9yU3RvcmUuZ2V0UHJvY2Vzc2VzKHsKICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZDogc2VsZWN0b3JTdG9yZS5jdXJyZW50RGVzdFBvZC5pZCwKICAgICAgICAgICAgICAgICAgaXNSZWxhdGlvbjogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlc3AgPSBfY29udGV4dDExLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCFzZXRQb2QpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGRlc3RQcm9jZXNzID0gcGFyYW1zLmRlc3RQcm9jZXNzSWQgfHwgc2VsZWN0b3JTdG9yZS5kZXN0UHJvY2Vzc2VzWzBdLmlkOwogICAgICAgICAgICAgICAgY3VycmVudERlc3RQcm9jZXNzID0gc2VsZWN0b3JTdG9yZS5kZXN0UHJvY2Vzc2VzLmZpbmQoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuaWQgPT09IGRlc3RQcm9jZXNzOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnREZXN0UHJvY2VzcykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgc3RhdGVzLmN1cnJlbnREZXN0UHJvY2VzcyA9ICIiOwogICAgICAgICAgICAgICAgc2VsZWN0b3JTdG9yZS5zZXRDdXJyZW50RGVzdFByb2Nlc3MobnVsbCk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgc2VsZWN0b3JTdG9yZS5zZXRDdXJyZW50RGVzdFByb2Nlc3MoY3VycmVudERlc3RQcm9jZXNzKTsKICAgICAgICAgICAgICAgIHN0YXRlcy5jdXJyZW50RGVzdFByb2Nlc3MgPSBjdXJyZW50RGVzdFByb2Nlc3MubGFiZWw7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5hYnJ1cHQoInJldHVybiIsIHJlc3ApOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTEpOwogICAgICB9KSk7CiAgICAgIHJldHVybiBfZmV0Y2hEZXN0UHJvY2Vzcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZUN1cnJlbnREZXN0UG9kKCkgewogICAgICBpZiAoIShzZWxlY3RvclN0b3JlLmRlc3RQb2RzLmxlbmd0aCAmJiBzZWxlY3RvclN0b3JlLmRlc3RQb2RzWzBdKSkgewogICAgICAgIHNlbGVjdG9yU3RvcmUuc2V0Q3VycmVudERlc3RQb2QobnVsbCk7CiAgICAgICAgc3RhdGVzLmN1cnJlbnREZXN0UG9kID0gIiI7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgZGVzdFBvZCA9IHBhcmFtcy5kZXN0UG9kSWQgfHwgc2VsZWN0b3JTdG9yZS5kZXN0UG9kc1swXS5pZDsKICAgICAgdmFyIGN1cnJlbnREZXN0UG9kID0gc2VsZWN0b3JTdG9yZS5kZXN0UG9kcy5maW5kKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGQuaWQgPT09IGRlc3RQb2Q7CiAgICAgIH0pOwoKICAgICAgaWYgKCFjdXJyZW50RGVzdFBvZCkgewogICAgICAgIHN0YXRlcy5jdXJyZW50RGVzdFBvZCA9ICIiOwogICAgICAgIHNlbGVjdG9yU3RvcmUuc2V0Q3VycmVudERlc3RQb2QobnVsbCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBzZWxlY3RvclN0b3JlLnNldEN1cnJlbnREZXN0UG9kKGN1cnJlbnREZXN0UG9kKTsKICAgICAgc3RhdGVzLmN1cnJlbnREZXN0UG9kID0gY3VycmVudERlc3RQb2QubGFiZWw7CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlQ3VycmVudFBvZCgpIHsKICAgICAgaWYgKCEoc2VsZWN0b3JTdG9yZS5wb2RzLmxlbmd0aCAmJiBzZWxlY3RvclN0b3JlLnBvZHNbMF0pKSB7CiAgICAgICAgc2VsZWN0b3JTdG9yZS5zZXRDdXJyZW50UG9kKG51bGwpOwogICAgICAgIHN0YXRlcy5jdXJyZW50UG9kID0gIiI7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgcG9kID0gcGFyYW1zLnBvZElkIHx8IHNlbGVjdG9yU3RvcmUucG9kc1swXS5pZDsKICAgICAgdmFyIGN1cnJlbnRQb2QgPSBzZWxlY3RvclN0b3JlLnBvZHMuZmluZChmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiBkLmlkID09PSBwb2Q7CiAgICAgIH0pOwoKICAgICAgaWYgKCFjdXJyZW50UG9kKSB7CiAgICAgICAgc2VsZWN0b3JTdG9yZS5zZXRDdXJyZW50UG9kKG51bGwpOwogICAgICAgIHN0YXRlcy5jdXJyZW50UG9kID0gIiI7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBzZWxlY3RvclN0b3JlLnNldEN1cnJlbnRQb2QoY3VycmVudFBvZCk7CiAgICAgIHN0YXRlcy5jdXJyZW50UG9kID0gY3VycmVudFBvZC5sYWJlbDsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRUb29scygpIHsKICAgICAgc3dpdGNoIChwYXJhbXMuZW50aXR5KSB7CiAgICAgICAgY2FzZSBFbnRpdHlUeXBlWzFdLnZhbHVlOgogICAgICAgICAgdG9vbEljb25zLnZhbHVlID0gQWxsVG9vbHM7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSBFbnRpdHlUeXBlWzBdLnZhbHVlOgogICAgICAgICAgdG9vbEljb25zLnZhbHVlID0gU2VydmljZVRvb2xzOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgRW50aXR5VHlwZVsyXS52YWx1ZToKICAgICAgICAgIHRvb2xJY29ucy52YWx1ZSA9IEVuZHBvaW50VG9vbHM7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSBFbnRpdHlUeXBlWzNdLnZhbHVlOgogICAgICAgICAgdG9vbEljb25zLnZhbHVlID0gSW5zdGFuY2VUb29sczsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIEVudGl0eVR5cGVbNF0udmFsdWU6CiAgICAgICAgICB0b29sSWNvbnMudmFsdWUgPSBTZXJ2aWNlUmVsYXRpb25Ub29sczsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIEVudGl0eVR5cGVbNV0udmFsdWU6CiAgICAgICAgICB0b29sSWNvbnMudmFsdWUgPSBJbnN0YW5jZVJlbGF0aW9uVG9vbHM7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSBFbnRpdHlUeXBlWzZdLnZhbHVlOgogICAgICAgICAgdG9vbEljb25zLnZhbHVlID0gRW5kcG9pbnRSZWxhdGlvblRvb2xzOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgRW50aXR5VHlwZVs3XS52YWx1ZToKICAgICAgICAgIHRvb2xJY29ucy52YWx1ZSA9IFByb2Nlc3NUb29sczsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdG9vbEljb25zLnZhbHVlID0gQWxsVG9vbHM7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzZWFyY2hQb2RzKHF1ZXJ5KSB7CiAgICAgIHZhciBwYXJhbSA9IHsKICAgICAgICBrZXl3b3JkOiBxdWVyeQogICAgICB9OwogICAgICBmZXRjaFBvZHMoRW50aXR5VHlwZVsyXS52YWx1ZSwgc2VsZWN0b3JTdG9yZS5jdXJyZW50U2VydmljZS5pZCwgZmFsc2UsIHBhcmFtKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZWFyY2hEZXN0UG9kcyhxdWVyeSkgewogICAgICB2YXIgcGFyYW0gPSB7CiAgICAgICAga2V5d29yZDogcXVlcnkKICAgICAgfTsKICAgICAgZmV0Y2hQb2RzKEVudGl0eVR5cGVbNl0udmFsdWUsIHNlbGVjdG9yU3RvcmUuY3VycmVudERlc3RTZXJ2aWNlLmlkLCBmYWxzZSwgcGFyYW0pOwogICAgfQoKICAgIHdhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGRhc2hib2FyZFN0b3JlLmVudGl0eTsKICAgIH0sIGZ1bmN0aW9uIChuZXdWYWwsIG9sZFZhbCkgewogICAgICBpZiAobmV3VmFsID09PSBvbGRWYWwpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGdldFNlcnZpY2VzKCk7CiAgICB9KTsKICAgIHJldHVybiBmdW5jdGlvbiAoX2N0eCwgX2NhY2hlKSB7CiAgICAgIHZhciBfY29tcG9uZW50X1NlbGVjdG9yID0gX3Jlc29sdmVDb21wb25lbnQoIlNlbGVjdG9yIik7CgogICAgICB2YXIgX2NvbXBvbmVudF9JY29uID0gX3Jlc29sdmVDb21wb25lbnQoIkljb24iKTsKCiAgICAgIHZhciBfY29tcG9uZW50X2VsX2Ryb3Bkb3duX2l0ZW0gPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtZHJvcGRvd24taXRlbSIpOwoKICAgICAgdmFyIF9jb21wb25lbnRfZWxfZHJvcGRvd25fbWVudSA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1kcm9wZG93bi1tZW51Iik7CgogICAgICB2YXIgX2NvbXBvbmVudF9lbF9kcm9wZG93biA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC1kcm9wZG93biIpOwoKICAgICAgdmFyIF9jb21wb25lbnRfZWxfdG9vbHRpcCA9IF9yZXNvbHZlQ29tcG9uZW50KCJlbC10b29sdGlwIik7CgogICAgICB2YXIgX2NvbXBvbmVudF9lbF9zd2l0Y2ggPSBfcmVzb2x2ZUNvbXBvbmVudCgiZWwtc3dpdGNoIik7CgogICAgICB2YXIgX2RpcmVjdGl2ZV9sb2FkaW5nID0gX3Jlc29sdmVEaXJlY3RpdmUoImxvYWRpbmciKTsKCiAgICAgIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIF9ob2lzdGVkXzEsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCB7CiAgICAgICAgY2xhc3M6IF9ub3JtYWxpemVDbGFzcyhfdW5yZWYoaXNSZWxhdGlvbikgPyAnZmxleC12JyA6ICdmbGV4LWgnKQogICAgICB9LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMiwgW191bnJlZihrZXkpICE9PSAxMCA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIF9ob2lzdGVkXzMsIFtfaG9pc3RlZF80LCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9TZWxlY3RvciwgewogICAgICAgIG1vZGVsVmFsdWU6IF91bnJlZihzdGF0ZXMpLmN1cnJlbnRTZXJ2aWNlLAogICAgICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzBdIHx8IChfY2FjaGVbMF0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gX3VucmVmKHN0YXRlcykuY3VycmVudFNlcnZpY2UgPSAkZXZlbnQ7CiAgICAgICAgfSksCiAgICAgICAgb3B0aW9uczogX3VucmVmKHNlbGVjdG9yU3RvcmUpLnNlcnZpY2VzLAogICAgICAgIHNpemU6ICJzbWFsbCIsCiAgICAgICAgcGxhY2Vob2xkZXI6ICJTZWxlY3QgYSBzZXJ2aWNlIiwKICAgICAgICBvbkNoYW5nZTogY2hhbmdlU2VydmljZSwKICAgICAgICBjbGFzczogInNlbGVjdG9ycyIKICAgICAgfSwgbnVsbCwgOCwgWyJtb2RlbFZhbHVlIiwgIm9wdGlvbnMiXSldKSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCIiLCB0cnVlKSwgX3VucmVmKGtleSkgPT09IDMgfHwgX3VucmVmKGtleSkgPT09IDQgfHwgX3VucmVmKGtleSkgPT09IDUgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBfaG9pc3RlZF81LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgic3BhbiIsIF9ob2lzdGVkXzYsIF90b0Rpc3BsYXlTdHJpbmcoWyJFbmRwb2ludFJlbGF0aW9uIiwgIkVuZHBvaW50Il0uaW5jbHVkZXMoX3VucmVmKGRhc2hib2FyZFN0b3JlKS5lbnRpdHkpID8gIiRFbmRwb2ludCIgOiAiJFNlcnZpY2VJbnN0YW5jZSIpLCAxKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfU2VsZWN0b3IsIHsKICAgICAgICBtb2RlbFZhbHVlOiBfdW5yZWYoc3RhdGVzKS5jdXJyZW50UG9kLAogICAgICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzFdIHx8IChfY2FjaGVbMV0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gX3VucmVmKHN0YXRlcykuY3VycmVudFBvZCA9ICRldmVudDsKICAgICAgICB9KSwKICAgICAgICBvcHRpb25zOiBfdW5yZWYoc2VsZWN0b3JTdG9yZSkucG9kcywKICAgICAgICBzaXplOiAic21hbGwiLAogICAgICAgIHBsYWNlaG9sZGVyOiAiU2VsZWN0IGEgZGF0YSIsCiAgICAgICAgb25DaGFuZ2U6IGNoYW5nZVBvZHMsCiAgICAgICAgb25RdWVyeTogc2VhcmNoUG9kcywKICAgICAgICBjbGFzczogInNlbGVjdG9yUG9kIiwKICAgICAgICBpc1JlbW90ZTogWydFbmRwb2ludFJlbGF0aW9uJywgJ0VuZHBvaW50J10uaW5jbHVkZXMoX3VucmVmKGRhc2hib2FyZFN0b3JlKS5lbnRpdHkpCiAgICAgIH0sIG51bGwsIDgsIFsibW9kZWxWYWx1ZSIsICJvcHRpb25zIiwgImlzUmVtb3RlIl0pXSkpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgiIiwgdHJ1ZSksIF91bnJlZihrZXkpID09PSA1ID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgX2hvaXN0ZWRfNywgW19ob2lzdGVkXzgsIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X1NlbGVjdG9yLCB7CiAgICAgICAgbW9kZWxWYWx1ZTogX3VucmVmKHN0YXRlcykuY3VycmVudFByb2Nlc3MsCiAgICAgICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbMl0gfHwgKF9jYWNoZVsyXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBfdW5yZWYoc3RhdGVzKS5jdXJyZW50UHJvY2VzcyA9ICRldmVudDsKICAgICAgICB9KSwKICAgICAgICBvcHRpb25zOiBfdW5yZWYoc2VsZWN0b3JTdG9yZSkucHJvY2Vzc2VzLAogICAgICAgIHNpemU6ICJzbWFsbCIsCiAgICAgICAgcGxhY2Vob2xkZXI6ICJTZWxlY3QgYSBkYXRhIiwKICAgICAgICBvbkNoYW5nZTogY2hhbmdlUHJvY2VzcywKICAgICAgICBjbGFzczogInNlbGVjdG9ycyIKICAgICAgfSwgbnVsbCwgOCwgWyJtb2RlbFZhbHVlIiwgIm9wdGlvbnMiXSldKSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCIiLCB0cnVlKV0pLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCB7CiAgICAgICAgY2xhc3M6IF9ub3JtYWxpemVDbGFzcyhbImZsZXgtaCIsIF91bnJlZihpc1JlbGF0aW9uKSA/ICdyZWxhdGlvbicgOiAnJ10pCiAgICAgIH0sIFtfdW5yZWYoa2V5KSA9PT0gMiB8fCBfdW5yZWYoa2V5KSA9PT0gNCB8fCBfdW5yZWYoa2V5KSA9PT0gNSA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIF9ob2lzdGVkXzksIFtfaG9pc3RlZF8xMCwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfU2VsZWN0b3IsIHsKICAgICAgICBtb2RlbFZhbHVlOiBfdW5yZWYoc3RhdGVzKS5jdXJyZW50RGVzdFNlcnZpY2UsCiAgICAgICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbM10gfHwgKF9jYWNoZVszXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBfdW5yZWYoc3RhdGVzKS5jdXJyZW50RGVzdFNlcnZpY2UgPSAkZXZlbnQ7CiAgICAgICAgfSksCiAgICAgICAgb3B0aW9uczogX3VucmVmKHNlbGVjdG9yU3RvcmUpLmRlc3RTZXJ2aWNlcywKICAgICAgICBzaXplOiAic21hbGwiLAogICAgICAgIHBsYWNlaG9sZGVyOiAiU2VsZWN0IGEgc2VydmljZSIsCiAgICAgICAgb25DaGFuZ2U6IGNoYW5nZURlc3RTZXJ2aWNlLAogICAgICAgIGNsYXNzOiAic2VsZWN0b3JzIgogICAgICB9LCBudWxsLCA4LCBbIm1vZGVsVmFsdWUiLCAib3B0aW9ucyJdKV0pKSA6IF9jcmVhdGVDb21tZW50Vk5vZGUoIiIsIHRydWUpLCBfdW5yZWYoa2V5KSA9PT0gNCB8fCBfdW5yZWYoa2V5KSA9PT0gNSA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIF9ob2lzdGVkXzExLCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgic3BhbiIsIF9ob2lzdGVkXzEyLCBfdG9EaXNwbGF5U3RyaW5nKF91bnJlZihkYXNoYm9hcmRTdG9yZSkuZW50aXR5ID09PSAiRW5kcG9pbnRSZWxhdGlvbiIgPyAiJERlc3RpbmF0aW9uRW5kcG9pbnQiIDogIiREZXN0aW5hdGlvblNlcnZpY2VJbnN0YW5jZSIpLCAxKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfU2VsZWN0b3IsIHsKICAgICAgICBtb2RlbFZhbHVlOiBfdW5yZWYoc3RhdGVzKS5jdXJyZW50RGVzdFBvZCwKICAgICAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVs0XSB8fCAoX2NhY2hlWzRdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgcmV0dXJuIF91bnJlZihzdGF0ZXMpLmN1cnJlbnREZXN0UG9kID0gJGV2ZW50OwogICAgICAgIH0pLAogICAgICAgIG9wdGlvbnM6IF91bnJlZihzZWxlY3RvclN0b3JlKS5kZXN0UG9kcywKICAgICAgICBzaXplOiAic21hbGwiLAogICAgICAgIHBsYWNlaG9sZGVyOiAiU2VsZWN0IGEgZGF0YSIsCiAgICAgICAgb25DaGFuZ2U6IGNoYW5nZURlc3RQb2RzLAogICAgICAgIGNsYXNzOiAic2VsZWN0b3JQb2QiLAogICAgICAgIG9uUXVlcnk6IHNlYXJjaERlc3RQb2RzLAogICAgICAgIGlzUmVtb3RlOiBfdW5yZWYoZGFzaGJvYXJkU3RvcmUpLmVudGl0eSA9PT0gJ0VuZHBvaW50UmVsYXRpb24nCiAgICAgIH0sIG51bGwsIDgsIFsibW9kZWxWYWx1ZSIsICJvcHRpb25zIiwgImlzUmVtb3RlIl0pXSkpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgiIiwgdHJ1ZSksIF91bnJlZihrZXkpID09PSA1ID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMTMsIFtfaG9pc3RlZF8xNCwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfU2VsZWN0b3IsIHsKICAgICAgICBtb2RlbFZhbHVlOiBfdW5yZWYoc3RhdGVzKS5jdXJyZW50RGVzdFByb2Nlc3MsCiAgICAgICAgIm9uVXBkYXRlOm1vZGVsVmFsdWUiOiBfY2FjaGVbNV0gfHwgKF9jYWNoZVs1XSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBfdW5yZWYoc3RhdGVzKS5jdXJyZW50RGVzdFByb2Nlc3MgPSAkZXZlbnQ7CiAgICAgICAgfSksCiAgICAgICAgb3B0aW9uczogX3VucmVmKHNlbGVjdG9yU3RvcmUpLmRlc3RQcm9jZXNzZXMsCiAgICAgICAgc2l6ZTogInNtYWxsIiwKICAgICAgICBwbGFjZWhvbGRlcjogIlNlbGVjdCBhIGRhdGEiLAogICAgICAgIG9uQ2hhbmdlOiBjaGFuZ2VEZXN0UHJvY2VzcywKICAgICAgICBjbGFzczogInNlbGVjdG9ycyIKICAgICAgfSwgbnVsbCwgOCwgWyJtb2RlbFZhbHVlIiwgIm9wdGlvbnMiXSldKSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCIiLCB0cnVlKV0sIDIpXSwgMiksICFfdW5yZWYoYXBwU3RvcmUpLmlzTW9iaWxlID8gX3dpdGhEaXJlY3RpdmVzKChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIF9ob2lzdGVkXzE1LCBbX3VucmVmKGRhc2hib2FyZFN0b3JlKS5lZGl0TW9kZSA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIF9ob2lzdGVkXzE2LCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfZHJvcGRvd24sIHsKICAgICAgICBjb250ZW50OiAiQ29udHJvbHMiLAogICAgICAgIHBsYWNlbWVudDogImJvdHRvbSIsCiAgICAgICAgcGVyc2lzdGVudDogZmFsc2UKICAgICAgfSwgewogICAgICAgIGRyb3Bkb3duOiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2VsX2Ryb3Bkb3duX21lbnUsIG51bGwsIHsKICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBbKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCBudWxsLCBfcmVuZGVyTGlzdCh0b29sSWNvbnMudmFsdWUsIGZ1bmN0aW9uICh0LCBpbmRleCkgewogICAgICAgICAgICAgICAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfZWxfZHJvcGRvd25faXRlbSwgewogICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCRldmVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBjbGlja0ljb25zKHQpOwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBrZXk6IGluZGV4LAogICAgICAgICAgICAgICAgICB0aXRsZTogdC5jb250ZW50CiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X0ljb24sIHsKICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiAibXItNSIsCiAgICAgICAgICAgICAgICAgICAgICBzaXplOiAibWlkZGxlIiwKICAgICAgICAgICAgICAgICAgICAgIGljb25OYW1lOiB0Lm5hbWUKICAgICAgICAgICAgICAgICAgICB9LCBudWxsLCA4LCBbImljb25OYW1lIl0pLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJzcGFuIiwgbnVsbCwgX3RvRGlzcGxheVN0cmluZyh0LmNvbnRlbnQpLCAxKV07CiAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICBfOiAyCiAgICAgICAgICAgICAgICB9LCAxMDMyLCBbIm9uQ2xpY2siLCAidGl0bGUiXSk7CiAgICAgICAgICAgICAgfSksIDEyOCkpXTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIF86IDEKICAgICAgICAgIH0pXTsKICAgICAgICB9KSwKICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gW19jcmVhdGVFbGVtZW50Vk5vZGUoImkiLCBudWxsLCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfSWNvbiwgewogICAgICAgICAgICBjbGFzczogImljb24tYnRuIiwKICAgICAgICAgICAgc2l6ZTogInNtIiwKICAgICAgICAgICAgaWNvbk5hbWU6ICJjb250cm9sIgogICAgICAgICAgfSldKV07CiAgICAgICAgfSksCiAgICAgICAgXzogMQogICAgICB9KSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfdG9vbHRpcCwgewogICAgICAgIGNvbnRlbnQ6ICJBcHBseSIsCiAgICAgICAgcGxhY2VtZW50OiAiYm90dG9tIiwKICAgICAgICBlZmZlY3Q6ICJsaWdodCIKICAgICAgfSwgewogICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiaSIsIHsKICAgICAgICAgICAgb25DbGljazogYXBwbHlEYXNoYm9hcmQKICAgICAgICAgIH0sIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9JY29uLCB7CiAgICAgICAgICAgIGNsYXNzOiAiaWNvbi1idG4iLAogICAgICAgICAgICBzaXplOiAic20iLAogICAgICAgICAgICBpY29uTmFtZTogInNhdmUiCiAgICAgICAgICB9KV0pXTsKICAgICAgICB9KSwKICAgICAgICBfOiAxCiAgICAgIH0pXSkpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgiIiwgdHJ1ZSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzE3LCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfc3dpdGNoLCB7CiAgICAgICAgbW9kZWxWYWx1ZTogX3VucmVmKGRhc2hib2FyZFN0b3JlKS5lZGl0TW9kZSwKICAgICAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVs2XSB8fCAoX2NhY2hlWzZdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICAgICAgcmV0dXJuIF91bnJlZihkYXNoYm9hcmRTdG9yZSkuZWRpdE1vZGUgPSAkZXZlbnQ7CiAgICAgICAgfSksCiAgICAgICAgImFjdGl2ZS10ZXh0IjogIkVkaXQiLAogICAgICAgICJpbmFjdGl2ZS10ZXh0IjogIlZpZXciLAogICAgICAgIHNpemU6ICJzbWFsbCIsCiAgICAgICAgImlubGluZS1wcm9tcHQiOiAiIiwKICAgICAgICAiYWN0aXZlLWNvbG9yIjogIiM0MDllZmYiLAogICAgICAgICJpbmFjdGl2ZS1jb2xvciI6ICIjOTk5IiwKICAgICAgICBvbkNoYW5nZTogY2hhbmdlTW9kZQogICAgICB9LCBudWxsLCA4LCBbIm1vZGVsVmFsdWUiXSldKV0pKSwgW1tfZGlyZWN0aXZlX2xvYWRpbmcsIGxvYWRpbmcudmFsdWVdXSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCIiLCB0cnVlKV0pOwogICAgfTsKICB9Cn0pOw=="},null]}